MWF.xApplication.Forum=MWF.xApplication.Forum||{};MWF.require("MWF.widget.Identity",null,false);MWF.xDesktop.requireApp("Forum","Actions.RestActions",null,false);MWF.xDesktop.requireApp("Forum","Access",null,false);MWF.xDesktop.requireApp("Template","Explorer",null,false);MWF.xApplication.Forum.options={multitask:false,executable:true};MWF.xApplication.Forum.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"Forum",icon:"icon.png",width:"1210",height:"700",isResize:false,isMax:true,title:MWF.xApplication.Forum.LP.title},onQueryLoad:function(){this.lp=MWF.xApplication.Forum.LP},loadApplication:function(t){this.userName=layout.desktop.session.user.name;this.restActions=new MWF.xApplication.Forum.Actions.RestActions;this.path="/x_component_Forum/$Main/"+this.options.style+"/";this.createNode();this.loadApplicationContent()},loadController:function(t){this.access=new MWF.xApplication.Forum.Access(this.restActions,this.lp);if(t)t()},reload:function(){this.clearContent();if(this.explorer){this.openSetting(this.explorer.currentNaviItem.retrieve("index"))}else{this.loadApplicationLayout()}},isAdmin:function(){return this.access.isAdmin()},createNode:function(){this.content.setStyle("overflow","hidden");this.node=new Element("div",{styles:this.css.node}).inject(this.content)},loadApplicationContent:function(){this.loadController(function(){this.access.login(function(){if(this.status&&this.status.setting){this.openSetting(this.status.index)}else{this.loadApplicationLayout()}}.bind(this))}.bind(this))},loaNavi:function(t){this.naviNode=new Element("div.naviNode",{styles:this.css.naviNode}).inject(this.node);var e={id:""};if(this.status){e.id=this.status.id}this.navi=new MWF.xApplication.Forum.Navi(this,this.naviNode,e)},loadApplicationLayout:function(){this.contentContainerNode=new Element("div.contentContainerNode",{styles:this.css.contentContainerNode}).inject(this.node);this.createTopNode();this.createContainerNode()},createTopNode:function(){this.topContainerNode=new Element("div.topContainerNode",{styles:this.css.topContainerNode}).inject(this.contentContainerNode);this.topNode=new Element("div.topNode",{styles:this.css.topNode}).inject(this.topContainerNode);this.topMainPageNode=new Element("div.topMainPageNode",{styles:{cursor:"pointer"}}).inject(this.topNode);this.topMainPageNode.addEvent("click",function(){this.openMainPage()}.bind(this));this.searchDiv=new Element("div.searchDiv",{styles:this.css.searchDiv}).inject(this.topNode);this.searchInput=new Element("input.searchInput",{styles:this.css.searchInput,value:this.lp.searchKey,title:this.lp.searchTitle}).inject(this.searchDiv);var t=this;this.searchInput.addEvents({focus:function(){if(this.value==t.lp.searchKey)this.set("value","")},blur:function(){if(!this.value)this.set("value",t.lp.searchKey)},keydown:function(t){if(t.code==13){this.search();t.preventDefault()}}.bind(this)});this.searchAction=new Element("div.searchAction",{styles:this.css.searchAction}).inject(this.searchDiv);this.searchAction.addEvents({click:function(){this.search()}.bind(this),mouseover:function(t){this.searchAction.setStyles(this.css.searchAction_over2);t.stopPropagation()}.bind(this),mouseout:function(){this.searchAction.setStyles(this.css.searchAction)}.bind(this)});this.searchDiv.addEvents({mouseover:function(){this.searchInput.setStyles(this.css.searchInput_over);this.searchAction.setStyles(this.css.searchAction_over)}.bind(this),mouseout:function(){this.searchInput.setStyles(this.css.searchInput);this.searchAction.setStyles(this.css.searchAction)}.bind(this)});this.restActions.getBBSName(function(t){var e=t.data;if(e.configValue&&e.configValue!=""&&e.configValue!="企业论坛"){this.topTextNode=new Element("div.topTextNode",{styles:this.css.topTextNode,text:e.configValue}).inject(this.topMainPageNode)}else{this.topIconNode=new Element("div",{styles:this.css.topIconNode}).inject(this.topMainPageNode)}}.bind(this),null,false);this.topContentNode=new Element("div",{styles:this.css.topContentNode}).inject(this.topNode);if(this.access.isAnonymous()){if(this.access.signUpMode!="disable"){this.signupNode=new Element("div",{styles:this.css.signupNode}).inject(this.topContentNode);this.signupIconNode=new Element("div",{styles:this.css.signupIconNode}).inject(this.signupNode);this.signupTextNode=new Element("div",{styles:this.css.signupTextNode,text:this.lp.signup}).inject(this.signupNode);this.signupNode.addEvent("click",function(){this.openSignUpForm()}.bind(this))}this.loginNode=new Element("div",{styles:this.css.loginNode}).inject(this.topContentNode);this.loginIconNode=new Element("div",{styles:this.css.loginIconNode}).inject(this.loginNode);this.loginTextNode=new Element("div",{styles:this.css.loginTextNode,text:this.lp.login}).inject(this.loginNode);this.loginNode.addEvent("click",function(){this.openLoginForm()}.bind(this))}else{if(this.inBrowser){this.logoutNode=new Element("div",{styles:this.css.logoutNode}).inject(this.topContentNode);this.logoutIconNode=new Element("div",{styles:this.css.logoutIconNode}).inject(this.logoutNode);this.logoutTextNode=new Element("div",{styles:this.css.logoutTextNode,text:this.lp.logout}).inject(this.logoutNode);this.logoutNode.addEvent("click",function(){this.logout()}.bind(this))}this.settingNode=new Element("div",{styles:this.css.settingNode}).inject(this.topContentNode);this.settingIconNode=new Element("div",{styles:this.css.settingIconNode}).inject(this.settingNode);this.settingTextNode=new Element("div",{styles:this.css.settingTextNode,text:this.lp.setting}).inject(this.settingNode);this.settingNode.addEvent("click",function(){this.openSetting()}.bind(this));this.personNode=new Element("div",{styles:this.css.personNode}).inject(this.topContentNode);this.personIconNode=new Element("div",{styles:this.css.personIconNode}).inject(this.personNode);this.personTextNode=new Element("div",{styles:this.css.personTextNode,text:this.lp.personCenter}).inject(this.personNode);this.personNode.addEvent("click",function(){this.openPerson(this.userName)}.bind(this))}this._createTopContent()},_createTopContent:function(){},getSystemSetting:function(t,e,i){this.restActions.getSystemSettingByCode({configCode:t},function(t){if(e)e(t.data)}.bind(this),null,i)},search:function(){var t=this.searchInput.get("value");if(t==""||t==this.lp.searchKey){this.notice(this.lp.noSearchContentNotice,"error");return}var e="ForumSearch";if(this.desktop.apps[e]&&!this.inBrowser){this.desktop.apps[e].close()}this.desktop.openApplication(null,"ForumSearch",{appId:e,searchContent:t})},createContainerNode:function(){this.createContent()},createContent:function(){this.middleNode=new Element("div.middleNode",{styles:this.css.middleNode}).inject(this.contentContainerNode);this.setContentSizeFun=this.setContentSize.bind(this);this.addEvent("resize",this.setContentSizeFun);this.setContentSize();this.contentNode=new Element("div.contentNode",{styles:this.css.contentNode}).inject(this.middleNode);this.createRecommand();this.restActions.listCategoryAll(function(t){if(!t.data)t.data=[];t.data.each(function(t){if(t.forumStatus!=this.lp.invalid){this._createCategory(t)}}.bind(this))}.bind(this))},setContentSize:function(){var t={x:0,y:0};var e=this.node.getSize();var i=this.contentContainerNode.getStyle("padding-top").toFloat();var s=this.contentContainerNode.getStyle("padding-bottom").toFloat();var n=e.y-t.y-i-s;this.contentContainerNode.setStyle("height",""+n+"px")},createRecommand:function(){var t=new Element("div.recommandNode",{styles:this.css.recommandNode}).inject(this.contentNode);var e=new Element("div.recommandTopNode",{styles:this.css.recommandTopNode}).inject(t);e.setStyle("border-bottom","1px solid "+this.lp.defaultForumColor);var i=new Element("div.recommandTopTitleNode",{styles:this.css.recommandTopTitleNode,text:this.lp.recommandSubject}).inject(e);i.setStyle("background-color",this.lp.defaultForumColor);var s=new MWF.xApplication.Forum.Main.RecommandView(t,this,this,{templateUrl:this.path+"listItemRecommand.json"},{lp:this.lp});s.load()},_createCategory:function(t){var e=new Element("div.categoryNode",{styles:this.css.categoryNode}).inject(this.contentNode);var i=new Element("div.categoryTopNode",{styles:this.css.categoryTopNode}).inject(e);i.setStyle("border-bottom","1px solid "+t.forumColor||this.lp.defaultForumColor);var s=new Element("div.categoryTopTitleNode",{styles:this.css.categoryTopTitleNode,text:t.forumName}).inject(i);s.addEvents({click:function(t){this.obj.openCategory(this.data)}.bind({obj:this,data:t})});s.setStyle("background-color",t.forumColor||this.lp.defaultForumColor);var n=new Element("div.categoryTopRightNode",{styles:this.css.categoryTopRightNode2}).inject(i);this.createPersonNode(n,t.forumManagerName);new Element("div.categoryTopRightNode",{styles:this.css.categoryTopRightNode,text:this.lp.categoryManager+"："}).inject(i);if(t.indexListStyle=="经典"){var o=new MWF.xApplication.Forum.Main.ListView(e,this,this,{templateUrl:this.path+"listItemList.json",categoryId:t.id},{lp:this.lp});o.load()}else if(t.indexListStyle=="图片矩形"){var o=new MWF.xApplication.Forum.Main.ImageView(e,this,this,{templateUrl:this.path+"listItemImage.json",categoryId:t.id},{lp:this.lp});o.load()}else{var o=new MWF.xApplication.Forum.Main.TileView(e,this,this,{templateUrl:this.path+"listItemTile.json",categoryId:t.id},{lp:this.lp});o.load()}},clearContent:function(){if(this.explorer)this.explorer.destroy();this.explorer=null;if(this.setContentSizeFun)this.removeEvent("resize",this.setContentSizeFun);if(this.scrollBar&&this.scrollBar.scrollVAreaNode)this.scrollBar.scrollVAreaNode.destroy();if(this.scrollBar)delete this.scrollBar;if(this.contentContainerNode){this.contentContainerNode.destroy()}},openMainPage:function(){this.clearContent();this.loadApplicationLayout()},openCategory:function(t){var e="ForumCategory"+t.id;if(this.desktop.apps[e]){this.desktop.apps[e].setCurrent()}else{this.desktop.openApplication(null,"ForumCategory",{categoryId:t.id,appId:e})}},openLoginForm:function(){MWF.require("MWF.xDesktop.Authentication",null,false);var t=new MWF.xDesktop.Authentication({style:"application",onPostOk:function(){window.location.reload()}},this);t.openLoginForm()},openSignUpForm:function(){MWF.require("MWF.xDesktop.Authentication",null,false);var t=new MWF.xDesktop.Authentication({style:"application",onPostOk:function(){}},this);t.openSignUpForm()},openSetting:function(t){MWF.xDesktop.requireApp("Forum","Setting",null,false);this.clearContent();this.contentContainerNode=new Element("div.contentContainerNode",{styles:this.css.contentContainerNode}).inject(this.node);this.createTopNode();this.middleNode=new Element("div.middleNode",{styles:this.css.middleNode}).inject(this.contentContainerNode);this.contentNode=new Element("div.contentNode",{styles:this.css.contentNode}).inject(this.middleNode);this.explorer=new MWF.xApplication.Forum.Setting(this.contentNode,this,this.restActions,{isAdmin:this.isAdmin(),index:t||0});this.explorer.load()},recordStatus:function(){var t={};if(this.explorer){t={setting:true,index:this.explorer.currentNaviItem.retrieve("index")}}return t},openPerson:function(t){var e="ForumPerson"+t;if(this.desktop.apps[e]){this.desktop.apps[e].setCurrent()}else{this.desktop.openApplication(null,"ForumPerson",{personName:t,appId:e})}},createPersonNode:function(t,e){var i=e.split(",");i.each(function(e,s){var n=new Element("span",{text:e,styles:this.css.person}).inject(t);n.addEvents({mouseover:function(){this.node.setStyles(this.obj.css.person_over)}.bind({node:n,obj:this}),mouseout:function(){this.node.setStyles(this.obj.css.person)}.bind({node:n,obj:this}),click:function(){this.obj.openPerson(this.userName)}.bind({userName:e,obj:this})});if(s!=i.length-1){new Element("span",{text:","}).inject(t)}}.bind(this))},logout:function(){this.restActions.logout(function(){layout.desktop.session.user.name="anonymous";this.clearContent();this.loadApplicationContent();this.openLoginForm()}.bind(this))}});MWF.xApplication.Forum.Main.RecommandView=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexView,_createDocument:function(t,e){return new MWF.xApplication.Forum.Main.RecommandDocument(this.viewNode,t,this.explorer,this,null,e)},_getCurrentPageData:function(t,e){if(!e)e=12;this.actions.listRecommendedSubject(e,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},_removeDocument:function(t,e){},_create:function(){},_openDocument:function(t){},_queryCreateViewNode:function(){},_postCreateViewNode:function(t){},_queryCreateViewHead:function(){},_postCreateViewHead:function(t){}});MWF.xApplication.Forum.Main.RecommandDocument=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexDocument,mouseoverDocument:function(){},mouseoutDocument:function(){},_queryCreateDocumentNode:function(t){},_postCreateDocumentNode:function(t,e){},open:function(){var t=this.data;var e="ForumDocument"+t.id;if(this.app.desktop.apps[e]){this.app.desktop.apps[e].setCurrent()}else{this.app.desktop.openApplication(null,"ForumDocument",{sectionId:t.sectionId,id:t.id,appId:e,isEdited:false,isNew:false})}},openSection:function(t){var e=this.data;var i="ForumSection"+e.sectionId;if(this.app.desktop.apps[i]){this.app.desktop.apps[i].setCurrent()}else{this.app.desktop.openApplication(t,"ForumSection",{sectionId:e.sectionId,appId:i})}}});MWF.xApplication.Forum.Main.TileView=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexView,_createDocument:function(t,e){if(this.explorer.access.isSectionViewer(t)){return new MWF.xApplication.Forum.Main.TileDocument(this.viewNode,t,this.explorer,this,null,e)}},_getCurrentPageData:function(t,e){if(!e)e=20;var i=this.items.length?this.items[this.items.length-1].data.id:"(0)";var s=this.filterData||{};this.actions.listSection(this.options.categoryId,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},_removeDocument:function(t,e){},_create:function(){},_openDocument:function(t){},_queryCreateViewNode:function(){},_postCreateViewNode:function(t){},_queryCreateViewHead:function(){},_postCreateViewHead:function(t){}});MWF.xApplication.Forum.Main.TileDocument=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexDocument,mouseoverDocument:function(){},mouseoutDocument:function(){},_queryCreateDocumentNode:function(t){},_postCreateDocumentNode:function(t,e){if((this.index+1)%4==0){t.setStyle("margin-right","0px")}var i=t.getElements("[item='moderatorNames']")[0];this.app.createPersonNode(i,e.moderatorNames);var s=t.getElements("[styles='documentItemListNode']")[0];if(s){this._getListData(function(t){t.data.each(function(t,e){var i=new Element("div",{styles:this.css.documentItemListItemNode,text:t.title,title:t.title}).inject(s);i.addEvents({mouseover:function(){this.node.setStyles(this.obj.css.documentItemListItemNode_over)}.bind({node:i,obj:this}),mouseout:function(){this.node.setStyles(this.obj.css.documentItemListItemNode)}.bind({node:i,obj:this}),click:function(){var t="ForumDocument"+this.da.id;if(this.obj.app.desktop.apps[t]){this.obj.app.desktop.apps[t].setCurrent()}else{this.obj.app.desktop.openApplication(null,"ForumDocument",{sectionId:this.da.sectionId,id:this.da.id,appId:t,isEdited:false,isNew:false,index:e})}}.bind({da:t,obj:this})})}.bind(this))}.bind(this),6)}},_getListData:function(t,e){if(!e)e=6;var i={sectionId:this.data.id};this.actions.listSubjectFilterPage(1,e,i,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},openSection:function(t){var e="ForumSection"+this.data.id;if(this.app.desktop.apps[e]){this.app.desktop.apps[e].setCurrent()}else{this.app.desktop.openApplication(t,"ForumSection",{sectionId:this.data.id,appId:e})}}});MWF.xApplication.Forum.Main.ListView=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexView,_createDocument:function(t,e){if(this.explorer.access.isSectionViewer(t)){return new MWF.xApplication.Forum.Main.ListDocument(this.viewNode,t,this.explorer,this,null,e)}},_getCurrentPageData:function(t,e){if(!e)e=20;var i=this.items.length?this.items[this.items.length-1].data.id:"(0)";var s=this.filterData||{};this.actions.listSection(this.options.categoryId,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},_removeDocument:function(t,e){},_create:function(){},_openDocument:function(t){},_queryCreateViewNode:function(){},_postCreateViewNode:function(t){},_queryCreateViewHead:function(){},_postCreateViewHead:function(t){}});MWF.xApplication.Forum.Main.ListDocument=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexDocument,mouseoverDocument:function(){},mouseoutDocument:function(){},_queryCreateDocumentNode:function(t){},_postCreateDocumentNode:function(t,e){var i=t.getElements("[item='moderatorNames']")[0];this.app.createPersonNode(i,e.moderatorNames);var s=t.getElements("[styles='documentItemListNode_list']")[0];var n=t.getElements("[styles='documentItemReplyListNode_list']")[0];if(s){this._getListData(function(t){t.data.each(function(t,e){var i=new Element("div",{styles:this.css.documentItemListItemNode_list,text:t.title,title:t.title}).inject(s);i.addEvents({mouseover:function(){this.node.setStyles(this.obj.css.documentItemListItemNode_list_over)}.bind({node:i,obj:this}),mouseout:function(){this.node.setStyles(this.obj.css.documentItemListItemNode_list)}.bind({node:i,obj:this}),click:function(){var t="ForumDocument"+this.da.id;if(this.obj.app.desktop.apps[t]){this.obj.app.desktop.apps[t].setCurrent()}else{this.obj.app.desktop.openApplication(null,"ForumDocument",{sectionId:this.da.sectionId,id:this.da.id,appId:t,isEdited:false,isNew:false,index:e})}}.bind({da:t,obj:this})});var o=new Element("div",{styles:this.css.documentItemReplyListItemNode_list}).inject(n);var i=new Element("div",{styles:this.css.documentItemReplyTimeNode_list,text:getDateDiff(t.createTime),title:t.createTime}).inject(o);var i=new Element("div",{styles:this.css.documentItemReplyPersonNode_list,text:t.creatorName}).inject(o);i.addEvents({mouseover:function(){this.node.setStyles(this.obj.css.documentItemReplyPersonNode_list_over)}.bind({node:i,obj:this}),mouseout:function(){this.node.setStyles(this.obj.css.documentItemReplyPersonNode_list)}.bind({node:i,obj:this}),click:function(){this.obj.app.openPerson(this.userName)}.bind({userName:t.creatorName,obj:this})})}.bind(this))}.bind(this),6)}},_getListData:function(t,e){if(!e)e=6;var i={sectionId:this.data.id};this.actions.listSubjectFilterPage(1,e,i,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},removeCenterWork:function(t){return false},openSection:function(t){var e="ForumSection"+this.data.id;if(this.app.desktop.apps[e]){this.app.desktop.apps[e].setCurrent()}else{this.app.desktop.openApplication(t,"ForumSection",{sectionId:this.data.id,appId:e})}}});MWF.xApplication.Forum.Main.ImageView=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexView,_createDocument:function(t,e){if(this.explorer.access.isSectionViewer(t)){return new MWF.xApplication.Forum.Main.ImageDocument(this.viewNode,t,this.explorer,this,null,e)}},_getCurrentPageData:function(t,e){if(!e)e=20;var i=this.items.length?this.items[this.items.length-1].data.id:"(0)";var s=this.filterData||{};this.actions.listSection(this.options.categoryId,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},_removeDocument:function(t,e){},_create:function(){},_openDocument:function(t){},_queryCreateViewNode:function(){},_postCreateViewNode:function(t){},_queryCreateViewHead:function(){},_postCreateViewHead:function(t){}});MWF.xApplication.Forum.Main.ImageDocument=new Class({Extends:MWF.xApplication.Template.Explorer.ComplexDocument,mouseoverDocument:function(){},mouseoutDocument:function(){},_queryCreateDocumentNode:function(t){},_postCreateDocumentNode:function(t,e){var i=t.getElements("[item='moderatorNames']")[0];this.app.createPersonNode(i,e.moderatorNames);var s=this;if((this.index+1)%2==0){t.setStyle("margin-right","0px")}var n=t.getElements("[styles='documentItemLeftImage']")[0];var o={sectionId:this.data.id,needPicture:true};this.actions.listSubjectFilterPage(1,1,o,function(t){if(t.data){var e=t.data[0];this.node.set("title",e.title);this.node.set("src",e.pictureBase64);this.node.addEvents({click:function(){var t="ForumDocument"+this.da.id;if(s.app.desktop.apps[t]){s.app.desktop.apps[t].setCurrent()}else{s.app.desktop.openApplication(null,"ForumDocument",{sectionId:this.da.sectionId,id:this.da.id,appId:t,isEdited:false,isNew:false})}}.bind({da:e})})}}.bind({node:n}));var a=t.getElements("[styles='documentItemListNode']")[0];if(a){this._getListData(function(t){t.data.each(function(t,e){var i=new Element("div",{styles:this.css.documentItemListItemNode,text:t.title,title:t.title}).inject(a);i.addEvents({mouseover:function(){this.node.setStyles(this.obj.css.documentItemListItemNode_over)}.bind({node:i,obj:this}),mouseout:function(){this.node.setStyles(this.obj.css.documentItemListItemNode)}.bind({node:i,obj:this}),click:function(){var t="ForumDocument"+this.da.id;if(this.obj.app.desktop.apps[t]){this.obj.app.desktop.apps[t].setCurrent()}else{this.obj.app.desktop.openApplication(null,"ForumDocument",{sectionId:this.da.sectionId,id:this.da.id,appId:t,isEdited:false,isNew:false,index:e})}}.bind({da:t,obj:this})})}.bind(this))}.bind(this),6)}},_getListData:function(t,e){if(!e)e=6;var i={sectionId:this.data.id};this.actions.listSubjectFilterPage(1,e,i,function(e){if(!e.data)e.data=[];if(t)t(e)}.bind(this))},removeCenterWork:function(t){return false},openSection:function(t){var e="ForumSection"+this.data.id;if(this.app.desktop.apps[e]){this.app.desktop.apps[e].setCurrent()}else{this.app.desktop.openApplication(t,"ForumSection",{sectionId:this.data.id,appId:e})}}});var getDateDiff=function(t){var e=Date.parse(t.replace(/-/gi,"/"));var i=1e3*60;var s=i*60;var n=s*24;var o=n*15;var a=n*30;var c=a*12;var d=(new Date).getTime();var r=d-e;if(r<0){}var l=(new Date).decrement("day",1);var p=(new Date).decrement("day",2);var h=r/c;var u=r/a;var m=r/(7*n);var f=r/n;var v=r/s;var N=r/i;if(l.getFullYear()==e.getFullYear()&&l.getMonth()==e.getMonth()&&l.getDate()==e.getDate()){result="昨天 "+e.getHours()+":"+e.getMinutes()}else if(p.getFullYear()==e.getFullYear()&&p.getMonth()==e.getMonth()&&p.getDate()==e.getDate()){result="前天 "+e.getHours()+":"+e.getMinutes()}else if(h>1){result=e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"}else if(u>=1){result=e.getMonth()+1+"月"+e.getDate()+"日"}else if(m>=1){result=parseInt(m)+"周前"}else if(f>=1){result=parseInt(f)+"天前"}else if(v>=1){result=parseInt(v)+"小时前"}else if(N>=1){result=parseInt(N)+"分钟前"}else result="刚刚发表";return result};