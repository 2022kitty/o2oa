MWF.xDesktop.requireApp("process.FormDesigner","Property",null,false);if(!MWF.CMSProperty_Process){MWF.CMSProperty_Process={getViewList:MWF.xApplication.process.FormDesigner.Property.prototype.getViewList.$origin,loadScriptEditor:MWF.xApplication.process.FormDesigner.Property.prototype.loadScriptEditor.$origin,loadActionArea:MWF.xApplication.process.FormDesigner.Property.prototype.loadActionArea.$origin,loadEventsEditor:MWF.xApplication.process.FormDesigner.Property.prototype.loadEventsEditor.$origin,loadValidation:MWF.xApplication.process.FormDesigner.Property.prototype.loadValidation.$origin,loadFormFieldInput:MWF.xApplication.process.FormDesigner.Property.prototype.loadFormFieldInput.$origin,loadPersonInput:MWF.xApplication.process.FormDesigner.Property.prototype.loadPersonInput.$origin};MWF.xApplication.process.FormDesigner.Property.implement({loadFormFieldInput:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadFormFieldInput_CMS()}else{this.loadFormFieldInput_Process()}},loadFormFieldInput_Process:MWF.CMSProperty_Process.loadFormFieldInput,loadFormFieldInput_CMS:function(){var e=this.propertyContent.getElements(".MWFFormFieldPerson");MWF.xDesktop.requireApp("cms.QueryViewDesigner","widget.PersonSelector",function(){e.each(function(e){new MWF.xApplication.cms.QueryViewDesigner.widget.PersonSelector(e,this.form.designer,{type:"formField",form:this.form.json.id,fieldType:"person",names:this.data[e.get("name")],onChange:function(t){this.savePersonItem(e,t)}.bind(this)})}.bind(this))}.bind(this))},getViewList:function(e,t){var i=this.designer.options.name.toLowerCase().contains("cms");if(i){this.getViewList_CMS(e,t)}else{this.getViewList_Process(e,t)}},getViewList_Process:MWF.CMSProperty_Process.getViewList,getViewList_CMS:function(e,t){if(!this.views||t){this.form.designer.actions.listQueryView(this.form.designer.application.id,function(t){this.views=t.data;if(e)e()}.bind(this))}else{if(e)e()}},loadScriptEditor:function(e,t){var i=this.designer.options.name.toLowerCase().contains("cms");if(i){this.loadScriptEditor_CMS(e,t)}else{this.loadScriptEditor_Process(e,t)}},loadScriptEditor_Process:MWF.CMSProperty_Process.loadScriptEditor,loadScriptEditor_CMS:function(e,t){e.each(function(e){var i=e.get("title");var o=e.get("name");var n=this.data[o];MWF.require("MWF.widget.ScriptArea",function(){var s=new MWF.widget.ScriptArea(e,{title:i,maxObj:this.designer.formContentNode,onChange:function(){this.data[o]=s.toJson()}.bind(this),onSave:function(){this.designer.saveForm()}.bind(this),style:t||"default",helpStyle:"cms"});s.load(n)}.bind(this))}.bind(this))},loadActionArea:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadActionArea_CMS()}else{this.loadActionArea_Process()}},loadActionArea_Process:MWF.CMSProperty_Process.loadActionArea,loadActionArea_CMS:function(){var e=this.propertyContent.getElements(".MWFActionArea");e.each(function(e){var t=e.get("name");var i=this.data[t];MWF.xDesktop.requireApp("cms.FormDesigner","widget.ActionsEditor",function(){var o=new MWF.xApplication.cms.FormDesigner.widget.ActionsEditor(e,this.designer,{maxObj:this.propertyNode.parentElement.parentElement.parentElement,onChange:function(){this.data[t]=o.data}.bind(this)});o.load(i)}.bind(this))}.bind(this))},loadEventsEditor:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadEventsEditor_CMS()}else{this.loadEventsEditor_Process()}},loadEventsEditor_Process:MWF.CMSProperty_Process.loadEventsEditor,loadEventsEditor_CMS:function(){var e=this.propertyContent.getElement(".MWFEventsArea");if(e){var t=e.get("name");var i=this.data[t];MWF.xDesktop.requireApp("cms.FormDesigner","widget.EventsEditor",function(){var t=new MWF.xApplication.cms.FormDesigner.widget.EventsEditor(e,this.designer,{maxObj:this.designer.formContentNode});t.load(i)}.bind(this))}},loadValidation:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadValidation_CMS()}else{this.loadValidation_Process()}},loadValidation_Process:MWF.CMSProperty_Process.loadValidation,loadValidation_CMS:function(){MWF.xDesktop.requireApp("cms.FormDesigner","widget.ValidationEditor",null,false);var e=this.propertyContent.getElements(".MWFValidation");if(e.length){e.each(function(e){var t=e.get("name");var i=new MWF.xApplication.cms.FormDesigner.widget.ValidationEditor(e,this.designer,{onChange:function(){var e=i.getValidationData();this.data[t]=e}.bind(this)});i.load(this.data[t])}.bind(this))}},loadPersonInput:function(){var e=this.designer.options.name.toLowerCase().contains("cms");if(e){this.loadPersonInput_CMS()}else{this.loadPersonInput_Process()}},loadPersonInput_Process:MWF.CMSProperty_Process.loadPersonInput,loadPersonInput_CMS:function(){var e=this.propertyContent.getElements(".MWFPersonName");var t=this.propertyContent.getElements(".MWFPersonIdentity");var i=this.propertyContent.getElements(".MWFPersonDepartment");var o=this.propertyContent.getElements(".MWFPersonCompany");var n=this.propertyContent.getElements(".MWFDutySelector");MWF.xDesktop.requireApp("process.ProcessDesigner","widget.PersonSelector",function(){e.each(function(e){new MWF.xApplication.process.ProcessDesigner.widget.PersonSelector(e,this.form.designer,{type:"person",names:this.data[e.get("name")],onChange:function(t){this.savePersonItem(e,t)}.bind(this)})}.bind(this));t.each(function(e){new MWF.xApplication.process.ProcessDesigner.widget.PersonSelector(e,this.form.designer,{type:"identity",names:this.data[e.get("name")],onChange:function(t){this.savePersonItem(e,t)}.bind(this)})}.bind(this));i.each(function(e){new MWF.xApplication.process.ProcessDesigner.widget.PersonSelector(e,this.form.designer,{type:"department",names:this.data[e.get("name")],onChange:function(t){this.savePersonItem(e,t)}.bind(this)})}.bind(this));o.each(function(e){new MWF.xApplication.process.ProcessDesigner.widget.PersonSelector(e,this.form.designer,{type:"company",names:this.data[e.get("name")],onChange:function(t){this.savePersonItem(e,t)}.bind(this)})}.bind(this));n.each(function(e){new MWF.xApplication.process.ProcessDesigner.widget.PersonSelector(e,this.form.designer,{type:"duty",names:this.data[e.get("name")],onChange:function(t){this.addDutyItem(e,t)}.bind(this),onRemoveDuty:function(t){this.removeDutyItem(e,t)}.bind(this)})}.bind(this))}.bind(this))}})}MWF.xApplication.cms.FormDesigner.ModuleImplements=MWF.CMSFCMI=new Class({});