MWF.xApplication.cms.FormDesigner.Module=MWF.xApplication.cms.FormDesigner.Module||{};MWF.xDesktop.requireApp("cms.FormDesigner","Module.$Element",null,false);MWF.xApplication.cms.FormDesigner.Module.Tree=MWF.CMSFCTree=new Class({Extends:MWF.CMSFC$Element,Implements:[Options,Events],options:{style:"default",propertyPath:"/x_component_cms_FormDesigner/Module/Tree/tree.html"},initialize:function(e,t){this.setOptions(t);this.path="/x_component_cms_FormDesigner/Module/Tree/";this.cssPath="/x_component_cms_FormDesigner/Module/Tree/"+this.options.style+"/css.wcss";this._loadCss();this.moduleType="element";this.moduleName="tree";this.form=e;this.container=null;this.containerNode=null},_createMoveNode:function(){this.moveNode=new Element("div",{MWFType:"tree",id:this.json.id,styles:this.css.moduleNodeMove,events:{selectstart:function(){return false}}}).inject(this.form.container)},_initModule:function(){this._setNodeProperty();this._createIconAction();this._setNodeEvent();this._refreshTree()},_setEditStyle_custom:function(e){if(e=="areaNodeStyle"){this.tree.node.setStyles(this.json.areaNodeStyle)}if(e=="treeItemNodeStyle"||e=="textDivNodeStyle"||e=="textDivNodeSelectedStyle"){this._setTreeWidgetStyles();this._refreshTree()}if(e=="dataType")this._refreshTree()},_setTreeStyles:function(){this.json.areaNodeStyle=this.tree.css.areaNode;this.json.treeItemNodeStyle=this.tree.css.treeItemNode;this.json.textDivNodeStyle=this.tree.css.textDivNode;this.json.textDivNodeSelectedStyle=this.tree.css.textDivNodeSelected},_setTreeWidgetStyles:function(){this.tree.css.areaNode=this.json.areaNodeStyle;this.tree.css.treeItemNode=this.json.treeItemNodeStyle;this.tree.css.textDivNode=this.json.textDivNodeStyle;this.tree.css.textDivNodeSelected=this.json.textDivNodeSelectedStyle},_refreshTree:function(){var e=this.json.data;if(this.json.dataType=="script"){e=[{title:"[script]",text:"[script]",id:"1",icon:"none",action:"",expand:true,sub:[]}]}if(!this.tree){this.node.empty();this.tree=new MWF.widget.Tree(this.node,{style:"form"});this.tree.load(e);this._setTreeStyles()}else{this.tree.reLoad(e)}}});