MWF.xDesktop.requireApp("Setting","servers.DataServers",null,false);MWF.xApplication.Setting.resource=MWF.xApplication.Setting.resource||{};MWF.xApplication.Setting.resource.Worktime=new Class({Extends:MWF.xApplication.Setting.servers.DataServer.Document,Implements:[Events],initialize:function(t){this.explorer=t;this.app=this.explorer.app;this.container=this.explorer.worktimeContent;this.css=this.explorer.app.css;this.load()},load:function(){this.app.actions.getResWorktime(function(t){this.json=t.data;this.node=new Element("div",{styles:this.css.centerServerDocumentNode}).inject(this.container);this.createForm()}.bind(this))},createActions:function(){this.actionNode=new Element("div",{styles:this.css.applicationServerDocumentActionNode}).inject(this.node);this.saveAction=new Element("div",{styles:this.css.applicationServerDocumentSaveNode}).inject(this.actionNode);this.saveAction.addEvents({mouseover:function(){this.saveAction.setStyles(this.css.applicationServerDocumentSaveNode_over)}.bind(this),mouseout:function(){this.saveAction.setStyles(this.css.applicationServerDocumentSaveNode)}.bind(this),mousedown:function(){this.saveAction.setStyles(this.css.applicationServerDocumentSaveNode_down)}.bind(this),mouseup:function(){this.saveAction.setStyles(this.css.applicationServerDocumentSaveNode_over)}.bind(this),click:function(t){this.saveDocument()}.bind(this)})},createBaseInfo:function(){this.inforAreaNode=new Element("div",{styles:this.css.applicationServerDocumentInforAreaNode}).inject(this.node);this.inforNode=new Element("div",{styles:this.css.dataServerDocumentInforNode}).inject(this.inforAreaNode);var t="<table cellSpacing='8px' width='90%' align='center'>"+"<tr><td width='120px'>amStart</td><td><input value='"+(this.json.amStart||"")+"'/></td></tr>"+"<tr><td>amEnd</td><td><input value='"+(this.json.amEnd||"")+"'/></td></tr>"+"<tr><td>pmStart</td><td><input value='"+(this.json.pmStart||"")+"'/></td></tr>"+"<tr><td>pmEnd</td><td><input value='"+(this.json.pmEnd||"")+"'/></td></tr>"+"<tr><td>weekends</td><td><textarea>"+this.json.weekends.join(", ")+"</textarea></td></tr>"+"<tr><td>holidays</td><td><textarea>"+this.json.holidays.join(", ")+"</textarea></td></tr>"+"<tr><td>workdays</td><td><textarea>"+this.json.workdays.join(", ")+"</textarea></td></tr>"+"</table>";this.inforNode.set("html",t);var e=this.inforNode.getElements("td");var s=this.inforNode.getElements("input");var i=this.inforNode.getElements("textarea");e.setStyles(this.css.applicationServerDocumentTdNode);s.setStyles(this.css.applicationServerDocumentInputNode);i.setStyles(this.css.applicationServerDocumentTextareasNode)},saveDocument:function(){var t=this.inforNode.getElements("input");var e=this.inforNode.getElements("textarea");this.json.amStart=t[0].get("value");this.json.amEnd=t[1].get("value");this.json.pmStart=t[2].get("value");this.json.pmEnd=t[3].get("value");this.json.weekends=e[0].get("value").split(/,\s*/g);this.json.holidays=e[1].get("value").split(/,\s*/g);this.json.workdays=e[2].get("value").split(/,\s*/g);this.app.actions.updateResWorktime(this.json,function(){this.app.notice(this.app.lp.centerSaveInfor,"success")}.bind(this))},destroy:function(){if(this.node)this.node.destroy();MWF.release(this)}});