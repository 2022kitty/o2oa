(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("kotlin",function(e,t){function n(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=true;return t}var r=t.multiLineStrings;var i=n("package continue return object while break class data trait throw super"+" when type this else This try val var fun for is in if do as true false null get set");var o=n("import"+" where by get set abstract enum open annotation override private public internal"+" protected catch out vararg inline finally final ref");var a=n("catch class do else finally for if where try while enum");var u=n("null true false this");var l;function f(e,t){var n=e.next();if(n=='"'||n=="'"){return s(n,e,t)}if(n=="."&&e.eat("*")){return"word"}if(/[\[\]{}\(\),;\:\.]/.test(n)){l=n;return null}if(/\d/.test(n)){if(e.eat(/eE/)){e.eat(/\+\-/);e.eatWhile(/\d/)}return"number"}if(n=="/"){if(e.eat("*")){t.tokenize.push(d);return d(e,t)}if(e.eat("/")){e.skipToEnd();return"comment"}if(m(t.lastToken)){return s(n,e,t)}}if(n=="-"&&e.eat(">")){l="->";return null}if(/[\-+*&%=<>!?|\/~]/.test(n)){e.eatWhile(/[\-+*&%=<>|~]/);return"operator"}e.eatWhile(/[\w\$_]/);var r=e.current();if(u.propertyIsEnumerable(r)){return"atom"}if(o.propertyIsEnumerable(r)){if(a.propertyIsEnumerable(r))l="newstatement";return"softKeyword"}if(i.propertyIsEnumerable(r)){if(a.propertyIsEnumerable(r))l="newstatement";return"keyword"}return"word"}f.isBase=true;function s(e,t,n){var i=false;if(e!="/"&&t.eat(e)){if(t.eat(e))i=true;else return"string"}function o(t,n){var a=false,u,l=!i;while((u=t.next())!=null){if(u==e&&!a){if(!i){break}if(t.match(e+e)){l=true;break}}if(e=='"'&&u=="$"&&!a&&t.eat("{")){n.tokenize.push(p());return"string"}if(u=="$"&&!a&&!t.eat(" ")){n.tokenize.push(c());return"string"}a=!a&&u=="\\"}if(r)n.tokenize.push(o);if(l)n.tokenize.pop();return"string"}n.tokenize.push(o);return o(t,n)}function p(){var e=1;function t(t,n){if(t.peek()=="}"){e--;if(e==0){n.tokenize.pop();return n.tokenize[n.tokenize.length-1](t,n)}}else if(t.peek()=="{"){e++}return f(t,n)}t.isBase=true;return t}function c(){function e(e,t){if(e.eat(/[\w]/)){var n=e.eatWhile(/[\w]/);if(n){t.tokenize.pop();return"word"}}t.tokenize.pop();return"string"}e.isBase=true;return e}function d(e,t){var n=false,r;while(r=e.next()){if(r=="/"&&n){t.tokenize.pop();break}n=r=="*"}return"comment"}function m(e){return!e||e=="operator"||e=="->"||/[\.\[\{\(,;:]/.test(e)||e=="newstatement"||e=="keyword"||e=="proplabel"}function h(e,t,n,r,i){this.indented=e;this.column=t;this.type=n;this.align=r;this.prev=i}function k(e,t,n){return e.context=new h(e.indented,t,n,null,e.context)}function y(e){var t=e.context.type;if(t==")"||t=="]"||t=="}")e.indented=e.context.indented;return e.context=e.context.prev}return{startState:function(t){return{tokenize:[f],context:new h((t||0)-e.indentUnit,0,"top",false),indented:0,startOfLine:true,lastToken:null}},token:function(e,t){var n=t.context;if(e.sol()){if(n.align==null)n.align=false;t.indented=e.indentation();t.startOfLine=true;if(n.type=="statement"&&!m(t.lastToken)){y(t);n=t.context}}if(e.eatSpace())return null;l=null;var r=t.tokenize[t.tokenize.length-1](e,t);if(r=="comment")return r;if(n.align==null)n.align=true;if((l==";"||l==":")&&n.type=="statement")y(t);else if(l=="->"&&n.type=="statement"&&n.prev.type=="}"){y(t);t.context.align=false}else if(l=="{")k(t,e.column(),"}");else if(l=="[")k(t,e.column(),"]");else if(l=="(")k(t,e.column(),")");else if(l=="}"){while(n.type=="statement")n=y(t);if(n.type=="}")n=y(t);while(n.type=="statement")n=y(t)}else if(l==n.type)y(t);else if(n.type=="}"||n.type=="top"||n.type=="statement"&&l=="newstatement")k(t,e.column(),"statement");t.startOfLine=false;t.lastToken=l||r;return r},indent:function(t,n){if(!t.tokenize[t.tokenize.length-1].isBase)return 0;var r=n&&n.charAt(0),i=t.context;if(i.type=="statement"&&!m(t.lastToken))i=i.prev;var o=r==i.type;if(i.type=="statement"){return i.indented+(r=="{"?0:e.indentUnit)}else if(i.align)return i.column+(o?0:1);else return i.indented+(o?0:e.indentUnit)},electricChars:"{}"}});e.defineMIME("text/x-kotlin","kotlin")});