(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("rust",function(){var e=4,r=2;var t={if:"if-style",while:"if-style",loop:"else-style",else:"else-style",do:"else-style",ret:"else-style",fail:"else-style",break:"atom",cont:"atom",const:"let",resource:"fn",let:"let",fn:"fn",for:"for",alt:"alt",iface:"iface",impl:"impl",type:"type",enum:"enum",mod:"mod",as:"op",true:"atom",false:"atom",assert:"op",check:"op",claim:"op",native:"ignore",unsafe:"ignore",import:"else-style",export:"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom",struct:"enum"};var n=function(){var e={fn:"fn",block:"fn",obj:"obj"};var r="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" ");for(var t=0,n=r.length;t<n;++t)e[r[t]]="atom";return e}();var i=/[+\-*&%=<>!?|\.@]/;var u,f;function a(e,r){u=e;return r}function o(e,r){var t=e.next();if(t=='"'){r.tokenize=l;return r.tokenize(e,r)}if(t=="'"){u="atom";if(e.eat("\\")){if(e.skipTo("'")){e.next();return"string"}else{return"error"}}else{e.next();return e.eat("'")?"string":"error"}}if(t=="/"){if(e.eat("/")){e.skipToEnd();return"comment"}if(e.eat("*")){r.tokenize=c(1);return r.tokenize(e,r)}}if(t=="#"){if(e.eat("[")){u="open-attr";return null}e.eatWhile(/\w/);return a("macro","meta")}if(t==":"&&e.match(":<")){return a("op",null)}if(t.match(/\d/)||t=="."&&e.eat(/\d/)){var n=false;if(!e.match(/^x[\da-f]+/i)&&!e.match(/^b[01]+/)){e.eatWhile(/\d/);if(e.eat(".")){n=true;e.eatWhile(/\d/)}if(e.match(/^e[+\-]?\d+/i)){n=true}}if(n)e.match(/^f(?:32|64)/);else e.match(/^[ui](?:8|16|32|64)/);return a("atom","number")}if(t.match(/[()\[\]{}:;,]/))return a(t,null);if(t=="-"&&e.eat(">"))return a("->",null);if(t.match(i)){e.eatWhile(i);return a("op",null)}e.eatWhile(/\w/);f=e.current();if(e.match(/^::\w/)){e.backUp(1);return a("prefix","variable-2")}if(r.keywords.propertyIsEnumerable(f))return a(r.keywords[f],f.match(/true|false/)?"atom":"keyword");return a("name","variable")}function l(e,r){var t,n=false;while(t=e.next()){if(t=='"'&&!n){r.tokenize=o;return a("atom","string")}n=!n&&t=="\\"}return a("op","string")}function c(e){return function(r,t){var n=null,i;while(i=r.next()){if(i=="/"&&n=="*"){if(e==1){t.tokenize=o;break}else{t.tokenize=c(e-1);return t.tokenize(r,t)}}if(i=="*"&&n=="/"){t.tokenize=c(e+1);return t.tokenize(r,t)}n=i}return"comment"}}var m={state:null,stream:null,marked:null,cc:null};function d(){for(var e=arguments.length-1;e>=0;e--)m.cc.push(arguments[e])}function s(){d.apply(null,arguments);return true}function k(e,r){var t=function(){var t=m.state;t.lexical={indented:t.indented,column:m.stream.column(),type:e,prev:t.lexical,info:r}};t.lex=true;return t}function p(){var e=m.state;if(e.lexical.prev){if(e.lexical.type==")")e.indented=e.lexical.indented;e.lexical=e.lexical.prev}}function h(){m.state.keywords=n}function y(){m.state.keywords=t}p.lex=h.lex=y.lex=true;function v(e,r){function t(n){if(n==",")return s(e,t);if(n==r)return s();return s(t)}return function(n){if(n==r)return s();return d(e,t)}}function x(e,r){return s(k("stat",r),e,p,b)}function b(e){if(e=="}")return s();if(e=="let")return x(M,"let");if(e=="fn")return x(O);if(e=="type")return s(k("stat"),P,w,p,b);if(e=="enum")return x(T);if(e=="mod")return x(A);if(e=="iface")return x(U);if(e=="impl")return x(_);if(e=="open-attr")return s(k("]"),v(g,"]"),p);if(e=="ignore"||e.match(/[\]\);,]/))return s(b);return d(k("stat"),g,p,w,b)}function w(e){if(e==";")return s();return d()}function g(e){if(e=="atom"||e=="name")return s(z);if(e=="{")return s(k("}"),C,p);if(e.match(/[\[\(]/))return V(e,g);if(e.match(/[\]\)\};,]/))return d();if(e=="if-style")return s(g,g);if(e=="else-style"||e=="op")return s(g);if(e=="for")return s(J,S,I,g,g);if(e=="alt")return s(g,L);if(e=="fn")return s(O);if(e=="macro")return s(R);return s()}function z(e){if(f==".")return s(j);if(f=="::<"){return s(B,z)}if(e=="op"||f==":")return s(g);if(e=="("||e=="[")return V(e,g);return d()}function j(){if(f.match(/^\w+$/)){m.marked="variable";return s(z)}return d(g)}function C(e){if(e=="op"){if(f=="|")return s(E,p,k("}","block"),b);if(f=="||")return s(p,k("}","block"),b)}if(f=="mutable"||f.match(/^\w+$/)&&m.stream.peek()==":"&&!m.stream.match("::",false))return d(W(g));return d(b)}function W(e){function r(t){if(f=="mutable"||f=="with"){m.marked="keyword";return s(r)}if(f.match(/^\w*$/)){m.marked="variable";return s(r)}if(t==":")return s(e,r);if(t=="}")return s();return s(r)}return r}function E(e){if(e=="name"){m.marked="def";return s(E)}if(e=="op"&&f=="|")return s();return s(E)}function M(e){if(e.match(/[\]\)\};]/))return s();if(f=="=")return s(g,$);if(e==",")return s(M);return d(J,S,M)}function $(e){if(e.match(/[\]\)\};,]/))return d(M);else return d(g,$)}function S(e){if(e==":")return s(h,F,y);return d()}function I(e){if(e=="name"&&f=="in"){m.marked="keyword";return s()}return d()}function O(e){if(f=="@"||f=="~"){m.marked="keyword";return s(O)}if(e=="name"){m.marked="def";return s(O)}if(f=="<")return s(B,O);if(e=="{")return d(g);if(e=="(")return s(k(")"),v(D,")"),p,O);if(e=="->")return s(h,F,y,O);if(e==";")return s();return s(O)}function P(e){if(e=="name"){m.marked="def";return s(P)}if(f=="<")return s(B,P);if(f=="=")return s(h,F,y);return s(P)}function T(e){if(e=="name"){m.marked="def";return s(T)}if(f=="<")return s(B,T);if(f=="=")return s(h,F,y,w);if(e=="{")return s(k("}"),h,q,y,p);return s(T)}function q(e){if(e=="}")return s();if(e=="(")return s(k(")"),v(F,")"),p,q);if(f.match(/^\w+$/))m.marked="def";return s(q)}function A(e){if(e=="name"){m.marked="def";return s(A)}if(e=="{")return s(k("}"),b,p);return d()}function U(e){if(e=="name"){m.marked="def";return s(U)}if(f=="<")return s(B,U);if(e=="{")return s(k("}"),b,p);return d()}function _(e){if(f=="<")return s(B,_);if(f=="of"||f=="for"){m.marked="keyword";return s(F,_)}if(e=="name"){m.marked="def";return s(_)}if(e=="{")return s(k("}"),b,p);return d()}function B(){if(f==">")return s();if(f==",")return s(B);if(f==":")return s(F,B);return d(F,B)}function D(e){if(e=="name"){m.marked="def";return s(D)}if(e==":")return s(h,F,y);return d()}function F(e){if(e=="name"){m.marked="variable-3";return s(G)}if(f=="mutable"){m.marked="keyword";return s(F)}if(e=="atom")return s(G);if(e=="op"||e=="obj")return s(F);if(e=="fn")return s(H);if(e=="{")return s(k("{"),W(F),p);return V(e,F)}function G(){if(f=="<")return s(B);return d()}function H(e){if(e=="(")return s(k("("),v(F,")"),p,H);if(e=="->")return s(F);return d()}function J(e){if(e=="name"){m.marked="def";return s(K)}if(e=="atom")return s(K);if(e=="op")return s(J);if(e.match(/[\]\)\};,]/))return d();return V(e,J)}function K(e){if(e=="op"&&f==".")return s();if(f=="to"){m.marked="keyword";return s(J)}else return d()}function L(e){if(e=="{")return s(k("}","alt"),N,p);return d()}function N(e){if(e=="}")return s();if(e=="|")return s(N);if(f=="when"){m.marked="keyword";return s(g,Q)}if(e.match(/[\]\);,]/))return s(N);return d(J,Q)}function Q(e){if(e=="{")return s(k("}","alt"),b,p,N);else return d(N)}function R(e){if(e.match(/[\[\(\{]/))return V(e,g);return d()}function V(e,r){if(e=="[")return s(k("]"),v(r,"]"),p);if(e=="(")return s(k(")"),v(r,")"),p);if(e=="{")return s(k("}"),v(r,"}"),p);return s()}function X(e,r,t){var n=e.cc;m.state=e;m.stream=r;m.marked=null,m.cc=n;while(true){var i=n.length?n.pop():b;if(i(u)){while(n.length&&n[n.length-1].lex)n.pop()();return m.marked||t}}}return{startState:function(){return{tokenize:o,cc:[],lexical:{indented:-e,column:0,type:"top",align:false},keywords:t,indented:0}},token:function(e,r){if(e.sol()){if(!r.lexical.hasOwnProperty("align"))r.lexical.align=false;r.indented=e.indentation()}if(e.eatSpace())return null;u=f=null;var t=r.tokenize(e,r);if(t=="comment")return t;if(!r.lexical.hasOwnProperty("align"))r.lexical.align=true;if(u=="prefix")return t;if(!f)f=e.current();return X(r,e,t)},indent:function(t,n){if(t.tokenize!=o)return 0;var i=n&&n.charAt(0),u=t.lexical,f=u.type,a=i==f;if(f=="stat")return u.indented+e;if(u.align)return u.column+(a?0:1);return u.indented+(a?0:u.info=="alt"?r:e)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});e.defineMIME("text/x-rustsrc","rust")});