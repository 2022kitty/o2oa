KindEditor.plugin("quickformat",function(e){var t=this,i="quickformat",n=e.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");function o(e){var t=e.first();while(t&&t.first()){t=t.first()}return t}t.clickToolbar(i,function(){t.focus();var i=t.edit.doc,a=t.cmd.range,r=e(i.body).first(),c,f=[],m=[],h=a.createBookmark(true);while(r){c=r.next();var s=o(r);if(!s||s.name!="img"){if(n[r.name]){r.html(r.html().replace(/^(\s|&nbsp;|ã€€)+/gi,""));r.css("text-indent","2em")}else{m.push(r)}if(!c||(n[c.name]||n[r.name]&&!n[c.name])){if(m.length>0){f.push(m)}m=[]}}r=c}e.each(f,function(t,n){var o=e('<p style="text-indent:2em;"></p>',i);n[0].before(o);e.each(n,function(e,t){o.append(t)})});a.moveToBookmark(h);t.addBookmark()})});