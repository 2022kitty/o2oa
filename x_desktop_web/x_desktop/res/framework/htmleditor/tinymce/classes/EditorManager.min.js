define("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(e,t,i,n,r,o,s,c){var d=t.DOM;var u=r.explode,a=r.each,f=r.extend;var l=0,m,v;function g(e){var t=v.editors,i;delete t[e.id];for(var n=0;n<t.length;n++){if(t[n]==e){t.splice(n,1);i=true;break}}if(v.activeEditor==e){v.activeEditor=t[0]}if(v.focusedEditor==e){v.focusedEditor=null}return i}function h(e){if(e&&!(e.getContainer()||e.getBody()).parentNode){g(e);e.destroy(true);e=null}return e}v={majorVersion:"@@majorVersion@@",minorVersion:"@@minorVersion@@",releaseDate:"@@releaseDate@@",editors:[],i18n:s,activeEditor:null,setup:function(){var e=this,t,n,r="",o,s;n=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(n)){n+="/"}o=window.tinymce||window.tinyMCEPreInit;if(o){t=o.base||o.baseURL;r=o.suffix}else{var d=document.getElementsByTagName("script");for(var u=0;u<d.length;u++){s=d[u].src;if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){if(s.indexOf(".min")!=-1){r=".min"}t=s.substring(0,s.lastIndexOf("/"));break}}if(!t&&document.currentScript){s=document.currentScript.src;if(s.indexOf(".min")!=-1){r=".min"}t=s.substring(0,s.lastIndexOf("/"))}}e.baseURL=new i(n).toAbsolute(t);e.documentBaseURL=n;e.baseURI=new i(e.baseURL);e.suffix=r;e.focusManager=new c(e)},init:function(t){var i=this,n=[],r;function o(e){var t=e.id;if(!t){t=e.name;if(t&&!d.get(t)){t=e.name}else{t=d.uniqueId()}e.setAttribute("id",t)}return t}function s(t,r){if(!h(i.get(t))){var o=new e(t,r,i);n.push(o);o.render()}}function c(e,t,i){var n=e[t];if(!n){return}return n.apply(i||this,Array.prototype.slice.call(arguments,2))}function m(e,t){return t.constructor===RegExp?t.test(e.className):d.hasClass(e,t)}function v(){var g,h;d.unbind(window,"ready",v);c(t,"onpageload");if(t.types){a(t.types,function(e){a(d.select(e.selector),function(i){s(o(i),f({},t,e))})});return}else if(t.selector){a(d.select(t.selector),function(e){s(o(e),t)});return}switch(t.mode){case"exact":g=t.elements||"";if(g.length>0){a(u(g),function(o){if(d.get(o)){r=new e(o,t,i);n.push(r);r.render()}else{a(document.forms,function(e){a(e.elements,function(e){if(e.name===o){o="mce_editor_"+l++;d.setAttrib(e,"id",o);s(o,t)}})})}})}break;case"textareas":case"specific_textareas":a(d.select("textarea"),function(e){if(t.editor_deselector&&m(e,t.editor_deselector)){return}if(!t.editor_selector||m(e,t.editor_selector)){s(o(e),t)}});break}if(t.oninit){g=h=0;a(n,function(e){h++;if(!e.initialized){e.on("init",function(){g++;if(g==h){c(t,"oninit")}})}else{g++}if(g==h){c(t,"oninit")}})}}i.settings=t;d.bind(window,"ready",v)},get:function(e){if(!arguments.length){return this.editors}return e in this.editors?this.editors[e]:null},add:function(e){var t=this,i=t.editors;i[e.id]=e;i.push(e);t.activeEditor=e;t.fire("AddEditor",{editor:e});if(!m){m=function(){t.fire("BeforeUnload")};d.bind(window,"beforeunload",m)}return e},createEditor:function(t,i){return this.add(new e(t,i,this))},remove:function(e){var t=this,i,n=t.editors,r;if(!e){for(i=n.length-1;i>=0;i--){t.remove(n[i])}return}if(typeof e=="string"){e=e.selector||e;a(d.select(e),function(e){t.remove(n[e.id])});return}r=e;if(!n[r.id]){return null}if(g(r)){t.fire("RemoveEditor",{editor:r})}if(!n.length){d.unbind(window,"beforeunload",m)}r.remove();return r},execCommand:function(t,i,n){var r=this,o=r.get(n);switch(t){case"mceAddEditor":if(!r.get(n)){new e(n,r.settings,r).render()}return true;case"mceRemoveEditor":if(o){o.remove()}return true;case"mceToggleEditor":if(!o){r.execCommand("mceAddEditor",0,n);return true}if(o.isHidden()){o.show()}else{o.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(t,i,n)}return false},triggerSave:function(){a(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)}};f(v,o);v.setup();window.tinymce=window.tinyMCE=v;return v});