define("tinymce/fmt/Preview",["tinymce/util/Tools"],function(t){var e=t.each;function r(t,r){var o,i,n=t.dom;var s="",f,a;a=t.settings.preview_styles;if(a===false){return""}if(!a){a="font-family font-size font-weight font-style text-decoration "+"text-transform color background-color border border-radius outline text-shadow"}function l(t){return t.replace(/%(\w+)/g,"")}if(typeof r=="string"){r=t.formatter.get(r);if(!r){return}r=r[0]}o=r.block||r.inline||"span";i=n.create(o);e(r.styles,function(t,e){t=l(t);if(t){n.setStyle(i,e,t)}});e(r.attributes,function(t,e){t=l(t);if(t){n.setAttrib(i,e,t)}});e(r.classes,function(t){t=l(t);if(!n.hasClass(i,t)){n.addClass(i,t)}});t.fire("PreviewFormats");n.setStyles(i,{position:"absolute",left:-65535});t.getBody().appendChild(i);f=n.getStyle(t.getBody(),"fontSize",true);f=/px$/.test(f)?parseInt(f,10):0;e(a.split(" "),function(e){var r=n.getStyle(i,e,true);if(e=="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(r)){r=n.getStyle(t.getBody(),e,true);if(n.toHex(r).toLowerCase()=="#ffffff"){return}}if(e=="color"){if(n.toHex(r).toLowerCase()=="#000000"){return}}if(e=="font-size"){if(/em|%$/.test(r)){if(f===0){return}r=parseFloat(r,10)/(/%$/.test(r)?100:1);r=r*f+"px"}}if(e=="border"&&r){s+="padding:0 2px;"}s+=e+":"+r+";"});t.fire("AfterPreviewFormats");n.remove(i);return s}return{getCssText:r}});