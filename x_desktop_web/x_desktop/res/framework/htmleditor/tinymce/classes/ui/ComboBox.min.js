define("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(e,n,t){"use strict";return e.extend({init:function(e){var n=this;n._super(e);n.addClass("combobox");n.subinput=true;n.ariaTarget="inp";e=n.settings;e.menu=e.menu||e.values;if(e.menu){e.icon="caret"}n.on("click",function(t){var i=t.target,a=n.getEl();while(i&&i!=a){if(i.id&&i.id.indexOf("-open")!=-1){n.fire("action");if(e.menu){n.showMenu();if(t.aria){n.menu.items()[0].focus()}}}i=i.parentNode}});n.on("keydown",function(e){if(e.target.nodeName=="INPUT"&&e.keyCode==13){n.parents().reverse().each(function(t){e.preventDefault();n.fire("change");if(t.hasEventListeners("submit")&&t.toJSON){t.fire("submit",{data:t.toJSON()});return false}})}});if(e.placeholder){n.addClass("placeholder");n.on("focusin",function(){if(!n._hasOnChange){t.on(n.getEl("inp"),"change",function(){n.fire("change")});n._hasOnChange=true}if(n.hasClass("placeholder")){n.getEl("inp").value="";n.removeClass("placeholder")}});n.on("focusout",function(){if(n.value().length===0){n.getEl("inp").value=e.placeholder;n.addClass("placeholder")}})}},showMenu:function(){var e=this,t=e.settings,i;if(!e.menu){i=t.menu||[];if(i.length){i={type:"menu",items:i}}else{i.type=i.type||"menu"}e.menu=n.create(i).parent(e).renderTo(e.getContainerElm());e.fire("createmenu");e.menu.reflow();e.menu.on("cancel",function(n){if(n.control===e.menu){e.focus()}});e.menu.on("show hide",function(n){n.control.items().each(function(n){n.active(n.value()==e.value())})}).fire("show");e.menu.on("select",function(n){e.value(n.control.value())});e.on("focusin",function(n){if(n.target.tagName.toUpperCase()=="INPUT"){e.menu.hide()}});e.aria("expanded",true)}e.menu.show();e.menu.layoutRect({w:e.layoutRect().w});e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var n=this;if(typeof e!="undefined"){n._value=e;n.removeClass("placeholder");if(n._rendered){n.getEl("inp").value=e}return n}if(n._rendered){e=n.getEl("inp").value;if(e!=n.settings.placeholder){return e}return""}return n._value},disabled:function(e){var n=this;if(n._rendered&&typeof e!="undefined"){n.getEl("inp").disabled=e}return n._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,n=e.getEl(),i=e.getEl("open"),a=e.layoutRect();var o,u;if(i){o=a.w-t.getSize(i).width-10}else{o=a.w-10}var s=document;if(s.all&&(!s.documentMode||s.documentMode<=8)){u=e.layoutRect().h-2+"px"}t.css(n.firstChild,{width:o,lineHeight:u});e._super();return e},postRender:function(){var e=this;t.on(this.getEl("inp"),"change",function(){e.fire("change")});return e._super()},remove:function(){t.off(this.getEl("inp"));this._super()},renderHtml:function(){var e=this,n=e._id,t=e.settings,i=e.classPrefix;var a=t.value||t.placeholder||"";var o,u,s="",r="";if("spellcheck"in t){r+=' spellcheck="'+t.spellcheck+'"'}if(t.maxLength){r+=' maxlength="'+t.maxLength+'"'}if(t.size){r+=' size="'+t.size+'"'}if(t.subtype){r+=' type="'+t.subtype+'"'}if(e.disabled()){r+=' disabled="disabled"'}o=t.icon;if(o&&o!="caret"){o=i+"ico "+i+"i-"+t.icon}u=e._text;if(o||u){s='<div id="'+n+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button">'+'<button id="'+n+'-action" type="button" hidefocus="1" tabindex="-1">'+(o!="caret"?'<i class="'+o+'"></i>':'<i class="'+i+'caret"></i>')+(u?(o?" ":"")+u:"")+"</button>"+"</div>";e.addClass("has-open")}return'<div id="'+n+'" class="'+e.classes()+'">'+'<input id="'+n+'-inp" class="'+i+"textbox "+i+'placeholder" value="'+a+'" hidefocus="1"'+r+" />"+s+"</div>"}})});