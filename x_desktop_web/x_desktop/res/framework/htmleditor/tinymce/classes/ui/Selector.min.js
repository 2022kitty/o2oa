define("tinymce/ui/Selector",["tinymce/util/Class"],function(e){"use strict";function t(e){var t=[],n=e.length,i;while(n--){i=e[n];if(!i.__checked){t.push(i);i.__checked=1}}n=t.length;while(n--){delete t[n].__checked}return t}var n=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i;var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,f;var u=e.extend({init:function(e){var t=this.match;function f(e){if(e){e=e.toLowerCase();return function(t){return e==="*"||t.type===e}}}function u(e){if(e){return function(t){return t._name===e}}}function s(e){if(e){e=e.split(".");return function(t){var n=e.length;while(n--){if(!t.hasClass(e[n])){return false}}return true}}}function c(e,t,n){if(e){return function(i){var r=i[e]?i[e]():"";return!t?!!n:t==="="?r===n:t==="*="?r.indexOf(n)>=0:t==="~="?(" "+r+" ").indexOf(" "+n+" ")>=0:t==="!="?r!=n:t==="^="?r.indexOf(n)===0:t==="$="?r.substr(r.length-n.length)===n:false}}}function l(e){var n;if(e){e=/(?:not\((.+)\))|(.+)/i.exec(e);if(!e[1]){e=e[2];return function(t,n,i){return e==="first"?n===0:e==="last"?n===i-1:e==="even"?n%2===0:e==="odd"?n%2===1:t[e]?t[e]():false}}else{n=h(e[1],[]);return function(e){return!t(e,n)}}}}function o(e,t,i){var o;function h(e){if(e){t.push(e)}}o=n.exec(e.replace(r,""));h(f(o[1]));h(u(o[2]));h(s(o[3]));h(c(o[4],o[5],o[6]));h(l(o[7]));t.psuedo=!!o[7];t.direct=i;return t}function h(e,t){var n=[],r,f,u;do{i.exec("");f=i.exec(e);if(f){e=f[3];n.push(f[1]);if(f[2]){r=f[3];break}}}while(f);if(r){h(r,t)}e=[];for(u=0;u<n.length;u++){if(n[u]!=">"){e.push(o(n[u],[],n[u-1]===">"))}}t.push(e);return t}this._selectors=h(e,[])},match:function(e,t){var n,i,r,f,u,s,c,l,o,h,a,d,g;t=t||this._selectors;for(n=0,i=t.length;n<i;n++){u=t[n];f=u.length;g=e;d=0;for(r=f-1;r>=0;r--){l=u[r];while(g){if(l.psuedo){a=g.parent().items();o=h=a.length;while(o--){if(a[o]===g){break}}}for(s=0,c=l.length;s<c;s++){if(!l[s](g,o,h)){s=c+1;break}}if(s===c){d++;break}else{if(r===f-1){break}}g=g.parent()}}if(d===f){return true}}return false},find:function(e){var n=[],i,r,s=this._selectors;function c(e,t,i){var r,f,u,s,l,o=t[i];for(r=0,f=e.length;r<f;r++){l=e[r];for(u=0,s=o.length;u<s;u++){if(!o[u](l,r,f)){u=s+1;break}}if(u===s){if(i==t.length-1){n.push(l)}else{if(l.items){c(l.items(),t,i+1)}}}else if(o.direct){return}if(l.items){c(l.items(),t,i)}}}if(e.items){for(i=0,r=s.length;i<r;i++){c(e.items(),s[i],0)}if(r>1){n=t(n)}}if(!f){f=u.Collection}return new f(n)}});return u});