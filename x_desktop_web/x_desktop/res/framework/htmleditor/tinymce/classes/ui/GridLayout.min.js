define("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(t){"use strict";return t.extend({recalc:function(t){var i=t.settings,n,e,a,l,r,o,c,s,f,m,h,u,g,H,W,y,p,d,M,x,R,b,v=[],w=[],V,k,_,z;i=t.settings;a=t.items().filter(":visible");l=t.layoutRect();e=i.columns||Math.ceil(Math.sqrt(a.length));n=Math.ceil(a.length/e);p=i.spacingH||i.spacing||0;d=i.spacingV||i.spacing||0;M=i.alignH||i.align;x=i.alignV||i.align;W=t._paddingBox;if(M&&typeof M=="string"){M=[M]}if(x&&typeof x=="string"){x=[x]}for(m=0;m<e;m++){v.push(0)}for(h=0;h<n;h++){w.push(0)}for(h=0;h<n;h++){for(m=0;m<e;m++){f=a[h*e+m];if(!f){break}s=f.layoutRect();V=s.minW;k=s.minH;v[m]=V>v[m]?V:v[m];w[h]=k>w[h]?k:w[h]}}_=l.innerW-W.left-W.right;for(R=0,m=0;m<e;m++){R+=v[m]+(m>0?p:0);_-=(m>0?p:0)+v[m]}z=l.innerH-W.top-W.bottom;for(b=0,h=0;h<n;h++){b+=w[h]+(h>0?d:0);z-=(h>0?d:0)+w[h]}R+=W.left+W.right;b+=W.top+W.bottom;c={};c.minW=R+(l.w-l.innerW);c.minH=b+(l.h-l.innerH);c.contentW=c.minW-l.deltaW;c.contentH=c.minH-l.deltaH;c.minW=Math.min(c.minW,l.maxW);c.minH=Math.min(c.minH,l.maxH);c.minW=Math.max(c.minW,l.startMinWidth);c.minH=Math.max(c.minH,l.startMinHeight);if(l.autoResize&&(c.minW!=l.minW||c.minH!=l.minH)){c.w=c.minW;c.h=c.minH;t.layoutRect(c);this.recalc(t);if(t._lastRect===null){var L=t.parent();if(L){L._lastRect=null;L.recalc()}}return}if(l.autoResize){c=t.layoutRect(c);c.contentW=c.minW-l.deltaW;c.contentH=c.minH-l.deltaH}var q;if(i.packV=="start"){q=0}else{q=z>0?Math.floor(z/n):0}var A=0;var B=i.flexWidths;if(B){for(m=0;m<B.length;m++){A+=B[m]}}else{A=e}var G=_/A;for(m=0;m<e;m++){v[m]+=B?B[m]*G:G}g=W.top;for(h=0;h<n;h++){u=W.left;o=w[h]+q;for(m=0;m<e;m++){f=a[h*e+m];if(!f){break}H=f.settings;s=f.layoutRect();r=Math.max(v[m],s.startMinWidth);s.x=u;s.y=g;y=H.alignH||(M?M[m]||M[0]:null);if(y=="center"){s.x=u+r/2-s.w/2}else if(y=="right"){s.x=u+r-s.w}else if(y=="stretch"){s.w=r}y=H.alignV||(x?x[m]||x[0]:null);if(y=="center"){s.y=g+o/2-s.h/2}else if(y=="bottom"){s.y=g+o-s.h}else if(y=="stretch"){s.h=o}f.layoutRect(s);u+=r+p;if(f.recalc){f.recalc()}}g+=o+d}}})});