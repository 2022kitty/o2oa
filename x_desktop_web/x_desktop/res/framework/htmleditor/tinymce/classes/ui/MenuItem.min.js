define("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],function(e,t,i){"use strict";return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=true;t._super(e);e=t.settings;t.addClass("menu-item");if(e.menu){t.addClass("menu-item-expand")}if(e.preview){t.addClass("menu-item-preview")}if(t._text==="-"||t._text==="|"){t.addClass("menu-item-sep");t.aria("role","separator");t._text="-"}if(e.selectable){t.aria("role","menuitemcheckbox");t.addClass("menu-item-checkbox");e.icon="selected"}if(!e.preview&&!e.selectable){t.addClass("menu-item-normal")}t.on("mousedown",function(e){e.preventDefault()});if(e.menu&&!e.ariaHideMenu){t.aria("haspopup",true)}},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,i=e.settings,n,s=e.parent();s.items().each(function(t){if(t!==e){t.hideMenu()}});if(i.menu){n=e.menu;if(!n){n=i.menu;if(n.length){n={type:"menu",items:n}}else{n.type=n.type||"menu"}if(s.settings.itemDefaults){n.itemDefaults=s.settings.itemDefaults}n=e.menu=t.create(n).parent(e).renderTo();n.reflow();n.fire("show");n.on("cancel",function(t){t.stopPropagation();e.focus();n.hide()});n.on("hide",function(t){if(t.control===n){e.removeClass("selected")}});n.submenu=true}else{n.show()}n._parentMenu=s;n.addClass("menu-sub");var a=n.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);n.moveRel(e.getEl(),a);n.rel=a;a="menu-sub-"+a;n.removeClass(n._lastRel);n.addClass(a);n._lastRel=a;e.addClass("selected");e.aria("expanded",true)}},hideMenu:function(){var e=this;if(e.menu){e.menu.items().each(function(e){if(e.hideMenu){e.hideMenu()}});e.menu.hide();e.aria("expanded",false)}return e},renderHtml:function(){var e=this,t=e._id,n=e.settings,s=e.classPrefix,a=e.encode(e._text);var r=e.settings.icon,u="",l=n.shortcut;if(r){e.parent().addClass("menu-has-icons")}if(n.image){r="none";u=" style=\"background-image: url('"+n.image+"')\""}if(l&&i.mac){l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;");l=l.replace(/ctrl\+/i,"&#x2318;");l=l.replace(/alt\+/i,"&#x2325;");l=l.replace(/shift\+/i,"&#x21E7;")}r=s+"ico "+s+"i-"+(e.settings.icon||"none");return'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+(a!=="-"?'<i class="'+r+'"'+u+"></i>Â ":"")+(a!=="-"?'<span id="'+t+'-text" class="'+s+'text">'+a+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+s+'menu-shortcut">'+l+"</div>":"")+(n.menu?'<div class="'+s+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings;var i=t.textStyle;if(typeof i=="function"){i=i.call(this)}if(i){var n=e.getEl("text");if(n){n.setAttribute("style",i)}}e.on("mouseenter click",function(i){if(i.control===e){if(!t.menu&&i.type==="click"){e.fire("select");e.parent().hideAll()}else{e.showMenu();if(i.aria){e.menu.focus(true)}}}});e._super();return e},active:function(e){if(typeof e!="undefined"){this.aria("checked",e)}return this._super(e)},remove:function(){this._super();if(this.menu){this.menu.remove()}}})});