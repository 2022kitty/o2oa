define("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,i,n,l,a,r,f,c,o,s,m,u;var x,d,h,H,W=[],y,v,g,R,p,M;var w,z,F,b,S,_,k,A;var L,j,B,q,C,D;var E,G;var I=Math.max,J=Math.min;n=e.items().filter(":visible");l=e.layoutRect();a=e._paddingBox;r=e.settings;u=e.isRtl()?r.direction||"row-reversed":r.direction;f=r.align;c=e.isRtl()?r.pack||"end":r.pack;o=r.spacing||0;if(u=="row-reversed"||u=="column-reverse"){n=n.set(n.toArray().reverse());u=u.split("-")[0]}if(u=="column"){F="y";w="h";z="minH";b="maxH";_="innerH";S="top";k="deltaH";A="contentH";C="left";B="w";L="x";j="innerW";q="minW";D="right";E="deltaW";G="contentW"}else{F="x";w="w";z="minW";b="maxW";_="innerW";S="left";k="deltaW";A="contentW";C="top";B="h";L="y";j="innerH";q="minH";D="bottom";E="deltaH";G="contentH"}m=l[_]-a[S]-a[S];M=s=0;for(t=0,i=n.length;t<i;t++){x=n[t];d=x.layoutRect();h=x.settings;H=h.flex;m-=t<i-1?o:0;if(H>0){s+=H;if(d[b]){W.push(x)}d.flex=H}m-=d[z];y=a[C]+d[q]+a[D];if(y>M){M=y}}R={};if(m<0){R[z]=l[z]-m+l[k]}else{R[z]=l[_]-m+l[k]}R[q]=M+l[E];R[A]=l[_]-m;R[G]=M;R.minW=J(R.minW,l.maxW);R.minH=J(R.minH,l.maxH);R.minW=I(R.minW,l.startMinWidth);R.minH=I(R.minH,l.startMinHeight);if(l.autoResize&&(R.minW!=l.minW||R.minH!=l.minH)){R.w=R.minW;R.h=R.minH;e.layoutRect(R);this.recalc(e);if(e._lastRect===null){var K=e.parent();if(K){K._lastRect=null;K.recalc()}}return}g=m/s;for(t=0,i=W.length;t<i;t++){x=W[t];d=x.layoutRect();v=d[b];y=d[z]+d.flex*g;if(y>v){m-=d[b]-d[z];s-=d.flex;d.flex=0;d.maxFlexSize=v}else{d.maxFlexSize=0}}g=m/s;p=a[S];R={};if(s===0){if(c=="end"){p=m+a[S]}else if(c=="center"){p=Math.round(l[_]/2-(l[_]-m)/2)+a[S];if(p<0){p=a[S]}}else if(c=="justify"){p=a[S];o=Math.floor(m/(n.length-1))}}R[L]=a[C];for(t=0,i=n.length;t<i;t++){x=n[t];d=x.layoutRect();y=d.maxFlexSize||d[z];if(f==="center"){R[L]=Math.round(l[j]/2-d[B]/2)}else if(f==="stretch"){R[B]=I(d[q]||0,l[j]-a[C]-a[D]);R[L]=a[C]}else if(f==="end"){R[L]=l[j]-d[B]-a.top}if(d.flex>0){y+=d.flex*g}R[w]=y;R[F]=p;x.layoutRect(R);if(x.recalc){x.recalc()}p+=y+o}}})});