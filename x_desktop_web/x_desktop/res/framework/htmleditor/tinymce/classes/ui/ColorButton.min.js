define("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(t,e){"use strict";var i=e.DOM;return t.extend({init:function(t){this._super(t);this.addClass("colorbutton")},color:function(t){if(t){this._color=t;this.getEl("preview").style.backgroundColor=t;return this}return this._color},renderHtml:function(){var t=this,e=t._id,i=t.classPrefix;var n=t.settings.icon?i+"ico "+i+"i-"+t.settings.icon:"";var s=t.settings.image?" style=\"background-image: url('"+t.settings.image+"')\"":"";return'<div id="'+e+'" class="'+t.classes()+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(n?'<i class="'+n+'"'+s+"></i>":"")+'<span id="'+e+'-preview" class="'+i+'preview"></span>'+(t._text?(n?" ":"")+t._text:"")+"</button>"+'<button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+' <i class="'+i+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var t=this,e=t.settings.onclick;t.on("click",function(n){if(n.aria&&n.aria.key=="down"){return}if(n.control==t&&!i.getParent(n.target,"."+t.classPrefix+"open")){n.stopImmediatePropagation();e.call(t,n)}});delete t.settings.onclick;return t._super()}})});