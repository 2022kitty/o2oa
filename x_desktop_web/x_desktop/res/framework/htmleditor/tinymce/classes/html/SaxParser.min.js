define("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,i){var a=i.each;return function(n,l){var s=this;function f(){}n=n||{};s.schema=l=l||new e;if(n.fix_self_closing!==false){n.fix_self_closing=true}a("comment cdata text start end pi doctype".split(" "),function(e){if(e){s[e]=n[e]||f}});s.parse=function(e){var a=this,s,f=0,r,u,m=[],c,o,d,h;var g,p,v,x,w;var b,_,y,E,A,C,k;var S,O,R;var W,D,I,L,P,T,F=0;var V=t.decode,$,j=i.makeMap("src,href,data,background,formaction,poster");var q=/((java|vb)script|mhtml):/i,z=/^data:/i;function B(e){var t,i;t=m.length;while(t--){if(m[t].name===e){break}}if(t>=0){for(i=m.length-1;i>=t;i--){e=m[i];if(e.valid){a.end(e.name)}}m.length=t}}function M(e,t,i,a,l){var s,f,r=/[\s\u0000-\u001F]+/g;t=t.toLowerCase();i=t in x?t:V(i||a||l||"");if(b&&!g&&t.indexOf("data-")!==0){s=C[t];if(!s&&k){f=k.length;while(f--){s=k[f];if(s.pattern.test(t)){break}}if(f===-1){s=null}}if(!s){return}if(s.validValues&&!(i in s.validValues)){return}}if(j[t]&&!n.allow_script_urls){var u=i.replace(r,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(q.test(u)){return}if(!n.allow_html_data_urls&&z.test(u)&&!/^data:image\//i.test(u)){return}}c.map[t]=i;c.push({name:t,value:i})}I=new RegExp("<(?:"+"(?:!--([\\w\\W]*?)-->)|"+"(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|"+"(?:!DOCTYPE([\\w\\W]*?)>)|"+"(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|"+"(?:\\/([^>]+)>)|"+"(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>)"+")","g");L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;v=l.getShortEndedElements();D=n.self_closing_elements||l.getSelfClosingElements();x=l.getBoolAttrs();b=n.validate;p=n.remove_internals;$=n.fix_self_closing;P=l.getSpecialElements();while(s=I.exec(e)){if(f<s.index){a.text(V(e.substr(f,s.index-f)))}if(r=s[6]){r=r.toLowerCase();if(r.charAt(0)===":"){r=r.substr(1)}B(r)}else if(r=s[7]){r=r.toLowerCase();if(r.charAt(0)===":"){r=r.substr(1)}w=r in v;if($&&D[r]&&m.length>0&&m[m.length-1].name===r){B(r)}if(!b||(_=l.getElementRule(r))){y=true;if(b){C=_.attributes;k=_.attributePatterns}if(A=s[8]){g=A.indexOf("data-mce-type")!==-1;if(g&&p){y=false}c=[];c.map={};A.replace(L,M)}else{c=[];c.map={}}if(b&&!g){S=_.attributesRequired;O=_.attributesDefault;R=_.attributesForced;W=_.removeEmptyAttrs;if(W&&!c.length){y=false}if(R){o=R.length;while(o--){E=R[o];h=E.name;T=E.value;if(T==="{$uid}"){T="mce_"+F++}c.map[h]=T;c.push({name:h,value:T})}}if(O){o=O.length;while(o--){E=O[o];h=E.name;if(!(h in c.map)){T=E.value;if(T==="{$uid}"){T="mce_"+F++}c.map[h]=T;c.push({name:h,value:T})}}}if(S){o=S.length;while(o--){if(S[o]in c.map){break}}if(o===-1){y=false}}if(c.map["data-mce-bogus"]){y=false}}if(y){a.start(r,c,w)}}else{y=false}if(u=P[r]){u.lastIndex=f=s.index+s[0].length;if(s=u.exec(e)){if(y){d=e.substr(f,s.index-f)}f=s.index+s[0].length}else{d=e.substr(f);f=e.length}if(y){if(d.length>0){a.text(d,true)}a.end(r)}I.lastIndex=f;continue}if(!w){if(!A||A.indexOf("/")!=A.length-1){m.push({name:r,valid:y})}else if(y){a.end(r)}}}else if(r=s[1]){if(r.charAt(0)===">"){r=" "+r}if(!n.allow_conditional_comments&&r.substr(0,3)==="[if"){r=" "+r}a.comment(r)}else if(r=s[2]){a.cdata(r)}else if(r=s[3]){a.doctype(r)}else if(r=s[4]){a.pi(r,s[5])}f=s.index+s[0].length}if(f<e.length){a.text(V(e.substr(f)))}for(o=m.length-1;o>=0;o--){r=m[o];if(r.valid){a.end(r.name)}}}}});