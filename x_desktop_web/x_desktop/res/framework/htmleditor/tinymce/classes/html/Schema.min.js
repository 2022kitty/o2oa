define("tinymce/html/Schema",["tinymce/util/Tools"],function(e){var t={};var a=e.makeMap,r=e.each,i=e.extend,n=e.explode,o=e.inArray;function l(e,t){return e?e.split(t||" "):[]}function s(e){var a={},i,n;var o,s,c,d;function u(e,t,r){var n,o,s,c=arguments;function d(e){var t={},a,r;for(a=0,r=e.length;a<r;a++){t[e[a]]={}}return t}r=r||[];t=t||"";if(typeof r==="string"){r=l(r)}for(o=3;o<c.length;o++){if(typeof c[o]==="string"){c[o]=l(c[o])}r.push.apply(r,c[o])}e=l(e);n=e.length;while(n--){s=[].concat(i,l(t));a[e[n]]={attributes:d(s),attributesOrder:s,children:d(r)}}}function p(e,t){var r,i,n,o;e=l(e);r=e.length;t=l(t);while(r--){i=a[e[r]];for(n=0,o=t.length;n<o;n++){i.attributes[t[n]]={};i.attributesOrder.push(t[n])}}}if(t[e]){return t[e]}i=l("id accesskey class dir lang style tabindex title");n=l("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul");o=l("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment");if(e!="html4"){i.push.apply(i,l("contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate"));n.push.apply(n,l("article aside details dialog figure header footer hgroup section nav"));o.push.apply(o,l("audio canvas command datalist mark meter output progress time wbr "+"video ruby bdi keygen"))}if(e!="html5-strict"){i.push("xml:lang");d=l("acronym applet basefont big font strike tt");o.push.apply(o,d);r(d,function(e){u(e,"",o)});c=l("center dir isindex noframes");n.push.apply(n,c);s=[].concat(n,o);r(c,function(e){u(e,"",s)})}s=s||[].concat(n,o);u("html","manifest","head body");u("head","","base command link meta noscript script style title");u("title hr noscript br");u("base","href target");u("link","href rel media hreflang type sizes hreflang");u("meta","name http-equiv content charset");u("style","media type scoped");u("script","src async defer type charset");u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",s);u("address dt dd div caption","",s);u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o);u("blockquote","cite",s);u("ol","reversed start type","li");u("ul","","li");u("li","value",s);u("dl","","dt dd");u("a","href target rel media hreflang type",o);u("q","cite",o);u("ins del","cite datetime",s);u("img","src alt usemap ismap width height");u("iframe","src name width height",s);u("embed","src type width height");u("object","data type typemustmatch name usemap form width height",s,"param");u("param","name value");u("map","name",s,"area");u("area","alt coords shape href target rel media hreflang type");u("table","border","caption colgroup thead tfoot tbody tr"+(e=="html4"?" col":""));u("colgroup","span","col");u("col","span");u("tbody thead tfoot","","tr");u("tr","","td th");u("td","colspan rowspan headers",s);u("th","colspan rowspan headers scope abbr",s);u("form","accept-charset action autocomplete enctype method name novalidate target",s);u("fieldset","disabled form name",s,"legend");u("label","form for",o);u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e=="html4"?s:o);u("select","disabled form multiple name required size","option optgroup");u("optgroup","disabled label","option");u("option","disabled label selected value");u("textarea","cols dirname disabled form maxlength name readonly required rows wrap");u("menu","type label",s,"li");u("noscript","",s);if(e!="html4"){u("wbr");u("ruby","",o,"rt rp");u("figcaption","",s);u("mark rt rp summary bdi","",o);u("canvas","width height",s);u("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",s,"track source");u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",s,"track source");u("source","src type media");u("track","kind src srclang label default");u("datalist","",o,"option");u("article section nav aside header footer","",s);u("hgroup","","h1 h2 h3 h4 h5 h6");u("figure","",s,"figcaption");u("time","datetime",o);u("dialog","open",s);u("command","type label icon disabled checked radiogroup command");u("output","for form name",o);u("progress","value max",o);u("meter","value min max low high optimum",o);u("details","open",s,"summary");u("keygen","autofocus challenge disabled form keytype name")}if(e!="html5-strict"){p("script","language xml:space");p("style","xml:space");p("object","declare classid codebase codetype archive standby align border hspace vspace");p("param","valuetype type");p("a","charset name rev shape coords");p("br","clear");p("applet","codebase archive code object alt name width height align hspace vspace");p("img","name longdesc align border hspace vspace");p("iframe","longdesc frameborder marginwidth marginheight scrolling align");p("font basefont","size color face");p("input","usemap align");p("select","onchange");p("textarea");p("h1 h2 h3 h4 h5 h6 div p legend caption","align");p("ul","type compact");p("li","type");p("ol dl menu dir","compact");p("pre","width xml:space");p("hr","align noshade size width");p("isindex","prompt");p("table","summary width frame rules cellspacing cellpadding align bgcolor");p("col","width align char charoff valign");p("colgroup","width align char charoff valign");p("thead","align char charoff valign");p("tr","align char charoff valign bgcolor");p("th","axis align char charoff valign nowrap bgcolor width height");p("form","accept");p("td","abbr axis scope align char charoff valign nowrap bgcolor width height");p("tfoot","align char charoff valign");p("tbody","align char charoff valign");p("area","nohref");p("body","background bgcolor text link vlink alink")}if(e!="html4"){p("input button select textarea","autofocus");p("input textarea","placeholder");p("a","download");p("link script img","crossorigin");p("iframe","sandbox seamless allowfullscreen")}r(l("a form meter progress dfn"),function(e){if(a[e]){delete a[e].children[e]}});delete a.caption.children.table;t[e]=a;return a}return function(e){var c=this,d={},u={},p=[],m,f;var h,g,b,v;var y,w,x,k={},_={};function E(r,n,o){var l=e[r];if(!l){l=t[r];if(!l){l=a(n," ",a(n.toUpperCase()," "));l=i(l,o);t[r]=l}}else{l=a(l,/[, ]/,a(l.toUpperCase(),/[, ]/))}return l}e=e||{};f=s(e.schema);if(e.verify_html===false){e.valid_elements="*[*]"}if(e.valid_styles){m={};r(e.valid_styles,function(e,t){m[t]=n(e)})}h=E("whitespace_elements","pre script noscript style textarea video audio iframe object");g=E("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");b=E("short_ended_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track");v=E("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls");w=E("non_empty_elements","td th iframe video audio object script",b);x=E("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside nav figure");y=E("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup",x);r((e.special||"script noscript style textarea").split(" "),function(e){_[e]=new RegExp("</"+e+"[^>]*>","gi")});function q(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function z(e){var t,r,i,n,s,c,u,m,f,h,g,b,v,y,w,x,k,_,E,z=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,C=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,V=/[*?+]/;if(e){e=l(e,",");if(d["@"]){x=d["@"].attributes;k=d["@"].attributesOrder}for(t=0,r=e.length;t<r;t++){s=z.exec(e[t]);if(s){y=s[1];f=s[2];w=s[3];m=s[5];b={};v=[];c={attributes:b,attributesOrder:v};if(y==="#"){c.paddEmpty=true}if(y==="-"){c.removeEmpty=true}if(s[4]==="!"){c.removeEmptyAttrs=true}if(x){for(_ in x){b[_]=x[_]}v.push.apply(v,k)}if(m){m=l(m,"|");for(i=0,n=m.length;i<n;i++){s=C.exec(m[i]);if(s){u={};g=s[1];h=s[2].replace(/::/g,":");y=s[3];E=s[4];if(g==="!"){c.attributesRequired=c.attributesRequired||[];c.attributesRequired.push(h);u.required=true}if(g==="-"){delete b[h];v.splice(o(v,h),1);continue}if(y){if(y==="="){c.attributesDefault=c.attributesDefault||[];c.attributesDefault.push({name:h,value:E});u.defaultValue=E}if(y===":"){c.attributesForced=c.attributesForced||[];c.attributesForced.push({name:h,value:E});u.forcedValue=E}if(y==="<"){u.validValues=a(E,"?")}}if(V.test(h)){c.attributePatterns=c.attributePatterns||[];u.pattern=q(h);c.attributePatterns.push(u)}else{if(!b[h]){v.push(h)}b[h]=u}}}}if(!x&&f=="@"){x=b;k=v}if(w){c.outputName=f;d[w]=c}if(V.test(f)){c.pattern=q(f);p.push(c)}else{d[f]=c}}}}}function C(e){d={};p=[];z(e);r(f,function(e,t){u[t]=e.children})}function V(e){var a=/^(~)?(.+)$/;if(e){t.text_block_elements=t.block_elements=null;r(l(e,","),function(e){var t=a.exec(e),n=t[1]==="~",o=n?"span":"div",l=t[2];u[l]=u[o];k[l]=o;if(!n){y[l.toUpperCase()]={};y[l]={}}if(!d[l]){var s=d[o];s=i({},s);delete s.removeEmptyAttrs;delete s.removeEmpty;d[l]=s}r(u,function(e,t){if(e[o]){u[t]=e=i({},u[t]);e[l]=e[o]}})})}}function j(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(e){r(l(e,","),function(e){var a=t.exec(e),n,o;if(a){o=a[1];if(o){n=u[a[2]]}else{n=u[a[2]]={"#comment":{}}}n=u[a[2]];r(l(a[3],"|"),function(e){if(o==="-"){u[a[2]]=n=i({},u[a[2]]);delete n[e]}else{n[e]={}}})}})}}function O(e){var t=d[e],a;if(t){return t}a=p.length;while(a--){t=p[a];if(t.pattern.test(e)){return t}}}if(!e.valid_elements){r(f,function(e,t){d[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};u[t]=e.children});if(e.schema!="html5"){r(l("strong/b em/i"),function(e){e=l(e,"/");d[e[1]].outputName=e[0]})}d.img.attributesDefault=[{name:"alt",value:""}];r(l("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){if(d[e]){d[e].removeEmpty=true}});r(l("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){d[e].paddEmpty=true});r(l("span"),function(e){d[e].removeEmptyAttrs=true})}else{C(e.valid_elements)}V(e.custom_elements);j(e.valid_children);z(e.extended_valid_elements);j("+ol[ul|ol],+ul[ul|ol]");if(e.invalid_elements){r(n(e.invalid_elements),function(e){if(d[e]){delete d[e]}})}if(!O("span")){z("span[!data-mce-type|*]")}c.children=u;c.styles=m;c.getBoolAttrs=function(){return v};c.getBlockElements=function(){return y};c.getTextBlockElements=function(){return x};c.getShortEndedElements=function(){return b};c.getSelfClosingElements=function(){return g};c.getNonEmptyElements=function(){return w};c.getWhiteSpaceElements=function(){return h};c.getSpecialElements=function(){return _};c.isValidChild=function(e,t){var a=u[e];return!!(a&&a[t])};c.isValid=function(e,t){var a,r,i=O(e);if(i){if(t){if(i.attributes[t]){return true}a=i.attributePatterns;if(a){r=a.length;while(r--){if(a[r].pattern.test(e)){return true}}}}else{return true}}return false};c.getElementRule=O;c.getCustomElements=function(){return k};c.addValidElements=z;c.setValidElements=C;c.addCustomElements=V;c.addValidChildren=j;c.elements=d}});