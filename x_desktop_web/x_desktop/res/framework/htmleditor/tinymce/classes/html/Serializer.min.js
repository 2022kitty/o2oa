define("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(n,i){var a=this,r=new e(n);n=n||{};n.validate="validate"in n?n.validate:true;a.schema=i=i||new t;a.writer=r;a.serialize=function(e){var t,a;a=n.validate;t={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild){do{l(e)}while(e=e.next)}}};r.reset();function l(e){var n=t[e.type],u,m,f,c,o,d,h,s,v;if(!n){u=e.name;m=e.shortEnded;f=e.attributes;if(a&&f&&f.length>1){d=[];d.map={};v=i.getElementRule(e.name);for(h=0,s=v.attributesOrder.length;h<s;h++){c=v.attributesOrder[h];if(c in f.map){o=f.map[c];d.map[c]=o;d.push({name:c,value:o})}}for(h=0,s=f.length;h<s;h++){c=f[h].name;if(!(c in d.map)){o=f.map[c];d.map[c]=o;d.push({name:c,value:o})}}f=d}r.start(e.name,f,m);if(!m){if(e=e.firstChild){do{l(e)}while(e=e.next)}r.end(u)}}else{n(e)}}if(e.type==1&&!n.inner){l(e)}else{t[11](e)}return r.getContent()}}});