define("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(n,t){var e=t.makeMap;return function(t){var i=[],h,u,f,l,o;t=t||{};h=t.indent;u=e(t.indent_before||"");f=e(t.indent_after||"");l=n.getEncodeFunc(t.entity_encoding||"raw",t.entities);o=t.element_format=="html";return{start:function(n,t,e){var c,r,s,g;if(h&&u[n]&&i.length>0){g=i[i.length-1];if(g.length>0&&g!=="\n"){i.push("\n")}}i.push("<",n);if(t){for(c=0,r=t.length;c<r;c++){s=t[c];i.push(" ",s.name,'="',l(s.value,true),'"')}}if(!e||o){i[i.length]=">"}else{i[i.length]=" />"}if(e&&h&&f[n]&&i.length>0){g=i[i.length-1];if(g.length>0&&g!=="\n"){i.push("\n")}}},end:function(n){var t;i.push("</",n,">");if(h&&f[n]&&i.length>0){t=i[i.length-1];if(t.length>0&&t!=="\n"){i.push("\n")}}},text:function(n,t){if(n.length>0){i[i.length]=t?n:l(n)}},cdata:function(n){i.push("<![CDATA[",n,"]]>")},comment:function(n){i.push("<!--",n,"-->")},pi:function(n,t){if(t){i.push("<?",n," ",t,"?>")}else{i.push("<?",n,"?>")}if(h){i.push("\n")}},doctype:function(n){i.push("<!DOCTYPE",n,">",h?"\n":"")},reset:function(){i.length=0},getContent:function(){return i.join("").replace(/\n$/,"")}}}});