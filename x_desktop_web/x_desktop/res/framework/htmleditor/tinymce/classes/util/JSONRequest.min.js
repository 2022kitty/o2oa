define("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,r){var s=r.extend;function n(e){this.settings=s({},e);this.count=0}n.sendRPC=function(e){return(new n).send(e)};n.prototype={send:function(r){var n=r.error,o=r.success;r=s(this.settings,r);r.success=function(t,s){t=e.parse(t);if(typeof t=="undefined"){t={error:"JSON Parse error."}}if(t.error){n.call(r.error_scope||r.scope,t.error,s)}else{o.call(r.success_scope||r.scope,t.result)}};r.error=function(e,t){if(n){n.call(r.error_scope||r.scope,e,t)}};r.data=e.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params});r.content_type="application/json";t.send(r)}};return n});