define("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(n,e){var t=n.DOM;var o=e.each,i=e.grep;function c(){var n=0,e=1,c=2,a={},u=[],f={},r=[],s=0,d;function l(n,e){var o=t,i,c;function a(){o.remove(c);if(i){i.onreadystatechange=i.onload=i=null}e()}function u(){if(typeof console!=="undefined"&&console.log){console.log("Failed to load: "+n)}}c=o.uniqueId();i=document.createElement("script");i.id=c;i.type="text/javascript";i.src=n;if("onreadystatechange"in i){i.onreadystatechange=function(){if(/loaded|complete/.test(i.readyState)){a()}}}else{i.onload=a}i.onerror=u;(document.getElementsByTagName("head")[0]||document.body).appendChild(i)}this.isDone=function(n){return a[n]==c};this.markDone=function(n){a[n]=c};this.add=this.load=function(e,t,o){var i=a[e];if(i==d){u.push(e);a[e]=n}if(t){if(!f[e]){f[e]=[]}f[e].push({func:t,scope:o||this})}};this.loadQueue=function(n,e){this.loadScripts(u,n,e)};this.loadScripts=function(n,t,u){var h;function p(n){o(f[n],function(n){n.func.call(n.scope)});f[n]=d}r.push({func:t,scope:u||this});h=function(){var t=i(n);n.length=0;o(t,function(n){if(a[n]==c){p(n);return}if(a[n]!=e){a[n]=e;s++;l(n,function(){a[n]=c;s--;p(n);h()})}});if(!s){o(r,function(n){n.func.call(n.scope)});r.length=0}};h()}}c.ScriptLoader=new c;return c});