define("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,l,o,i,a){var r=l.each;function c(l){var o,a,c=this;function s(e){return e?e.replace(/px$/,""):""}function d(e){if(/^[0-9]+$/.test(e)){e+="px"}return e}function m(e){r("left center right".split(" "),function(t){l.formatter.remove("align"+t,{},e)})}function u(e){r("top middle bottom".split(" "),function(t){l.formatter.remove("valign"+t,{},e)})}function f(){var e=l.dom,t,n,o,a;t=e.getParent(l.selection.getStart(),"table");a={width:s(e.getStyle(t,"width")||e.getAttrib(t,"width")),height:s(e.getStyle(t,"height")||e.getAttrib(t,"height")),cellspacing:t?e.getAttrib(t,"cellspacing"):"",cellpadding:t?e.getAttrib(t,"cellpadding"):"",border:t?e.getAttrib(t,"border"):"",caption:!!e.select("caption",t)[0]};r("left center right".split(" "),function(e){if(l.formatter.matchNode(t,"align"+e)){a.align=e}});if(!t){n={label:"Cols",name:"cols"};o={label:"Rows",name:"rows"}}l.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:a,defaults:{type:"textbox",maxWidth:50},items:[n,o,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var n=this.toJSON(),o;l.undoManager.transact(function(){if(!t){t=x(n.cols||1,n.rows||1)}l.dom.setAttribs(t,{cellspacing:n.cellspacing,cellpadding:n.cellpadding,border:n.border});l.dom.setStyles(t,{width:d(n.width),height:d(n.height)});o=e.select("caption",t)[0];if(o&&!n.caption){e.remove(o)}if(!o&&n.caption){o=e.create("caption");o.innerHTML=!i.ie?'<br data-mce-bogus="1"/>':"Â ";t.insertBefore(o,t.firstChild)}m(t);if(n.align){l.formatter.apply("align"+n.align,{},t)}l.focus();l.addVisual()})}})}function g(e,t){l.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var n=this.toJSON();l.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})}function p(){var e=l.dom,t,n,o=[];o=l.dom.select("td.mce-item-selected,th.mce-item-selected");t=l.dom.getParent(l.selection.getStart(),"td,th");if(!o.length&&t){o.push(t)}t=t||o[0];if(!t){return}n={width:s(e.getStyle(t,"width")||e.getAttrib(t,"width")),height:s(e.getStyle(t,"height")||e.getAttrib(t,"height")),scope:e.getAttrib(t,"scope")};n.type=t.nodeName.toLowerCase();r("left center right".split(" "),function(e){if(l.formatter.matchNode(t,"align"+e)){n.align=e}});r("top middle bottom".split(" "),function(e){if(l.formatter.matchNode(t,"valign"+e)){n.valign=e}});l.windowManager.open({title:"Cell properties",items:{type:"form",data:n,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},onsubmit:function(){var t=this.toJSON();l.undoManager.transact(function(){r(o,function(n){l.dom.setAttrib(n,"scope",t.scope);l.dom.setStyles(n,{width:d(t.width),height:d(t.height)});if(t.type&&n.nodeName.toLowerCase()!=t.type){n=e.rename(n,t.type)}m(n);if(t.align){l.formatter.apply("align"+t.align,{},n)}u(n);if(t.valign){l.formatter.apply("valign"+t.valign,{},n)}});l.focus()})}})}function b(){var e=l.dom,t,n,o,i,a=[];t=l.dom.getParent(l.selection.getStart(),"table");n=l.dom.getParent(l.selection.getStart(),"td,th");r(t.rows,function(t){r(t.cells,function(l){if(e.hasClass(l,"mce-item-selected")||l==n){a.push(t);return false}})});o=a[0];if(!o){return}i={height:s(e.getStyle(o,"height")||e.getAttrib(o,"height")),scope:e.getAttrib(o,"scope")};i.type=o.parentNode.nodeName.toLowerCase();r("left center right".split(" "),function(e){if(l.formatter.matchNode(o,"align"+e)){i.align=e}});l.windowManager.open({title:"Row properties",items:{type:"form",data:i,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var t=this.toJSON(),n,o,i;l.undoManager.transact(function(){var c=t.type;r(a,function(a){l.dom.setAttrib(a,"scope",t.scope);l.dom.setStyles(a,{height:d(t.height)});if(c!=a.parentNode.nodeName.toLowerCase()){n=e.getParent(a,"table");o=a.parentNode;i=e.select(c,n)[0];if(!i){i=e.create(c);if(n.firstChild){n.insertBefore(i,n.firstChild)}else{n.appendChild(i)}}i.appendChild(a);if(!o.hasChildNodes()){e.remove(o)}}m(a);if(t.align){l.formatter.apply("align"+t.align,{},a)}});l.focus()})}})}function h(e){return function(){l.execCommand(e)}}function x(e,t){var n,o,a;a='<table id="__mce"><tbody>';for(n=0;n<t;n++){a+="<tr>";for(o=0;o<e;o++){a+="<td>"+(i.ie?" ":"<br>")+"</td>"}a+="</tr>"}a+="</tbody></table>";l.insertContent(a);var r=l.dom.get("__mce");l.dom.setAttrib(r,"id",null);return r}function w(e,t){function n(){e.disabled(!l.dom.getParent(l.selection.getStart(),t));l.selection.selectorChanged(t,function(t){e.disabled(!t)})}if(l.initialized){n()}else{l.on("init",n)}}function v(){w(this,"table")}function y(){w(this,"td,th")}function C(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+n)+'" href="#" '+'data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>'}e+="</tr>"}e+="</table>";e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e}function R(e,t,n){var o=n.getEl().getElementsByTagName("table")[0];var i,a,r,c,s;var d=n.isRtl()||n.parent().rel=="tl-tr";o.nextSibling.innerHTML=e+1+" x "+(t+1);if(d){e=9-e}for(a=0;a<10;a++){for(i=0;i<10;i++){c=o.rows[a].childNodes[i].firstChild;s=(d?i>=e:i<=e)&&a<=t;l.dom.toggleClass(c,"mce-active",s);if(s){r=c}}}return r.parentNode}if(l.settings.table_grid===false){l.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:f})}else{l.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(e){if(e.aria){this.parent().hideAll();e.stopImmediatePropagation();f()}},onshow:function(){R(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");l.dom.removeClass(e,"mce-active");l.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:C(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t=e.target,n,l;if(t.tagName.toUpperCase()=="A"){n=parseInt(t.getAttribute("data-mce-x"),10);l=parseInt(t.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel=="tl-tr"){n=9-n}if(n!==this.lastX||l!==this.lastY){R(n,l,e.control);this.lastX=n;this.lastY=l}}},onkeydown:function(e){var t=this.lastX,n=this.lastY,l;switch(e.keyCode){case 37:if(t>0){t--;l=true}break;case 39:l=true;if(t<9){t++}break;case 38:l=true;if(n>0){n--}break;case 40:l=true;if(n<9){n++}break}if(l){e.preventDefault();e.stopPropagation();R(t,n,e.control).focus();this.lastX=t;this.lastY=n}},onclick:function(e){if(e.target.tagName.toUpperCase()=="A"){e.preventDefault();e.stopPropagation();this.parent().cancel();x(this.lastX+1,this.lastY+1)}}}]})}l.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:v,onclick:f});l.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"});l.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:h("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:h("mceTableMergeCells"),onPostRender:y},{text:"Split cell",onclick:h("mceTableSplitCells"),onPostRender:y}]});l.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:h("mceTableInsertRowBefore"),onPostRender:y},{text:"Insert row after",onclick:h("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:h("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:h("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:h("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:h("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:h("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:h("mceTablePasteRowAfter"),onPostRender:y}]});l.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:h("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:h("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:h("mceTableDeleteCol"),onPostRender:y}]});var T=[];r("inserttable tableprops deletetable | cell row column".split(" "),function(e){if(e=="|"){T.push({text:"-"})}else{T.push(l.menuItems[e])}});l.addButton("table",{type:"menubutton",title:"Table",menu:T});if(!i.isIE){l.on("click",function(e){e=e.target;if(e.nodeName==="TABLE"){l.selection.select(e);l.nodeChanged()}})}c.quirks=new t(l);l.on("Init",function(){o=l.windowManager;c.cellSelection=new n(l)});r({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t,n,o;o=l.dom.getParent(l.selection.getStart(),"th,td");if(o){t=o.rowSpan;n=o.colSpan}if(!l.dom.select("td.mce-item-selected,th.mce-item-selected").length){g(e,o)}else{e.merge()}},mceTableInsertRowBefore:function(e){e.insertRow(true)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(true)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){a=e.cutRows()},mceTableCopyRow:function(e){a=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(a,true)},mceTablePasteRowAfter:function(e){e.pasteRows(a)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){l.addCommand(n,function(){var n=new e(l);if(n){t(n);l.execCommand("mceRepaint");c.cellSelection.clear()}})});r({mceInsertTable:function(){f()},mceTableRowProps:b,mceTableCellProps:p},function(e,t){l.addCommand(t,function(t,n){e(n)})})}a.add("table",c)});