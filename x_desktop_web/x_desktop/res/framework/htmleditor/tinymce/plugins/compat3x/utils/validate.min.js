var Validator={isEmail:function(s){return this.test(s,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(s){return this.test(s,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(s){return this.test(s,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(s){return this.test(s,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(s){var t,e;if(s.nodeName=="SELECT"&&s.selectedIndex<1)return true;if(s.type=="checkbox"&&!s.checked)return true;if(s.type=="radio"){for(e=0,t=s.form.elements;e<t.length;e++){if(t[e].type=="radio"&&t[e].name==s.name&&t[e].checked)return false}return true}return new RegExp("^\\s*$").test(s.nodeType==1?s.value:s)},isNumber:function(s,t){return!isNaN(s.nodeType==1?s.value:s)&&(!t||!this.test(s,"^-?[0-9]*\\.[0-9]*$"))},test:function(s,t){s=s.nodeType==1?s.value:s;return s==""||new RegExp(t).test(s)}};var AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(s){var t;for(t in s)this.settings[t]=s[t]},validate:function(s){var t,e,i=this.settings,a=0;e=this.tags(s,"label");for(t=0;t<e.length;t++){this.removeClass(e[t],i.invalid_cls);e[t].setAttribute("aria-invalid",false)}a+=this.validateElms(s,"input");a+=this.validateElms(s,"select");a+=this.validateElms(s,"textarea");return a==3},invalidate:function(s){this.mark(s.form,s)},getErrorMessages:function(s){var t,e,i=this.settings,a,n,r,l=[],u=tinyMCEPopup.editor;t=this.tags(s,"label");for(e=0;e<t.length;e++){if(this.hasClass(t[e],i.invalid_cls)){a=document.getElementById(t[e].getAttribute("for"));r={field:t[e].textContent};if(this.hasClass(a,i.min_cls,true)){message=u.getLang("invalid_data_min");r.min=this.getNum(a,i.min_cls)}else if(this.hasClass(a,i.number_cls)){message=u.getLang("invalid_data_number")}else if(this.hasClass(a,i.size_cls)){message=u.getLang("invalid_data_size")}else{message=u.getLang("invalid_data")}message=message.replace(/{\#([^}]+)\}/g,function(s,t){return r[t]||"{#"+t+"}"});l.push(message)}}return l},reset:function(s){var t=["label","input","select","textarea"];var e,i,a,n=this.settings;if(s==null)return;for(e=0;e<t.length;e++){a=this.tags(s.form?s.form:s,t[e]);for(i=0;i<a.length;i++){this.removeClass(a[i],n.invalid_cls);a[i].setAttribute("aria-invalid",false)}}},validateElms:function(s,t){var e,i,a,n=this.settings,r=true,l=Validator,u;e=this.tags(s,t);for(i=0;i<e.length;i++){a=e[i];this.removeClass(a,n.invalid_cls);if(this.hasClass(a,n.required_cls)&&l.isEmpty(a))r=this.mark(s,a);if(this.hasClass(a,n.number_cls)&&!l.isNumber(a))r=this.mark(s,a);if(this.hasClass(a,n.int_cls)&&!l.isNumber(a,true))r=this.mark(s,a);if(this.hasClass(a,n.url_cls)&&!l.isAbsUrl(a))r=this.mark(s,a);if(this.hasClass(a,n.email_cls)&&!l.isEmail(a))r=this.mark(s,a);if(this.hasClass(a,n.size_cls)&&!l.isSize(a))r=this.mark(s,a);if(this.hasClass(a,n.id_cls)&&!l.isId(a))r=this.mark(s,a);if(this.hasClass(a,n.min_cls,true)){u=this.getNum(a,n.min_cls);if(isNaN(u)||parseInt(a.value)<parseInt(u))r=this.mark(s,a)}if(this.hasClass(a,n.max_cls,true)){u=this.getNum(a,n.max_cls);if(isNaN(u)||parseInt(a.value)>parseInt(u))r=this.mark(s,a)}}return r},hasClass:function(s,t,e){return new RegExp("\\b"+t+(e?"[0-9]+":"")+"\\b","g").test(s.className)},getNum:function(s,t){t=s.className.match(new RegExp("\\b"+t+"([0-9]+)\\b","g"))[0];t=t.replace(/[^0-9]/g,"");return t},addClass:function(s,t,e){var i=this.removeClass(s,t);s.className=e?t+(i!=""?" "+i:""):(i!=""?i+" ":"")+t},removeClass:function(s,t){t=s.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ");return s.className=t!=" "?t:""},tags:function(s,t){return s.getElementsByTagName(t)},mark:function(s,t){var e=this.settings;this.addClass(t,e.invalid_cls);t.setAttribute("aria-invalid","true");this.markLabels(s,t,e.invalid_cls);return false},markLabels:function(s,t,e){var i,a;i=this.tags(s,"label");for(a=0;a<i.length;a++){if(i[a].getAttribute("for")==t.id||i[a].htmlFor==t.id)this.addClass(i[a],e)}return null}};