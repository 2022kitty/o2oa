define("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,r){"use strict";return function(i){function s(e){i.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function a(e){e=r.filter(e,[/^[\s\S]*<body[^>]*>\s*<!--StartFragment-->|<!--EndFragment-->\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/<span class="Apple-converted-space">\u00a0<\/span>/g,"Â "],/<br>$/i]);return e}function o(e){if(!n.isWordContent(e)){return e}var s=[];t.each(i.schema.getBlockElements(),function(e,t){s.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+s.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");e=r.filter(e,[[a,"$1"]]);e=r.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return e}function l(e){if(n.isWordContent(e)){return e}var t=i.settings.paste_webkit_styles;if(i.settings.paste_remove_styles_if_webkit===false||t=="all"){return e}if(t){t=t.split(/[, ]/)}if(t){var r=i.dom,s=i.selection.getNode();e=e.replace(/ style=\"([^\"]+)\"/gi,function(e,n){var i=r.parseStyle(n,"span"),a={};if(t==="none"){return""}for(var o=0;o<t.length;o++){var l=i[t[o]],c=r.getStyle(s,t[o],true);if(/color/.test(t[o])){l=r.toHex(l);c=r.toHex(c)}if(c!=l){a[t[o]]=l}}a=r.serializeStyle(a,"span");if(a){return' style="'+a+'"'}return""})}else{e=e.replace(/ style=\"[^\"]+\"/gi,"")}e=e.replace(/ data-mce-style=\"([^\"]+)\"/gi,function(e,t){return' style="'+t+'"'+e});return e}if(e.webkit){s(l);s(a)}if(e.ie){s(o)}}});