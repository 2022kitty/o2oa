var path=require("path");module.exports=function(e){"use strict";require("load-grunt-tasks")(e);var t=e.file.readJSON("package.json");var s={app:require("./bower.json").appPath||"app",dist:"dist"};var i="/*!\n"+" * ====================================================\n"+" * <%= pkg.title || pkg.name %> - v<%= pkg.version %> - "+'<%= grunt.template.today("yyyy-mm-dd") %>\n'+'<%= pkg.homepage ? " * " + pkg.homepage + "\\n" : "" %>'+" * GitHub: <%= pkg.repository.url %> \n"+' * Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>;'+' Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %>\n'+" * ====================================================\n"+" */\n\n";var n="\nuse('expose-editor');\n";e.initConfig({pkg:t,yeoman:s,clean:{last:[".tmp","dist/*.js","dist/*.css","dist/*.css.map"],clstmp:[".tmp"]},dependence:{options:{base:"src",entrance:"expose-editor"},merge:{files:[{src:["src/**/*.js"],dest:".tmp/scripts/kityminder.editor.logic.js"}]}},concat:{closure:{options:{banner:i+"(function () {\n",footer:n+"})();"},files:{"dist/kityminder.editor.js":[".tmp/scripts/kityminder.editor.logic.js",".tmp/scripts/kityminder.app.annotated.js",".tmp/scripts/templates.annotated.js",".tmp/scripts/service/*.js",".tmp/scripts/filter/*.js",".tmp/scripts/dialog/**/*.js",".tmp/scripts/directive/**/*.js"]}}},uglify:{options:{banner:i},minimize:{files:[{src:"dist/kityminder.editor.js",dest:"dist/kityminder.editor.min.js"}]}},less:{compile:{options:{sourceMap:true,sourceMapURL:"kityminder.editor.css.map",sourceMapFilename:"dist/kityminder.editor.css.map"},files:[{dest:"dist/kityminder.editor.css",src:"less/editor.less"}]}},cssmin:{dist:{files:{"dist/kityminder.editor.min.css":"dist/kityminder.editor.css"}}},ngtemplates:{kityminderEditor:{src:["ui/directive/**/*.html","ui/dialog/**/*.html"],dest:"ui/templates.js",options:{htmlmin:{collapseBooleanAttributes:true,collapseWhitespace:true,removeComments:true}}}},wiredep:{dev:{src:["index.html"],devDependencies:true},dist:{src:["dist/index.html"]}},copy:{dist:{files:[{expand:true,cwd:"ui",src:"images/*",dest:"dist"}]}},ngAnnotate:{dist:{files:[{expand:true,cwd:"ui/",src:"**/*.js",ext:".annotated.js",extDot:"last",dest:".tmp/scripts/"}]}}});e.registerTask("build",["clean:last","ngtemplates","dependence","ngAnnotate","concat","uglify","less","cssmin","copy","clean:clstmp"]);e.registerTask("dev",["clean:last","ngtemplates","dependence","ngAnnotate","concat","uglify","less","cssmin","copy","clean:clstmp"])};