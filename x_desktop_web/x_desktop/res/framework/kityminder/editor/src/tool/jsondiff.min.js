define(function(e,r,t){var n=function(){if(Object.keys)return Object.keys;return function(e){var r=[];for(var t in e){if(e.hasOwnProperty(t)){r.push(t)}}return r}}();function a(e){if(e.indexOf("/")===-1&&e.indexOf("~")===-1)return e;return e.replace(/~/g,"~0").replace(/\//g,"~1")}function f(e){if(typeof e==="object"){return JSON.parse(JSON.stringify(e))}else{return e}}function u(e,r,t,o){var i=n(r);var p=n(e);var l=false;var s=false;for(var v=p.length-1;v>=0;v--){var c=p[v];var h=e[c];if(r.hasOwnProperty(c)){var y=r[c];if(typeof h=="object"&&h!=null&&typeof y=="object"&&y!=null){u(h,y,t,o+"/"+a(c))}else{if(h!=y){l=true;t.push({op:"replace",path:o+"/"+a(c),value:f(y)})}}}else{t.push({op:"remove",path:o+"/"+a(c)});s=true}}if(!s&&i.length==p.length){return}for(var v=0;v<i.length;v++){var c=i[v];if(!e.hasOwnProperty(c)){t.push({op:"add",path:o+"/"+a(c),value:f(r[c])})}}}function o(e,r){var t=[];u(e,r,t,"");return t}return t.exports=o});