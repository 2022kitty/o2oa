define(function(e,n,t){if(!("innerText"in document.createElement("a"))&&"getSelection"in window){HTMLElement.prototype.__defineGetter__("innerText",function(){var e=window.getSelection(),n=[],t,r;for(r=0;r<e.rangeCount;r++){n[r]=e.getRangeAt(r)}e.removeAllRanges();e.selectAllChildren(this);t=e.toString();e.removeAllRanges();for(r=0;r<n.length;r++){e.addRange(n[r])}return t});HTMLElement.prototype.__defineSetter__("innerText",function(e){this.innerHTML=(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")})}});