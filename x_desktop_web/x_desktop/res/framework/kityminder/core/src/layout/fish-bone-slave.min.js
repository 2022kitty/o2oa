define(function(t,e,o){var a=t("../core/kity");var r=t("../core/layout");r.register("fish-bone-slave",a.createClass("FishBoneSlaveLayout",{base:r,doLayout:function(t,e,o){var r=this;var n=Math.abs;var i=1-.618;var s=t.getContentBox();var y=t.getLayoutVectorIn();t.setLayoutVectorOut(y);var g=s.left+s.width*i;var v=new a.Point(g,y.y>0?s.bottom:s.top);t.setVertexOut(v);var f=e[0];if(!f)return;var u=f.getContentBox();e.forEach(function(t,e){t.setLayoutTransform(new a.Matrix);t.setLayoutVectorIn(new a.Vector(1,0));t.setVertexIn(new a.Point(u.left,u.cy))});this.stack(e,"y");this.align(e,"left");var c=0,l=0;c+=v.x;if(t.getLayoutVectorOut().y<0){l-=this.getTreeBox(e).bottom;l+=t.getContentBox().top;l-=t.getStyle("margin-top");l-=f.getStyle("margin-bottom")}else{l+=t.getContentBox().bottom;l+=t.getStyle("margin-bottom");l+=f.getStyle("margin-top")}this.move(e,c,l);if(o==2){e.forEach(function(t){var e=t.getLayoutTransform();var o=t.getContentBox();var i=e.transformPoint(new a.Point(o.left,0));r.move([t],n(i.y-v.y),0)})}}}))});