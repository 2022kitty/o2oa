define(function(t,e,o){var r=t("../core/kity");var n=t("../core/layout");[-1,1].forEach(a);function a(t){var e="filetree-"+(t>0?"down":"up");n.register(e,r.createClass({base:n,doLayout:function(e,o,n){var a=e.getContentBox();var i=20;e.setVertexOut(new r.Point(a.left+i,t>0?a.bottom:a.top));e.setLayoutVectorOut(new r.Vector(0,t));if(!o.length)return;o.forEach(function(t){var e=t.getContentBox();t.setLayoutTransform(new r.Matrix);t.setVertexIn(new r.Point(e.left,e.cy));t.setLayoutVectorIn(new r.Vector(1,0))});this.align(o,"left");this.stack(o,"y");var g=0;g+=a.left;g+=i;g+=o[0].getStyle("margin-left");var h=0;if(t>0){h+=a.bottom;h+=e.getStyle("margin-bottom");h+=o[0].getStyle("margin-top")}else{h-=this.getTreeBox(o).bottom;h+=a.top;h-=e.getStyle("margin-top");h-=o[0].getStyle("margin-bottom")}this.move(o,g,h)},getOrderHint:function(t){var e=[];var o=t.getLayoutBox();var n=t.getLevel()>1?3:5;e.push({type:"up",node:t,area:new r.Box({x:o.x,y:o.top-t.getStyle("margin-top")-n,width:o.width,height:t.getStyle("margin-top")}),path:["M",o.x,o.top-n,"L",o.right,o.top-n]});e.push({type:"down",node:t,area:new r.Box({x:o.x,y:o.bottom+n,width:o.width,height:t.getStyle("margin-bottom")}),path:["M",o.x,o.bottom+n,"L",o.right,o.bottom+n]});return e}}))}});