define(function(e,t,r){var a=e("../core/kity");var i=e("../core/utils");var n=e("../core/minder");var s=e("../core/node");var o=e("../core/command");var c=e("../core/module");var h=e("../core/render");c.register("PriorityModule",function(){var e=this;var t=[null,["#FF1200","#840023"],["#0074FF","#01467F"],["#00AF00","#006300"],["#FF962E","#B25000"],["#A464FF","#4720C4"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"]];var r="M0,13c0,3.866,3.134,7,7,7h6c3.866,0,7-3.134,7-7V7H0V13z";var n="M20,10c0,3.866-3.134,7-7,7H7c-3.866,0-7-3.134-7-7V7c0-3.866,3.134-7,7-7h6c3.866,0,7,3.134,7,7V10z";var s="priority";var c=a.createClass("PriorityIcon",{base:a.Group,constructor:function(){this.callBase();this.setSize(20);this.create();this.setId(i.uuid("node_priority"))},setSize:function(e){this.width=this.height=e},create:function(){var e,t,i,s;e=(new a.Path).setPathData(n).fill("white");t=(new a.Path).setPathData(r).setTranslate(.5,.5);i=(new a.Path).setPathData(n).setOpacity(.8).setTranslate(.5,.5);s=(new a.Text).setX(this.width/2-.5).setY(this.height/2).setTextAnchor("middle").setVerticalAlign("middle").setFontItalic(true).setFontSize(12).fill("white");this.addShapes([t,i,s]);this.mask=i;this.back=t;this.number=s},setValue:function(e){var r=this.back,a=this.mask,i=this.number;var n=t[e];if(n){r.fill(n[1]);a.fill(n[0])}i.setContent(e)}});var l=a.createClass("SetPriorityCommand",{base:o,execute:function(e,t){var r=e.getSelectedNodes();for(var a=0;a<r.length;a++){r[a].setData(s,t||null).render()}e.layout()},queryValue:function(e){var t=e.getSelectedNodes();var r;for(var a=0;a<t.length;a++){r=t[a].getData(s);if(r)break}return r||null},queryState:function(e){return e.getSelectedNodes().length?0:-1}});return{commands:{priority:l},renderers:{left:a.createClass("PriorityRenderer",{base:h,create:function(e){return new c},shouldRender:function(e){return e.getData(s)},update:function(e,t,r){var i=t.getData(s);var n=t.getStyle("space-left"),o,c;e.setValue(i);o=r.left-e.width-n;c=-e.height/2;e.setTranslate(o,c);return new a.Box({x:o,y:c,width:e.width,height:e.height})}})}}})});