define(function(e,t,r){var n=e("../core/kity");var o=e("../core/utils");var a=e("../core/minder");var c=e("../core/node");var u=e("../core/command");var l=e("../core/module");var d=e("./text");function f(e,t){return e.getData(t)||e.getStyle(t)}d.registerStyleHook(function(e,t){var r=e.getData("color");var n=e.getStyle("selected-color");var o=e.getStyle("color");var a=r||(e.isSelected()&&n?n:o);var c=f(e,"font-family");var u=f(e,"font-size");t.fill(a);t.eachItem(function(e,t){t.setFont({family:c,size:u})})});l.register("fontmodule",{commands:{forecolor:n.createClass("fontcolorCommand",{base:u,execute:function(e,t){var r=e.getSelectedNodes();r.forEach(function(e){e.setData("color",t);e.render()})},queryState:function(e){return e.getSelectedNodes().length===0?-1:0},queryValue:function(e){if(e.getSelectedNodes().length==1){return e.getSelectedNodes()[0].getData("color")}return"mixed"}}),background:n.createClass("backgroudCommand",{base:u,execute:function(e,t){var r=e.getSelectedNodes();r.forEach(function(e){e.setData("background",t);e.render()})},queryState:function(e){return e.getSelectedNodes().length===0?-1:0},queryValue:function(e){if(e.getSelectedNodes().length==1){return e.getSelectedNodes()[0].getData("background")}return"mixed"}}),fontfamily:n.createClass("fontfamilyCommand",{base:u,execute:function(e,t){var r=e.getSelectedNodes();r.forEach(function(r){r.setData("font-family",t);r.render();e.layout()})},queryState:function(e){return e.getSelectedNodes().length===0?-1:0},queryValue:function(e){var t=e.getSelectedNode();if(t)return t.getData("font-family");return null}}),fontsize:n.createClass("fontsizeCommand",{base:u,execute:function(e,t){var r=e.getSelectedNodes();r.forEach(function(r){r.setData("font-size",t);r.render();e.layout(300)})},queryState:function(e){return e.getSelectedNodes().length===0?-1:0},queryValue:function(e){var t=e.getSelectedNode();if(t)return t.getData("font-size");return null}})}})});