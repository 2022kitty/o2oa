define(function(e,i,t){var n=e("./kity");var r=e("./utils");var s=e("./minder");function c(e,i,t){i.split(" ").forEach(function(i){e.addEventListener(i,t,false)})}s.registerInitHook(function(e){this.setDefaultOptions({enableKeyReceiver:true});if(this.getOption("enableKeyReceiver")){this.on("paperrender",function(){this._initKeyReceiver()})}});n.extendClass(s,{_initKeyReceiver:function(){if(this._keyReceiver)return;var e=this._keyReceiver=document.createElement("input");e.classList.add("km-receiver");var i=this._renderTarget;i.appendChild(e);var t=this;c(e,"keydown keyup keypress copy paste blur focus input",function(i){switch(i.type){case"blur":t.blur();break;case"focus":t.focus();break;case"input":e.value=null;break}t._firePharse(i);i.preventDefault()});this.on("focus",function(){e.select();e.focus()});this.on("blur",function(){e.blur()});if(this.isFocused()){e.select();e.focus()}}})});