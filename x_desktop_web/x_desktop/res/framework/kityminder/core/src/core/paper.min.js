define(function(e,t,r){var i=e("./kity");var n=e("./utils");var s=e("./minder");s.registerInitHook(function(){this._initPaper()});i.extendClass(s,{_initPaper:function(){this._paper=new i.Paper;this._paper._minder=this;this._paper.getNode().ondragstart=function(e){e.preventDefault()};this._paper.shapeNode.setAttribute("transform","translate(0.5, 0.5)");this._addRenderContainer();this.setRoot(this.createNode());if(this._options.renderTo){this.renderTo(this._options.renderTo)}},_addRenderContainer:function(){this._rc=(new i.Group).setId(n.uuid("minder"));this._paper.addShape(this._rc)},renderTo:function(e){if(typeof e=="string"){e=document.querySelector(e)}if(e){if(e.tagName.toLowerCase()=="script"){var t=document.createElement("div");t.id=e.id;t.class=e.class;e.parentNode.insertBefore(t,e);e.parentNode.removeChild(e);e=t}e.classList.add("km-view");this._paper.renderTo(this._renderTarget=e);this._bindEvents();this.fire("paperrender")}return this},getRenderContainer:function(){return this._rc},getPaper:function(){return this._paper},getRenderTarget:function(){return this._renderTarget}})});