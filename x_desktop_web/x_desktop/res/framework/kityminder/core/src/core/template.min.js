define(function(e,t,n){var a=e("./kity");var r=e("./utils");var u=e("./minder");var o=e("./command");var i=e("./node");var l=e("./module");var m={};function p(e,t){m[e]=t}t.register=p;r.extend(u,{getTemplateList:function(){return m}});a.extendClass(u,function(){var e=u.prototype.getTheme;return{useTemplate:function(e,t){this.setTemplate(e);this.refresh(t||800)},getTemplate:function(){return this._template||"default"},setTemplate:function(e){this._template=e||null},getTemplateSupport:function(e){var t=m[this.getTemplate()];return t&&t[e]},getTheme:function(t){var n=this.getTemplateSupport("getTheme")||e;return n.call(this,t)}}}());a.extendClass(i,function(){var e=i.prototype.getLayout;var t=i.prototype.getConnect;return{getLayout:function(){var t=this.getMinder().getTemplateSupport("getLayout")||e;return t.call(this,this)},getConnect:function(){var e=this.getMinder().getTemplateSupport("getConnect")||t;return e.call(this,this)}}}());l.register("TemplateModule",{commands:{template:a.createClass("TemplateCommand",{base:o,execute:function(e,t){e.useTemplate(t);e.execCommand("camera")},queryValue:function(e){return e.getTemplate()||"default"}})}})});