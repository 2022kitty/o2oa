define(function(t,e,a){var r=t("../core/kity");var o=t("../core/connect");var n=(new r.Marker).pipe(function(){var t=7;var e=new r.Circle(t-1);this.addShape(e);this.setRef(t-1,0).setViewBox(-t,-t,t+t,t+t).setWidth(t).setHeight(t);this.dot=e;this.node.setAttribute("markerUnits","userSpaceOnUse")});o.register("arc_tp",function(t,e,a,o,i){var s=t.getLayoutBox(),h=e.getLayoutBox();var c=t.getIndex();var v=e.getChildren()[c+1];if(t.getIndex()>0){h=e.getChildren()[c-1].getLayoutBox()}var x,d,g;var p=Math.abs;var u=[];var M=s.x>h.x?"right":"left";t.getMinder().getPaper().addResource(n);x=new r.Point(h.cx,h.cy);d=new r.Point(s.cx,s.cy);var y=Math.sqrt(Math.pow(x.x-d.x,2)+Math.pow(x.y-d.y,2));y=t.getIndex()==0?y*.4:y;g=r.Vector.fromPoints(x,d);u.push("M",x);u.push("A",y,y,0,0,1,d);a.setMarker(n);n.dot.fill(i);a.setPathData(u);if(v&&v.getConnection()){var f=v.getConnection();var w=v.getLayoutBox();var l=new r.Point(w.cx,w.cy);var P=Math.sqrt(Math.pow(d.x-l.x,2)+Math.pow(d.y-l.y,2));u=[];u.push("M",d);u.push("A",P,P,0,0,1,l);f.setMarker(n);n.dot.fill(i);f.setPathData(u)}})});