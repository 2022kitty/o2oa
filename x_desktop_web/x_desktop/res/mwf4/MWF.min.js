MWF=window.MWF||{};MWF.requiredModules=[];MWF.defaultPath="/res/mwf4/package";MWF.language="zh-cn";MWF.languagePackageStatus="uninitialized";MWF.splitStr=/(,\s*){1}|(;\s*){1}/g;MWF.macro={temp:{}};MWF.require=function(e,t,r,n){if(MWF.requiredModules.indexOf(e)!=-1){if(typeOf(t).toLowerCase()=="function"){t()}else{MWF.runCallback(t,"onSuccess")}return}var i=e.split(".");if(i[i.length-1]=="*"){i[i.length-1]="package"}i.shift();var a=this.defaultPath;if(n){a+="/"+i.join("/")+".min.js"}else{a+="/"+i.join("/")+".js"}var o=true;if(r===false){o=false}if(!layout.debugger){a=a.replace(/\.js/,".min.js")}a=a.indexOf("?")!=-1?a+"&v="+COMMON.version:a+"?v="+COMMON.version;var s=new Request({url:a,async:o,method:"get",onSuccess:function(r,n){try{MWF.requiredModules.push(e)}catch(e){MWF.runCallback(t,"onFailure",e);return}if(typeOf(t).toLowerCase()=="function"){t()}else{MWF.runCallback(t,"onSuccess")}},onFailure:function(e){MWF.runCallback(t,"onRequestFailure",e)}});s.send()};MWF.loadLP=function(e){var t=this.defaultPath;t=t+"/lp/"+e+".js";var r=new Request({url:t,async:false,method:"get",onSuccess:function(e,t){var r=e;try{Browser.exec(r)}catch(e){}},onFailure:function(e){throw"MWF.loadLP Error: "+e.responseText}});r.send()};MWF.runCallback=function(e,t,r){if(typeOf(e).toLowerCase()=="object"){if(e[t]){e[t].apply(e,r)}}};MWF.getCenterPosition=function(e,t,r){var n=$(e).getPosition();var i=$(e).getSize();var a=$("layout")?$("layout").getSize():$(document.body).getSize();var o=(n.y+i.y)/2-r/2;var s=(n.x+i.x)/2-t/2;if(s+t>a.x){s=a.x-t-10}if(o+r>a.y){o=a.y-r-10}return{x:s,y:o}};MWF.getMarkSize=function(e){if(!e){var t=$(document.body).getSize();var r=$(window).getSize();var n=t.y;var i=t.x;if(n<r.y)n=r.y;if(i<r.x)i=r.x;return{x:t.x,y:n}}else{var t=$(e).getSize();return{x:t.x,y:t.y}}};MWF.json=function(e,t){var r=JSON.decode(e);var n=t.split(".");var i=r;n.each(function(e){if(e.indexOf("[")!=-1){var t=e.split("[");var r=parseInt(t[1].substr(0,t[1].indexOf("]")));i=i[t[0]][r]}else{i=i[e]}});return i};MWF.getHTMLTemplate=function(e,t,r){var n=true;if(r===false){n=false}var i=new Request.HTML({url:e,async:n,method:"get",onSuccess:function(e,r,n,i){if(typeOf(t).toLowerCase()=="function"){t(e,r,n,i)}else{MWF.runCallback(t,"onSuccess",[e,r,n,i])}}.bind(this),onFailure:function(e){MWF.runCallback(t,"onRequestFailure",[e])}});i.send()};MWF.getRequestText=function(e,t,r){var n=true;if(r===false){n=false}e=e.indexOf("?")!=-1?e+"&v="+COMMON.version:e+"?v="+COMMON.version;var i=new Request({url:e,async:n,method:"get",onSuccess:function(e,r){if(typeOf(t).toLowerCase()=="function"){t(e,r)}else{MWF.runCallback(t,"onSuccess",[e,r])}}.bind(this),onFailure:function(e){MWF.runCallback(t,"onRequestFailure",[e])}});i.send()};MWF.getJSONP=function(e,t,r,n){var i=true;if(r===false){i=false}var a=n||"callback";e=e.indexOf("?")!=-1?e+"&v="+COMMON.version:e+"?v="+COMMON.version;var o=new Request.JSONP({url:e,secure:false,method:"get",noCache:true,async:i,callbackKey:a,onSuccess:function(e,r){if(typeOf(t).toLowerCase()=="function"){t(e,r)}else{MWF.runCallback(t,"onSuccess",[e,r])}}.bind(this),onFailure:function(e){MWF.runCallback(t,"onRequestFailure",[e])}.bind(this),onError:function(e,r){MWF.runCallback(t,"onError",[e,r])}.bind(this)});o.send()};MWF.getJSON=function(e,t,r,n,i){var a=true;if(r===false){a=false}var o=true;if(n===false){o=false}var s=false;if(i===true){s=true}e=e.indexOf("?")!=-1?e+"&v="+COMMON.version:e+"?v="+COMMON.version;var u=new Request.JSON({url:e,secure:false,method:"get",noCache:s,async:a,withCredentials:o,onSuccess:function(e,r){if(typeOf(t).toLowerCase()=="function"){t(e,r)}else{MWF.runCallback(t,"onSuccess",[e,r])}}.bind(this),onFailure:function(e){MWF.runCallback(t,"onRequestFailure",[e])}.bind(this),onError:function(e,r){MWF.runCallback(t,"onError",[e,r])}.bind(this)});u.send()};MWF.restful=function(e,t,r,n,i,a){var o=true;if(i===false){o=false}var s=true;if(a===false){s=false}t=t.indexOf("?")!=-1?t+"&v="+COMMON.version:t+"?v="+COMMON.version;var u=new Request.JSON({url:t,secure:false,method:e,emulation:false,noCache:true,async:o,withCredentials:s,onSuccess:function(e,t){if(typeOf(n).toLowerCase()=="function"){n(e,t)}else{MWF.runCallback(n,"onSuccess",[e,t])}}.bind(this),onFailure:function(e){MWF.runCallback(n,"onRequestFailure",[e])}.bind(this),onError:function(e,t){MWF.runCallback(n,"onError",[e,t])}.bind(this)});u.setHeader("Content-Type","application/json; charset=utf-8");u.send(r)};MWF.encodeJsonString=function(e){var t=[e];var r=JSON.encode(t);return r.substr(2,r.length-4)};MWF.decodeJsonString=function(e){var t='["'+e+'"]';var r=JSON.decode(t);return r[0]};MWF.getTextSize=function(e,t){var r=new Element("span",{text:e,styles:t}).inject($(document.body));var n=r.getSize();r.destroy();return n};MWF.getCenter=function(e,t){if(!t)t=document.body;var r=t.getSize();var n=t.getPosition();var i=t.getScroll();var a=r.x/2;var o=r.y/2;a=a-e.x/2;o=o-e.y/2;a=a+n.x;o=o+n.y;a=a+i.x;o=o+i.y;return{x:a,y:o}};MWF.getParent=function(e,t){var r=e.parentElement;while(r&&r.tagName.toString().toLowerCase()!=t.toString().toLowerCase()){r=r.parentElement}return r};MWF.getOffset=function(e){if(Browser.name=="firefox"){var t={offsetX:e.layerX,offsetY:e.layerY};return t}else{return{offsetX:e.offsetX,offsetY:e.offsetY}}};String.implement({getAllIndexOf:function(e){var t=[];var r=this.indexOf(e);while(r!=-1){t.push(r);var r=this.indexOf(e,r+1)}return t}});Array.implement({trim:function(){var e=[];this.each(function(t){if(t)e.push(t)});return v}});Element.implement({appendHTML:function(e,t){if(this.insertAdjacentHTML){var r="beforeEnd";if(t=="before")r="beforeBegin";if(t=="after")r="afterEnd";if(t=="bottom")r="beforeEnd";if(t=="top")r="afterBegin";this.insertAdjacentHTML(r,e)}else{if(t=="bottom")this.innerHTML=this.innerHTML+e;if(t=="top")this.innerHTML=e+this.innerHTML}},positionTo:function(e,t){var r=e.toFloat();var n=t.toFloat();var i=this.getOffsetParent();if(i){var a=i.getPosition();r=r-a.x;n=n-a.y}this.setStyles({top:n,left:r});return this},getBorder:function(){var e=["top","left","right","bottom"];var t=["color","style","width"];var r={};e.each(function(e){t.each(function(t){var n="border-"+e+"-"+t;r[n]=this.getStyle(n)}.bind(this))}.bind(this));return r},isOutside:function(e){var t=this.getCoordinates();var r=this.getCoordinates();if((e.page.x<t.left||e.page.x>t.left+t.width||(e.page.y<t.top||e.page.y>t.top+t.height))&&(e.page.x<r.left||e.page.x>r.left+r.width||(e.page.y<r.top||e.page.y>r.top+r.height)))return true;return false},getAbsolutePosition:function(){var e=0;var t=0;var r=this;e=r.offsetLeft;t=r.offsetTop;r=r.parentElement;while(r&&r.tagName.toString().toLowerCase()!="body"){e+=r.offsetLeft;t+=r.offsetTop;r=r.offsetParent}return{x:e,y:t}},tweenScroll:function(e,t){if(!this.tweenScrollQueue){this.tweenScrollQueue=[]}if(this.tweenScrollQueue.length){this.tweenScrollQueue.push(e)}else{this.tweenScrollQueue.push(e);this.doTweenScrollQueue(t)}},doTweenScrollQueue:function(e){if(this.tweenScrollQueue.length){var t=this.tweenScrollQueue.length;var r=this.tweenScrollQueue[this.tweenScrollQueue.length-1];var n=this.getScroll();var i=r-n.y;var a=i/e;var o=0;var s=0;var u=window.setInterval(function(){this.scrollTo(0,n.y+o*a);o++;if(o>e){window.clearInterval(u);for(var r=1;r<=t;r++)this.tweenScrollQueue.shift();if(this.tweenScrollQueue.length)this.doTweenScrollQueue(e)}}.bind(this),1)}},isPointIn:function(e,t,r,n){if(!r)r=0;if(!n)n=0;var i=this.getPosition();var a=this.getSize();return i.x-r<=e&&i.x+a.x+r>=e&&i.y-n<=t&&i.y+a.y+n>=t},isInPointInRect:function(e,t,r,n){var i=this.getPosition();var a=this.getSize();var o={x:i.x,y:i.y};var s={x:i.x+a.x,y:i.y};var u={x:i.x+a.x,y:i.y+a.y};var f={x:i.x,y:i.y+a.y};var l={x:Math.min(e,r),y:Math.min(t,n)};var c={x:Math.max(e,r),y:Math.max(t,n)};if(o.x>=l.x&&o.y>=l.y&&o.x<=c.x&&o.y<=c.y)return true;if(s.x>=l.x&&s.y>=l.y&&s.x<=c.x&&s.y<=c.y)return true;if(u.x>=l.x&&u.y>=l.y&&u.x<=c.x&&u.y<=c.y)return true;if(f.x>=l.x&&f.y>=l.y&&f.x<=c.x&&f.y<=c.y)return true;if(u.x>=l.x&&u.y>=l.y&&o.x<=l.x&&o.y<=l.y)return true;if(u.x>=c.x&&u.y>=c.y&&o.x<=c.x&&o.y<=c.y)return true;if(o.x<=l.x&&s.x>=l.x&&o.y>=l.y&&f.y<=c.y)return true;if(o.y<=l.y&&f.y>=l.y&&o.x>=l.x&&s.x<=c.x)return true;return false},getUsefulSize:function(){var e=this.getSize();var t=this.getStyle("border-left").toInt();var r=this.getStyle("border-bottom").toInt();var n=this.getStyle("border-top").toInt();var i=this.getStyle("border-right").toInt();var a=this.getStyle("padding-left").toInt();var o=this.getStyle("padding-bottom").toInt();var s=this.getStyle("padding-top").toInt();var u=this.getStyle("padding-right").toInt();var f=e.x-a-u;var l=e.y-s-o;return{x:f,y:l}},clearStyles:function(e){this.removeProperty("style");if(e){var t=this.getFirst();while(t){t.clearStyles(e);t=t.getNext()}}}});Object.copy=function(e,t){Object.each(e,function(e,r){switch(typeOf(e)){case"object":Object.copy(e,t[r]);break;default:t[r]=e}})};JSON.format=function(e){var t=this.parseJsonString(0,"",e);return t.substring(0,t.length-2)};JSON.parseJsonString=function(e,t,r){var n="";for(var i=0;i<e;i++)n+="\t";var a=t;if(a)a='"'+a+'": ';var o="";var s=e+1;switch(typeOf(r)){case"object":var u=n+a+"{";var f=n+"}";for(x in r){o+=this.parseJsonString(s,x,r[x])}o=u+"\n"+o.substring(0,o.length-2)+"\n"+f+",\n";break;case"array":var u=n+a+"[";var f=n+"]";r.each(function(e,t){o+=this.parseJsonString(s,"",e)}.bind(this));o=u+"\n"+o.substring(0,o.length-2)+"\n"+f+",\n";break;case"string":o+=n+a+'"'+r+'",\n';break;case"date":o+=n+a+'"'+r+'",\n';break;default:o+=n+a+r+",\n"}return o};Slick.definePseudo("src",function(e){return Element.get(this,"src").indexOf(e)!=-1});Slick.definePseudo("srcarr",function(e){var t=e.split(",");var r=Element.get(this,"src");var n=false;for(var i=0;i<t.length;i++){if(r.indexOf(t[i])!=-1){n=true;break}}return n});Slick.definePseudo("ahref",function(e){var t=Element.get(this,"href");if(!t)t="";t=t.toString().toLowerCase();return t.indexOf(e)!=-1});Slick.definePseudo("rowspanBefore",function(e){var t=MWF.getParent(this,"tr");var r=this.get("rowspan").toInt()||1;var n=t.rowIndex.toInt();return r>1&&n<e.toInt()&&n+r-1>=e});Slick.definePseudo("rowspan",function(){var e=this.get("rowspan").toInt()||1;return e>1});Slick.definePseudo("colspanBefore",function(e){var t=MWF.getParent(this,"tr");var r=this.get("colspan").toInt()||1;var n=this.cellIndex.toInt();return r>1&&n<e.toInt()&&n+r-1>=e.toInt()});Slick.definePseudo("colspan",function(){var e=this.get("colspan").toInt()||1;return e>1});MWF.common=MWF.common||{};MWF.common.getResponseTextPost=function(e,t,r){var n="";var i={url:e,async:false,data:t,method:"post",onSuccess:function(e,t,r,i){n=r}};var a=new Request.HTML(i);a.send();return n};MWF.common.getResponseText=function(e){var t="";var r={url:e,async:false,method:"get",onSuccess:function(e,r,n,i){t=n}};var n=new Request.HTML(r);n.send();return t};MWF.common.toDate=function(e){var t=e.split(" ");if(!t[1])t.push("0:0:0");var r=t[0].split("-");var n=t[1].split(":");return new Date(r[0],parseInt(r[1])-1,r[2],n[0],n[1],n[2])};MWF.release=function(e){var t=typeOf(e);switch(t){case"object":for(var r in e){e[r]=null}break;case"array":for(var n=0;n<e.length;n++){if(e[n])e[n]=null}break}};MWF.grayscale=function(e){try{var t=document.createElement("canvas");var r=t.getContext("2d");var n=new Image;n.src=e;t.width=n.width;t.height=n.height;r.drawImage(n,0,0);var i=r.getImageData(0,0,t.width,t.height);for(var a=0;a<i.height;a++){for(var o=0;o<i.width;o++){var s=a*4*i.width+o*4;var u=(i.data[s]+i.data[s+1]+i.data[s+2])/3;i.data[s]=u;i.data[s+1]=u;i.data[s+2]=u}}r.putImageData(i,0,0,0,0,i.width,i.height);var e=t.toDataURL();t.destroy();return{status:"success",src:e}}catch(t){return{status:"error",src:e}}};MWF.defineProperties=Object.defineProperties||function(e,t){function r(t){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return typeof e==="function"}if(typeof t!=="object"||t===null)throw new TypeError("bad desc");var i={};if(r(t,"enumerable"))i.enumerable=!!e.enumerable;if(r(t,"configurable"))i.configurable=!!e.configurable;if(r(t,"value"))i.value=e.value;if(r(t,"writable"))i.writable=!!t.writable;if(r(t,"get")){var a=t.get;if(!n(a)&&typeof a!=="undefined")throw new TypeError("bad get");i.get=a}if(r(t,"set")){var o=t.set;if(!n(o)&&typeof o!=="undefined")throw new TypeError("bad set");i.set=o}if(("get"in i||"set"in i)&&("value"in i||"writable"in i))throw new TypeError("identity-confused descriptor");return i}if(typeof e!=="object"||e===null)throw new TypeError("bad obj");t=Object(t);var n=Object.keys(t);var i=[];for(var a=0;a<n.length;a++)i.push([n[a],r(t[n[a]])]);for(var a=0;a<i.length;a++)Object.defineProperty(e,i[a][0],i[a][1]);return e};