MWF.xDesktop=MWF.xDesktop||{};MWF.xApplication=MWF.xApplication||{};MWF.xDesktop.requireApp("Organization","Actions.RestActions",null,false);MWF.xDesktop.Access=MWF.AC={companyList:null,action:null,isAdministrator:function(){return layout.desktop.session.user.name.toLowerCase()=="xadmin"||layout.desktop.session.user.roleList.indexOf("Manager")!=-1},isGroupCreator:function(){if(!layout.desktop.session.user.roleList)return false;return layout.desktop.session.user.roleList.indexOf("GroupCreator")!=-1},isCompanyCreator:function(){if(!layout.desktop.session.user.roleList)return false;return layout.desktop.session.user.roleList.indexOf("CompanyCreator")!=-1},isProcessPlatformCreator:function(){if(this.isAdministrator())return true;if(!layout.desktop.session.user.roleList)return false;return layout.desktop.session.user.roleList.indexOf("ProcessPlatformCreator")!=-1},isApplicationManager:function(s){if(this.isAdministrator()){if(s.yes)s.yes()}else{}},isMeetingAdministrator:function(){return this.isAdministrator()||layout.desktop.session.user.roleList.indexOf("MeetingManager")!=-1},isPersonManager:function(){if(!layout.desktop.session.user.roleList)return false;return layout.desktop.session.user.roleList.indexOf("PersonManager")!=-1},isPersonEditor:function(s){if(this.isAdministrator())return true;if(this.isPersonManager())return true;if(s.list&&s.list.length){if(s.list.indexOf(layout.desktop.session.user.id)!=-1)return true}return false},isCompanyEditor:function(s){if(this.isAdministrator()){if(s.yes)s.yes()}else if(this.isCompanyCreator()){if(s.yes)s.yes()}else{this.getCompanyList(function(){if(s.id){if(this.companyList.indexOf(s.id)!=-1){if(s.yes)s.yes()}else{if(s.no)s.no()}}else{if(this.companyList.length>0){if(s.yes)s.yes()}else{if(s.no)s.no()}}}.bind(this))}},isDepartmentEditor:function(s){if(this.isAdministrator()){if(s.yes)s.yes()}else if(this.isCompanyCreator()){if(s.yes)s.yes()}else{this.getCompanyList(function(){if(s.id){if(this.companyList.indexOf(s.id)!=-1){if(s.yes)s.yes()}else{if(s.no)s.no()}}else{if(s.no)s.no()}}.bind(this))}},getCompanyList:function(s){if(this.companyList===null){this.getAction();this.action.getCompanyAccess(function(i){if(i.data){this.companyList=i.data}else{this.companyList=[]}if(s)s()}.bind(this),null,layout.desktop.session.user.id)}else{if(s)s()}},getAction:function(){if(!this.action)this.action=new MWF.xApplication.Organization.Actions.RestActions}};