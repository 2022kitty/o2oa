MWF.xApplication.cms=MWF.xApplication.cms||{};MWF.xDesktop.requireApp("cms.Column","Actions.RestActions",null,false);MWF.xApplication.cms.Column.Main=new Class({Extends:MWF.xApplication.Common.Main,Implements:[Options,Events],options:{style:"default",name:"cms.Column",icon:"icon.png",width:"1000",height:"600",isResize:false,isMax:true,title:MWF.xApplication.cms.Column.LP.title,tooltip:{description:MWF.xApplication.cms.Column.LP.description,column:{title:MWF.xApplication.cms.Column.LP.column.title,create:MWF.xApplication.cms.Column.LP.column.create,nameLabel:MWF.xApplication.cms.Column.LP.column.nameLabel,aliasLabel:MWF.xApplication.cms.Column.LP.column.aliasLabel,descriptionLabel:MWF.xApplication.cms.Column.LP.column.descriptionLabel,sortLabel:MWF.xApplication.cms.Column.LP.column.sortLabel,iconLabel:MWF.xApplication.cms.Column.LP.column.iconLabel,cancel:MWF.xApplication.cms.Column.LP.column.cancel,ok:MWF.xApplication.cms.Column.LP.column.ok,inputName:MWF.xApplication.cms.Column.LP.column.inputName,create_cancel_title:MWF.xApplication.cms.Column.LP.column.create_cancel_title,create_cancel:MWF.xApplication.cms.Column.LP.column.create_cancel,noDescription:MWF.xApplication.cms.Column.LP.column.noDescription,delete:MWF.xApplication.cms.Column.LP.column.delete,edit:MWF.xApplication.cms.Column.LP.column.edit},category:{title:MWF.xApplication.cms.Column.LP.category.title,create:MWF.xApplication.cms.Column.LP.category.create,nameLabel:MWF.xApplication.cms.Column.LP.category.nameLabel,aliasLabel:MWF.xApplication.cms.Column.LP.category.aliasLabel,descriptionLabel:MWF.xApplication.cms.Column.LP.category.descriptionLabel,sortLabel:MWF.xApplication.cms.Column.LP.category.sortLabel,iconLabel:MWF.xApplication.cms.Column.LP.category.iconLabel,columnLabel:MWF.xApplication.cms.Column.LP.category.columnLabel,cancel:MWF.xApplication.cms.Column.LP.category.cancel,ok:MWF.xApplication.cms.Column.LP.category.ok,inputName:MWF.xApplication.cms.Column.LP.category.inputName,create_cancel_title:MWF.xApplication.cms.Column.LP.category.create_cancel_title,create_cancel:MWF.xApplication.cms.Column.LP.category.create_cancel,noDescription:MWF.xApplication.cms.Column.LP.category.noDescription,edit:MWF.xApplication.cms.Column.LP.category.edit}}},onQueryLoad:function(){this.lp=MWF.xApplication.cms.Column.LP;this.defaultColumnIcon="/x_component_cms_Column/$Main/"+this.options.style+"/icon/column.png";this.defaultCategoryIcon="/x_component_cms_Column/$Main/"+this.options.style+"/icon/category2.png"},loadApplication:function(e){if(!this.restActions)this.restActions=new MWF.xApplication.cms.Column.Actions.RestActions;this.columns=[];this.categorys=[];this.deleteElements=[];this.createNode();this.loadApplicationContent();if(e)e()},loadApplicationContent:function(){this.loadToolbar();this.loadColumnArea();this.loadCategoryArea()},createNode:function(){this.content.setStyle("overflow","hidden");this.node=new Element("div",{styles:{width:"100%",height:"100%",overflow:"hidden"}}).inject(this.content)},loadToolbar:function(){this.toolbarAreaNode=new Element("div",{styles:this.css.toolbarAreaNode,text:this.options.tooltip.description}).inject(this.node)},createCreateAction:function(){this.createCategoryNode=new Element("div",{styles:this.css.createCategoryNode,title:this.options.tooltip.category.create}).inject(this.toolbarAreaNode);this.createCategoryNode.addEvent("click",function(){this.createCategory()}.bind(this))},loadColumnArea:function(){this.columnAreaNode=new Element("div",{styles:this.css.columnAreaNode}).inject(this.node);this.columnToolbarAreaNode=new Element("div",{styles:this.css.columnToolbarAreaNode}).inject(this.columnAreaNode);if(MWF.AC.isProcessPlatformCreator()){if(MWF.AC.isAdministrator()){this.createColumnNode=new Element("button",{styles:this.css.createColumnNode,text:this.options.tooltip.column.create}).inject(this.columnToolbarAreaNode);this.createColumnNode.addEvent("click",function(){this.createColumn()}.bind(this))}}this.columnToolbarTextNode=new Element("div",{styles:this.css.columnToolbarTextNode,text:this.options.tooltip.column.title}).inject(this.columnToolbarAreaNode);this.loadColumnContentArea()},loadColumnContentArea:function(){this.columnContentAreaNode=new Element("div",{styles:this.css.columnContentAreaNode}).inject(this.columnAreaNode);this.createColumnNodes()},createColumnNodes:function(){this.restActions.listColumn(function(e){var t=null;e.data.each(function(e){var e=new MWF.xApplication.cms.Column.Column(this,e);e.load();this.columns.push(e)}.bind(this))}.bind(this))},createColumn:function(e,t,o,i,a){var s=new MWF.xApplication.cms.Column.Column(this);s.createColumn(this.node)},loadCategoryArea:function(){this.categoryAreaNode=new Element("div",{styles:this.css.categoryAreaNode}).inject(this.node);this.categoryToolbarAreaNode=new Element("div",{styles:this.css.categoryToolbarAreaNode}).inject(this.categoryAreaNode);this.createCategoryNode=new Element("button",{styles:this.css.createCategoryNode,text:this.options.tooltip.category.create}).inject(this.categoryToolbarAreaNode);this.createCategoryNode.addEvent("click",function(){this.createCategory()}.bind(this));this.categoryToolbarTextNode=new Element("div",{styles:this.css.categoryToolbarTextNode,text:this.options.tooltip.category.title}).inject(this.categoryToolbarAreaNode);this.categoryContentAreaNode=new Element("div",{styles:this.css.categoryContentAreaNode}).inject(this.categoryAreaNode)},createCategory:function(){var e=new MWF.xApplication.cms.Column.Category(this);e.createCategory()}});MWF.xApplication.cms.Column.Category=new Class({Implements:[Options,Events],options:{bgColor:["#30afdc","#e9573e","#8dc153","#9d4a9c","#ab8465","#959801","#434343","#ffb400","#9e7698","#00a489"]},initialize:function(e,t,o){this.setOptions(o);this.app=e;this.data=t;this.isNew=false},load:function(){var e=this.data.cms_catagory_name;var t=this.data.cms_catagory_alias;var o=this.data.cms_catagory_description;var i=this.data.cms_catagory_order;var a=this.data.creator_uid;var s=this.data.cms_catagory_app_id;var n=this.data.cms_catagory_form_id;var c=this.data.cms_app_icon;if(!c||c=="")c=this.app.defaultCategoryIcon;var l=this.itemNode=new Element("div.categoryItem",{styles:this.app.css.categoryItemNode}).inject(this.container);l.store("name",e);l.setStyle("background-color",this.options.bgColor[(Math.random()*10).toInt()]);var r=new Element("div",{styles:this.app.css.categoryItemIconNode}).inject(l);r.setStyles({"background-image":"url("+c+")"});var d=new Element("div",{styles:this.app.css.categoryItemTextNode}).inject(l);var p=new Element("div",{styles:this.app.css.categoryItemTitleNode,text:e,title:t?e+" ("+t+") ":e}).inject(d);var h=o&&o!=""?o:this.app.options.tooltip.category.noDescription;var m=new Element("div",{styles:this.app.css.categoryItemDescriptionNode,text:h,title:h}).inject(d);var u=this;l.addEvents({mouseover:function(){if(!u.selected)this.setStyles(u.app.css.categoryItemNode_over)},mouseout:function(){if(!u.selected)this.setStyles(u.app.css.categoryItemNode)},click:function(){u.clickNode(u,this)}});if(MWF.AC.isProcessPlatformCreator()){if(a==layout.desktop.session.user.name||MWF.AC.isAdministrator()){this.delAdctionNode=new Element("div.delNode",{styles:this.app.css.categoryItemDelActionNode,title:this.app.options.tooltip.category.delete}).inject(l);l.addEvents({mouseover:function(){this.delAdctionNode.fade("in")}.bind(this),mouseout:function(){this.delAdctionNode.fade("out")}.bind(this)});this.delAdctionNode.addEvent("click",function(e){this.checkDeleteColumn(e);e.stopPropagation()}.bind(this))}}if(MWF.AC.isProcessPlatformCreator()){if(a==layout.desktop.session.user.name||MWF.AC.isAdministrator()){this.editAdctionNode=new Element("div.editNode",{styles:this.app.css.categoryItemEditActionNode,title:this.app.options.tooltip.category.edit}).inject(l);l.addEvents({mouseover:function(){this.editAdctionNode.fade("in")}.bind(this),mouseout:function(){this.editAdctionNode.fade("out")}.bind(this)});this.editAdctionNode.addEvent("click",function(e){this.edit(e);e.stopPropagation()}.bind(this))}}},clickNode:function(e,t){},createCategory:function(){this.createCategoryCreateMarkNode();this.createCategoryCreateAreaNode();this.createCategoryCreateNode();this.categoryCreateAreaNode.inject(this.categoryCreateMarkNode,"after");this.categoryCreateAreaNode.fade("in");$("createCategoryName").focus();this.setCategoryCreateNodeSize();this.setCategoryCreateNodeSizeFun=this.setCategoryCreateNodeSize.bind(this);this.addEvent("resize",this.setCategoryCreateNodeSizeFun)},createCategoryCreateMarkNode:function(){this.categoryCreateMarkNode=new Element("div",{styles:this.app.css.categoryCreateMarkNode,events:{mouseover:function(e){e.stopPropagation()},mouseout:function(e){e.stopPropagation()}}}).inject(this.app.node,"after")},createCategoryCreateAreaNode:function(){this.categoryCreateAreaNode=new Element("div",{styles:this.app.css.categoryCreateAreaNode})},createCategoryCreateNode:function(){this.categoryCreateNode=new Element("div",{styles:this.app.css.categoryCreateNode}).inject(this.categoryCreateAreaNode);this.categoryCreateNewNode=new Element("div",{styles:this.app.css.categoryCreateNewNode}).inject(this.categoryCreateNode);this.categoryCreateFormNode=new Element("div",{styles:this.app.css.categoryCreateFormNode}).inject(this.categoryCreateNode);var e='<table width="100%" height="80%" border="0" cellPadding="0" cellSpacing="0">'+'<tr><td style="height: 30px; line-height: 30px; text-align: left; min-width: 80px; width:25%">'+this.app.options.tooltip.category.nameLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createCategoryName" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px; text-align: left">'+this.app.options.tooltip.category.aliasLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createCategoryAlias" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.app.options.tooltip.category.descriptionLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createCategoryDescription" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.app.options.tooltip.category.sortLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createCategorySort" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.app.options.tooltip.category.columnLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createCategoryColumn" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;"/></td></tr>'+"</table>";this.categoryCreateFormNode.set("html",e);this.categoryCancelActionNode=new Element("div",{styles:this.app.css.categoryCreateCancelActionNode,text:this.app.options.tooltip.category.cancel}).inject(this.categoryCreateFormNode);this.categoryCreateOkActionNode=new Element("div",{styles:this.app.css.categoryCreateOkActionNode,text:this.app.options.tooltip.category.ok}).inject(this.categoryCreateFormNode);this.categoryCancelActionNode.addEvent("click",function(e){this.cancelCreateCategory(e)}.bind(this));this.categoryCreateOkActionNode.addEvent("click",function(e){this.okCreateCategory(e)}.bind(this))},setCategoryCreateNodeSize:function(){var e=this.app.node.getSize();var t=this.app.content.getSize();this.categoryCreateMarkNode.setStyles({width:""+t.x+"px",height:""+t.y+"px"});this.categoryCreateAreaNode.setStyles({width:""+e.x+"px",height:""+e.y+"px"});var o=e.y*.8;var i=e.y*.2/2;this.categoryCreateNode.setStyles({height:""+o+"px","margin-top":""+i+"px"});var a=this.categoryCreateNewNode.getSize();var s=o*.7;if(s>250)s=250;var n=o*.3/2-a.y;this.categoryCreateFormNode.setStyles({height:""+s+"px","margin-top":""+n+"px"})},cancelCreateCategory:function(e){var t=this;if($("createCategoryName").get("value")||$("createCategoryAlias").get("value")||$("createCategoryDescription").get("value")){this.confirm("warn",e,this.app.options.tooltip.category.create_cancel_title,this.app.options.tooltip.category.create_cancel,"320px","100px",function(){t.categoryCreateMarkNode.destroy();t.categoryCreateAreaNode.destroy();this.close()},function(){this.close()})}else{this.categoryCreateMarkNode.destroy();this.categoryCreateAreaNode.destroy()}},okCreateCategory:function(e){var t={name:$("createCategoryName").get("value"),alias:$("createCategoryAlias").get("value"),description:$("createCategoryDescription").get("value"),createCategorySort:$("createCategorySort").get("value"),createCategoryColumn:$("createCategoryColumn").get("value")};if(t.name){this.restActions.saveCategory(t,function(e){this.categoryCreateMarkNode.destroy();this.categoryCreateAreaNode.destroy();this.restActions.getCategory(e.data.id,function(e){e.data.processList=[];e.data.formList=[];var t=new MWF.xCategory.process.CategoryColumn.Category(this,e.data,{where:"top"});t.load();this.categorys.push(t)}.bind(this));if(this.app.noElementNode){}this.notice(this.options.tooltip.createCategorySuccess,"success")}.bind(this))}else{$("createCategoryName").setStyle("border-color","red");$("createCategoryName").focus();this.notice(this.options.tooltip.category.inputName,"error")}},checkDeleteCategory:function(){if(this.deleteElements.length){if(!this.deleteElementsNode){this.deleteElementsNode=new Element("div",{styles:this.app.css.deleteElementsNode,text:this.app.lp.category.deleteElements}).inject(this.node);this.deleteElementsNode.position({relativeTo:this.app.categoryContentNode,position:"centerTop",edge:"centerbottom"});this.deleteElementsNode.addEvent("click",function(e){this.deleteSelectedElements(e)}.bind(this))}}else{if(this.deleteElementsNode){this.deleteElementsNode.destroy();this.deleteElementsNode=null;delete this.deleteElementsNode}}}});MWF.xApplication.cms.Column.Column=new Class({Implements:[Options,Events],options:{bgColor:["#30afdc","#e9573e","#8dc153","#9d4a9c","#ab8465","#959801","#434343","#ffb400","#9e7698","#00a489"]},initialize:function(e,t,o){this.setOptions(o);this.app=e;this.container=this.app.columnContentAreaNode;this.data=t;this.isNew=false},load:function(){var e=this.data.cms_app;var t=this.data.cms_app_alias;var o=this.data.cms_app_memo;var i=this.data.creator_uid;var a=this.data.cms_app_icon;if(!a||a=="")a=this.app.defaultColumnIcon;var s=this.itemNode=new Element("div.columnItem",{styles:this.app.css.columnItemNode}).inject(this.container);s.store("columnName",e);var n=new Element("div",{styles:this.app.css.columnItemIconNode}).inject(s);n.setStyles({"background-image":"url("+a+")"});var c=new Element("div",{styles:this.app.css.columnItemTextNode}).inject(s);var l=new Element("div",{styles:this.app.css.columnItemTitleNode,text:e,title:t?e+" ("+t+") ":e}).inject(c);var r=o&&o!=""?o:this.app.options.tooltip.column.noDescription;var d=new Element("div",{styles:this.app.css.columnItemDescriptionNode,text:r,title:r}).inject(c);var p=this;s.addEvents({mouseover:function(){if(!p.selected)this.setStyles(p.app.css.columnItemNode_over)},mouseout:function(){if(!p.selected)this.setStyles(p.app.css.columnItemNode)},click:function(){p.clickColumnNode(p,this)}});if(MWF.AC.isProcessPlatformCreator()){if(i==layout.desktop.session.user.name||MWF.AC.isAdministrator()){this.delAdctionNode=new Element("div.delNode",{styles:this.app.css.columnItemDelActionNode,title:this.app.options.tooltip.column.delete}).inject(s);s.addEvents({mouseover:function(){this.delAdctionNode.fade("in")}.bind(this),mouseout:function(){this.delAdctionNode.fade("out")}.bind(this)});this.delAdctionNode.addEvent("click",function(e){this.checkDeleteColumn(e);e.stopPropagation()}.bind(this))}}if(MWF.AC.isProcessPlatformCreator()){if(i==layout.desktop.session.user.name||MWF.AC.isAdministrator()){this.editAdctionNode=new Element("div.editNode",{styles:this.app.css.columnItemEditActionNode,title:this.app.options.tooltip.column.edit}).inject(s);s.addEvents({mouseover:function(){this.editAdctionNode.fade("in")}.bind(this),mouseout:function(){this.editAdctionNode.fade("out")}.bind(this)});this.editAdctionNode.addEvent("click",function(e){this.edit(e);e.stopPropagation()}.bind(this))}}},clickColumnNode:function(e,t){e.app.columns.each(function(t){if(t.selected){t.itemNode.setStyles(e.app.css.columnItemNode)}});this.selected=true;t.setStyles(e.app.css.columnItemNode_select)},checkDeleteColumn:function(){if(this.deleteElements.length){if(!this.deleteElementsNode){this.deleteElementsNode=new Element("div",{styles:this.app.css.deleteElementsNode,text:this.app.lp.column.deleteElements}).inject(this.node);this.deleteElementsNode.position({relativeTo:this.container,position:"centerTop",edge:"centerbottom"});this.deleteElementsNode.addEvent("click",function(e){this.deleteSelectedElements(e)}.bind(this))}}else{if(this.deleteElementsNode){this.deleteElementsNode.destroy();this.deleteElementsNode=null;delete this.deleteElementsNode}}},edit:function(){this.isNew=false;this.createContainer=this.app.node;this.createColumnCreateMarkNode();this.createColumnCreateAreaNode();this.createColumnCreateNode();this.columnCreateAreaNode.inject(this.columnCreateMarkNode,"after");this.columnCreateAreaNode.fade("in");$("createColumnName").focus();this.setColumnCreateNodeSize();this.setColumnCreateNodeSizeFun=this.setColumnCreateNodeSize.bind(this);this.addEvent("resize",this.setColumnCreateNodeSizeFun)},createColumn:function(e){this.isNew=true;this.createContainer=e;this.createColumnCreateMarkNode();this.createColumnCreateAreaNode();this.createColumnCreateNode();this.columnCreateAreaNode.inject(this.columnCreateMarkNode,"after");this.columnCreateAreaNode.fade("in");$("createColumnName").focus();this.setColumnCreateNodeSize();this.setColumnCreateNodeSizeFun=this.setColumnCreateNodeSize.bind(this);this.addEvent("resize",this.setColumnCreateNodeSizeFun)},createColumnCreateMarkNode:function(){this.columnCreateMarkNode=new Element("div",{styles:this.app.css.columnCreateMarkNode,events:{mouseover:function(e){e.stopPropagation()},mouseout:function(e){e.stopPropagation()}}}).inject(this.createContainer,"after")},createColumnCreateAreaNode:function(){this.columnCreateAreaNode=new Element("div",{styles:this.app.css.columnCreateAreaNode})},createColumnCreateNode:function(){if(!this.isNew){var e=this.data.cms_app;var t=this.data.cms_app_alias;var o=this.data.cms_app_memo;var i=this.data.creator_uid;var a=this.data.cms_app_order;var s=this.data.cms_app_icon;if(!s||s=="")s=this.app.defaultColumnIcon}else{var e="";var t="";var o="";var a="";var i="";var s=""}this.columnCreateNode=new Element("div",{styles:this.app.css.columnCreateNode}).inject(this.columnCreateAreaNode);this.columnCreateNewNode=new Element("div",{styles:this.isNew?this.app.css.columnCreateNewNode:this.app.css.columnCreateEditNode}).inject(this.columnCreateNode);this.columnCreateFormNode=new Element("div",{styles:this.app.css.columnCreateFormNode}).inject(this.columnCreateNode);var n='<table width="100%" height="80%" border="0" cellPadding="0" cellSpacing="0">'+'<tr><td style="height: 30px; line-height: 30px; text-align: left; min-width: 80px; width:25%">'+this.app.options.tooltip.column.nameLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createColumnName" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;" value="'+e+'"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px; text-align: left">'+this.app.options.tooltip.column.aliasLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createColumnAlias" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;" value="'+t+'"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.app.options.tooltip.column.descriptionLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createColumnDescription" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;" value="'+o+'"/></td></tr>'+'<tr><td style="height: 30px; line-height: 30px;  text-align: left">'+this.app.options.tooltip.column.sortLabel+":</td>"+'<td style="; text-align: right;"><input type="text" id="createColumnSort" '+'style="width: 99%; border:1px solid #999; background-color:#FFF; border-radius: 3px; box-shadow: 0px 0px 6px #CCC; '+'height: 26px;" value="'+a+'"/></td></tr>'+"</table>";this.columnCreateFormNode.set("html",n);this.columnCancelActionNode=new Element("div",{styles:this.app.css.columnCreateCancelActionNode,text:this.app.options.tooltip.column.cancel}).inject(this.columnCreateFormNode);this.columnCreateOkActionNode=new Element("div",{styles:this.app.css.columnCreateOkActionNode,text:this.app.options.tooltip.column.ok}).inject(this.columnCreateFormNode);this.columnCancelActionNode.addEvent("click",function(e){this.cancelCreateColumn(e)}.bind(this));this.columnCreateOkActionNode.addEvent("click",function(e){this.okCreateColumn(e)}.bind(this))},setColumnCreateNodeSize:function(){var e=this.createContainer.getSize();var t=this.app.content.getSize();this.columnCreateMarkNode.setStyles({width:""+t.x+"px",height:""+t.y+"px"});this.columnCreateAreaNode.setStyles({width:""+e.x+"px",height:""+e.y+"px"});var o=e.y*.8;var i=e.y*.2/2;this.columnCreateNode.setStyles({height:""+o+"px","margin-top":""+i+"px"});var a=this.columnCreateNewNode.getSize();var s=o*.7;if(s>250)s=250;var n=o*.3/2-a.y;this.columnCreateFormNode.setStyles({height:""+s+"px","margin-top":""+n+"px"})},cancelCreateColumn:function(e){if(this.isNew){this.cancelNewColumn(e)}else{this.cancelEditColumn(e)}},cancelNewColumn:function(e){var t=this;if($("createColumnName").get("value")||$("createColumnAlias").get("value")||$("createColumnDescription").get("value")){this.app.confirm("warn",e,this.app.options.tooltip.column.create_cancel_title,this.app.options.tooltip.column.create_cancel,"320px","100px",function(){t.columnCreateMarkNode.destroy();t.columnCreateAreaNode.destroy();this.close()},function(){this.close()})}else{this.columnCreateMarkNode.destroy();this.columnCreateAreaNode.destroy()}},cancelEditColumn:function(e){this.columnCreateMarkNode.destroy();this.columnCreateAreaNode.destroy()},okCreateColumn:function(e){var t={name:$("createColumnName").get("value"),alias:$("createColumnAlias").get("value"),description:$("createColumnDescription").get("value"),createColumnSort:$("createColumnSort").get("value")};if(t.name){this.restActions.saveColumn(t,function(e){this.columnCreateMarkNode.destroy();this.columnCreateAreaNode.destroy();this.restActions.getColumn(e.data.id,function(e){e.data.processList=[];e.data.formList=[];var t=new MWF.xColumn.process.ColumnColumn.Column(this,e.data,{where:"top"});t.load();this.app.columns.push(t)}.bind(this));this.app.notice(this.options.tooltip.createColumnSuccess,"success")}.bind(this))}else{$("createColumnName").setStyle("border-color","red");$("createColumnName").focus();this.app.notice(this.app.options.tooltip.column.inputName,"error")}}});