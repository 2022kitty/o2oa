MWF.xApplication.Template=MWF.xApplication.Template||{};MWF.xApplication.Template.Actions=MWF.xApplication.Template.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.require("MWF.widget.UUID",null,false);MWF.xApplication.Template.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_attendance_assemble_control","x_component_Template");this.actionOrg=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_organization_assemble_express","x_component_Template")},getId:function(t,e,n,i){this.action.invoke({name:"getId",async:i,parameter:{count:t},success:e,failure:n})},getUUID:function(t){var e="";this.action.invoke({name:"getId",async:false,parameter:{count:"1"},success:function(n){e=n.data[0];if(t)t(e)},failure:null});return e},listCompanyByPerson:function(t,e,n,i){this.actionOrg.invoke({name:"listCompanyByPerson",async:i,parameter:{name:n},success:t,failure:e})},listDepartmentByPerson:function(t,e,n,i){this.actionOrg.invoke({name:"listDepartmentByPerson",async:i,parameter:{name:n},success:t,failure:e})},listDepartmentByCompany:function(t,e,n,i){this.actionOrg.invoke({name:"listDepartmentByCompany",async:i,parameter:{companyName:n},success:t,failure:e})},getHoliday:function(t,e,n){this.action.invoke({name:"getHoliday",parameter:{id:t},success:e,failure:n})},listHolidayAll:function(t,e,n){this.action.invoke({name:"listHolidayAll",async:n,success:t,failure:e})},listHolidayFilter:function(t,e,n,i){this.action.invoke({name:"listHolidayFilter",data:t,async:i,success:e,failure:n})},saveHoliday:function(t,e,n,i){this.action.invoke({name:"saveHoliday",data:t,async:i,parameter:{id:t.id},success:e,failure:n})},deleteHoliday:function(t,e,n,i){this.action.invoke({name:"deleteHoliday",async:i,parameter:{id:t},success:e,failure:n})},listAttachmentInfo:function(t,e,n){this.action.invoke({name:"listAttachmentInfo",async:n,success:t,failure:e})},uploadAttachment:function(t,e,n,i){this.action.invoke({name:"uploadAttachment",data:n,file:i,success:t,failure:e})},deleteAttachment:function(t,e,n,i){this.action.invoke({name:"deleteAttachment",async:i,parameter:{id:t},success:e,failure:n})},getAttachmentStream:function(t){this.action.getActions(function(){var e=this.action.actions.getAttachmentStream.uri;e=e.replace("{id}",encodeURIComponent(t));window.open(this.action.address+e)}.bind(this))},listDetailFilterNext:function(t,e,n,i,a,c){this.action.invoke({name:"listDetailFilterNext",parameter:{id:t,count:e},data:n,async:c,success:i,failure:a})},listDetailFilterPrev:function(t,e,n,i,a,c){this.action.invoke({name:"listDetailFilterPrev",parameter:{id:t,count:e},data:n,async:c,success:i,failure:a})},deployBaseWork:function(t,e,n,i){this.action.invoke({name:"deployBaseWork",data:t,async:i,success:e,failure:n})},listAttachment:function(t,e,n,i){this.action.invoke({name:"listAttachment",async:i,parameter:{documentid:t},success:e,failure:n})},uploadAttachment:function(t,e,n,i,a){this.action.invoke({name:"uploadAttachment",parameter:{documentid:t},data:i,file:a,success:e,failure:n})},getAttachment:function(t,e,n,i,a){this.action.invoke({name:"getAttachment",async:a,parameter:{id:t,documentid:e},success:n,failure:i})},deleteAttachment:function(t,e,n,i,a){this.action.invoke({name:"deleteAttachment",async:a,parameter:{id:t,documentid:e},success:n,failure:i})},getAttachmentData:function(t,e){this.action.getActions(function(){var n=this.action.actions.getAttachmentData.uri;n=n.replace("{id}",encodeURIComponent(t));n=n.replace("{documentid}",encodeURIComponent(e));window.open(this.actionAttachment.address+n)}.bind(this))},getAttachmentStream:function(t,e){this.action.getActions(function(){var n=this.action.actions.getAttachmentStream.uri;n=n.replace("{id}",encodeURIComponent(t));n=n.replace("{documentid}",encodeURIComponent(e));window.open(this.action.address+n)}.bind(this))},getAttachmentUrl:function(t,e,n){this.action.getActions(function(){var i=this.action.actions.getAttachmentData.uri;i=i.replace("{id}",encodeURIComponent(t));i=i.replace("{documentid}",encodeURIComponent(e));if(n)n(this.action.address+i)}.bind(this))}});