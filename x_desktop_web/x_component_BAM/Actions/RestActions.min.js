MWF.xApplication.BAM.Actions=MWF.xApplication.BAM.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.xApplication.BAM.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_processplatform_assemble_bam","x_component_BAM")},summary:function(t,e,n){this.action.invoke({name:"summary",async:n,success:t,failure:e})},loadCategory:function(t,e,n){this.action.invoke({name:"loadCategory",async:n,success:t,failure:e})},loadRunning:function(t,e,n){this.action.invoke({name:"loadRunning",async:n,success:t,failure:e})},loadOrganization:function(t,e,n){this.action.invoke({name:"loadOrganization",async:n,success:t,failure:e})},getRankData:function(t){var e=t.map(function(t,e){return{name:t.name,value:t.count?Math.round(t.duration/t.count/60*100)/100:0}});e.sort(function(t,e){return e.value-t.value});var n=t.map(function(t,e){return{name:t.name,value:t.expiredCount}});n.sort(function(t,e){return e.value-t.value});var a=t.map(function(t,e){return{name:t.name,value:t.completedCount}});a.sort(function(t,e){return e.value-t.value});var u=t.map(function(t,e){return{name:t.name,value:t.completedCount?Math.round((t.completedCount-t.completedExpiredCount)/t.completedCount*100)/100:0}});u.sort(function(t,e){return e.value-t.value});var o=t.map(function(t,e){return{name:name?name(t):t.name,value:t.count+t.completedCount?Math.round((t.expiredCount+t.completedExpiredCount)/(t.count+t.completedCount)*100)/100:0}});o.sort(function(t,e){return e.value-t.value});return{taskDuration:e.filter(function(t){return t.value}),taskElapsedCount:n.filter(function(t){return t.value}),taskCompletedCount:a.filter(function(t){return t.value}),taskCompletedTimeliness:u.filter(function(t){return t.value}),taskTimeoutRate:o.filter(function(t){return t.value})}},getTaskContentData:function(t,e){var n=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCount}});n.sort(function(t,e){return e.value-t.value});var a=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCount?Math.round(t.taskDuration/t.taskCount/60*100)/100:0}});a.sort(function(t,e){return e.value-t.value});var u=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskExpiredCount}});u.sort(function(t,e){return e.value-t.value});var o=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCount?t.taskExpiredCount/t.taskCount:0}});o.sort(function(t,e){return e.value-t.value});return{taskCount:n.filter(function(t){return t.value}),taskDuration:a.filter(function(t){return t.value}),taskElapsedCount:u.filter(function(t){return t.value}),taskTimeoutRate:o.filter(function(t){return t.value})}},getTaskCompletedContentData:function(t,e){var n=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCompletedCount}});n.sort(function(t,e){return e.value-t.value});var a=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCompletedCount?Math.round(t.taskCompletedDuration/t.taskCompletedCount/60*100)/100:0}});a.sort(function(t,e){return e.value-t.value});var u=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCompletedExpiredCount}});u.sort(function(t,e){return e.value-t.value});var o=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCompletedCount?t.taskCompletedExpiredCount/t.taskCompletedCount:0}});o.sort(function(t,e){return e.value-t.value});var r=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCompletedCount?(t.taskCompletedCount-t.taskCompletedExpiredCount)/t.taskCompletedCount:0}});r.sort(function(t,e){return e.value-t.value});return{taskCompletedCount:n.filter(function(t){return t.value}),taskCompletedDuration:a.filter(function(t){return t.value}),taskCompletedElapsedCount:u.filter(function(t){return t.value}),taskTimeoutRate:o.filter(function(t){return t.value}),taskTimelinessRate:r.filter(function(t){return t.value})}},getWorkContentData:function(t,e){var n=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCount}});n.sort(function(t,e){return e.value-t.value});var a=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCount?Math.round(t.workDuration/t.workCount/60*100)/100:0}});a.sort(function(t,e){return e.value-t.value});var u=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workExpiredCount}});u.sort(function(t,e){return e.value-t.value});var o=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCount?t.workExpiredCount/t.workCount:0}});o.sort(function(t,e){return e.value-t.value});return{workCount:n.filter(function(t){return t.value}),workDuration:a.filter(function(t){return t.value}),workElapsedCount:u.filter(function(t){return t.value}),workTimeoutRate:o.filter(function(t){return t.value})}},getWorkCompletedContentData:function(t,e){var n=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCompletedCount}});n.sort(function(t,e){return e.value-t.value});var a=t.map(function(t,n){return{name:e?e(t):t.name,value:t.taskCompletedCount?Math.round(t.workCompletedDuration/t.workCompletedCount/60*100)/100:0}});a.sort(function(t,e){return e.value-t.value});var u=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCompletedExpiredCount}});u.sort(function(t,e){return e.value-t.value});var o=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCompletedCount?t.workCompletedExpiredCount/t.workCompletedCount:0}});o.sort(function(t,e){return e.value-t.value});var r=t.map(function(t,n){return{name:e?e(t):t.name,value:t.workCompletedCount?(t.workCompletedCount-t.workCompletedExpiredCount)/t.workCompletedCount:0}});r.sort(function(t,e){return e.value-t.value});return{workCompletedCount:n.filter(function(t){return t.value}),workCompletedDuration:a.filter(function(t){return t.value}),workCompletedElapsedCount:u.filter(function(t){return t.value}),workTimeoutRate:o.filter(function(t){return t.value}),workTimelinessRate:r.filter(function(t){return t.value})}},loadMonthly:function(t,e,n,a,u,o){var r="loadMonthly"+t.capitalize()+"By"+e.type.capitalize();var i;debugger;if(e.type=="activity"||e.type=="application"||e.type=="process"){i={companyName:n.company||"(0)",departmentName:n.department||"(0)",personName:n.person||"(0)",applicationId:e.range.application,processId:e.range.process,activityId:e.range.activity}}else{i={companyName:e.range.companyName,departmentName:e.range.departmentName,personName:e.range.personName,applicationId:n.application||"(0)",processId:n.process||"(0)",activityId:n.activity||"(0)"}}this.action.invoke({name:r,async:o,parameter:i,success:a,failure:u})}});