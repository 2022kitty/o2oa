MWF.xApplication.File.Actions=MWF.xApplication.File.Actions||{};MWF.require("MWF.xDesktop.Actions.RestActions",null,false);MWF.xApplication.File.Actions.RestActions=new Class({initialize:function(){this.action=new MWF.xDesktop.Actions.RestActions("/Actions/action.json","x_file_assemble_control","x_component_File")},listTopFolder:function(t,e,i){this.action.invoke({name:"listFolderTop",async:i,success:t,failure:e})},listShare:function(t,e,i){this.action.invoke({name:"listShare",async:i,success:t,failure:e})},listShareAttachment:function(t,e,i,n){this.action.invoke({name:"listShareAttachment",async:n,parameter:{person:i},success:t,failure:e})},listEditor:function(t,e,i){this.action.invoke({name:"listEditor",async:i,success:t,failure:e})},listEditorAttachment:function(t,e,i,n){this.action.invoke({name:"listEditorAttachment",async:n,parameter:{person:i},success:t,failure:e})},listFolder:function(t,e,i,n){this.action.invoke({name:"listFolder",async:n,parameter:{id:i},success:t,failure:e})},listAttachmentTop:function(t,e,i){this.action.invoke({name:"listAttachmentTop",async:i,success:t,failure:e})},listAttachment:function(t,e,i,n){this.action.invoke({name:"listAttachment",async:n,parameter:{id:i},success:t,failure:e})},listComplex:function(t,e,i,n){this.action.invoke({name:"listComplex",async:n,parameter:{id:i},success:t,failure:e})},addAttachment:function(t,e,i,n,a){this.action.invoke({name:"addAttachment",data:i,parameter:{folder:n},file:a,success:t,failure:e})},updateAttachmentData:function(t,e,i,n,a){this.action.invoke({name:"updateAttachmentData",data:i,parameter:{id:n},file:a,success:t,failure:e})},getFolder:function(t,e,i,n){this.action.invoke({name:"getFolder",async:n,parameter:{id:i},success:t,failure:e})},getAttachment:function(t){var e=this.designAddress+this.fileActions.getAttachmentData.uri;e=e.replace(/{id}/g,t);window.open(e)},saveFolder:function(t,e,i){if(t.id){this.updateFolder(t,e,i)}else{this.addFolder(t,e,i)}},updateFolder:function(t,e,i){this.action.invoke({name:"updateFolder",data:t,parameter:{id:t.id},success:e,failure:i})},addFolder:function(t,e,i){this.action.invoke({name:"addFolder",data:t,success:e,failure:i})},updateAttachment:function(t,e,i){this.action.invoke({name:"updateAttachment",data:t,parameter:{id:t.id},success:e,failure:i})},deleteFolder:function(t,e,i){this.action.invoke({name:"removeFolder",parameter:{id:t},success:e,failure:i})},deleteFile:function(t,e,i){this.action.invoke({name:"removeAttachment",parameter:{id:t},success:e,failure:i})},getFileUrl:function(t,e){this.action.getActions(function(){var i=this.action.actions.getAttachmentData.uri;i=i.replace("{id}",encodeURIComponent(t));if(e)e(this.action.address+i)}.bind(this))},getFileDownloadUrl:function(t,e){this.action.getActions(function(){var i=this.action.actions.getAttachmentStream.uri;i=i.replace("{id}",encodeURIComponent(t));if(e)e(this.action.address+i)}.bind(this))},getBase64Code:function(t,e,i,n,a,s){n=n||0;a=a||0;this.action.invoke({name:"getBase64Code",async:s,parameter:{id:i,height:a,width:n},success:t,failure:e})}});