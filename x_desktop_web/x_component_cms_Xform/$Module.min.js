MWF.require("MWF.widget.Common",null,false);MWF.xApplication.cms.Xform.$Module=MWF.CMS$Module=new Class({Implements:[Events],options:{moduleEvents:["load"]},initialize:function(t,s,i,e){this.node=$(t);this.node.store("module",this);this.json=s;this.form=i},load:function(){if(this.fireEvent("queryLoad")){this._queryLoaded();this._loadUserInterface();this._loadStyles();this._loadEvents();this._afterLoaded();this.fireEvent("postLoad");this.fireEvent("load")}},_loadUserInterface:function(){},_loadStyles:function(){if(this.json.styles)this.node.setStyles(this.json.styles)},_loadEvents:function(){Object.each(this.json.events,function(t,s){if(t.code){if(this.options.moduleEvents.indexOf(s)!=-1){this.addEvent(s,function(s){return this.form.CMSMacro.fire(t.code,this,s)}.bind(this))}else{this.node.addEvent(s,function(s){return this.form.CMSMacro.fire(t.code,this,s)}.bind(this))}}}.bind(this))},_getBusinessData:function(){return this.form.businessData.data[this.json.id]},_setBusinessData:function(t){if(this.form.businessData.data[this.json.id]){this.form.businessData.data[this.json.id]=t}else{this.form.businessData.data[this.json.id]=t;this.form.CMSMacro.environment.setData(this.form.businessData.data)}},_queryLoaded:function(){},_afterLoaded:function(){},setValue:function(){},focus:function(){this.node.focus()}});