MWF.xDesktop.requireApp("process.Xform","ImageClipper",null,false);MWF.xApplication.cms.Xform.ImageClipper=MWF.CMSImageClipper=new Class({Extends:MWF.APPImageClipper,selectImage:function(e,i){var t=this.json.clipperType||"unrestricted";var a=1;if(t=="unrestricted"){a=0}else if(t=="size"){var r=this.json.imageWidth.toInt();var s=this.json.imageHeight.toInt();a=r/s}else if(t=="ratio"){a=this.json.imageRatio||1}MWF.xDesktop.requireApp("process.Xform","widget.ImageClipper",function(){this.imageClipper=new MWF.xApplication.process.Xform.widget.ImageClipper(this.form.app,{style:"default",aspectRatio:a,imageUrl:e?MWF.xDesktop.getImageSrc(e):"",reference:this.form.businessData.document.id,referenceType:"cmsDocument",onChange:function(){i({src:this.imageClipper.imageSrc,id:this.imageClipper.imageId})}.bind(this)});this.imageClipper.load()}.bind(this))},validationConfigItem:function(e,i){var t=i.status=="all"?true:e=="publish";if(t){var a=this.getData();var r=i.valueType=="value"?a:a.length;switch(i.operateor){case"isnull":if(!r){this.notValidationMode(i.prompt);return false}break;case"notnull":if(r){this.notValidationMode(i.prompt);return false}break;case"gt":if(r>i.value){this.notValidationMode(i.prompt);return false}break;case"lt":if(r<i.value){this.notValidationMode(i.prompt);return false}break;case"equal":if(r==i.value){this.notValidationMode(i.prompt);return false}break;case"neq":if(r!=i.value){this.notValidationMode(i.prompt);return false}break;case"contain":if(r.indexOf(i.value)!=-1){this.notValidationMode(i.prompt);return false}break;case"notcontain":if(r.indexOf(i.value)==-1){this.notValidationMode(i.prompt);return false}break}}return true}});