MWF.xDesktop.requireApp("process.Xform","ViewSelector",null,false);MWF.xApplication.cms.Xform.ViewSelector=MWF.CMSViewSelector=new Class({Extends:MWF.APPViewSelector,selectView:function(t){if(this.json.viewName){var e={application:this.json.application||this.form.json.application,viewName:this.json.viewName||"",isTitle:this.json.isTitle||"yes",select:this.json.select||"single"};var i={};var o=i.width||"700";var s=i.height||"400";if(layout.mobile){var n=document.body.getSize();o=n.x;s=n.y;i.style="viewmobile"}o=o.toInt();s=s.toInt();var n=this.form.app.content.getSize();var l=(n.x-o)/2;var c=(n.y-s)/2;if(l<0)l=0;if(c<0)c=0;if(layout.mobile){l=20;c=0}var a=this;MWF.require("MWF.xDesktop.Dialog",function(){var n=new MWF.xDesktop.Dialog({title:this.json.title||"select view",style:i.style||"view",top:c,left:l-20,fromTop:c,fromLeft:l-20,width:o,height:s,html:"<div></div>",maskNode:this.form.app.content,container:this.form.app.content,buttonList:[{text:MWF.LP.process.button.ok,action:function(){if(t)t(a.view.getData());this.close()}},{text:MWF.LP.process.button.cancel,action:function(){this.close()}}]});n.show();if(layout.mobile){var r=n.node.getElement(".MWF_dialod_Action_back");var f=n.node.getElement(".MWF_dialod_Action_ok");if(r)r.addEvent("click",function(t){n.close()}.bind(this));if(f)f.addEvent("click",function(e){if(t)t(this.view.getData());n.close()}.bind(this))}MWF.xDesktop.requireApp("cms.Xform","widget.View",function(){this.view=new MWF.xApplication.cms.Xform.widget.View(n.content.getFirst(),e,{style:"select"})}.bind(this))}.bind(this))}}});