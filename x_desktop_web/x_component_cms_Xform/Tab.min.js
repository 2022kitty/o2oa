MWF.xDesktop.requireApp("cms.Xform","$Module",null,false);MWF.require("MWF.widget.Tab",null,false);MWF.xApplication.cms.Xform.Tab=MWF.CMSTab=new Class({Extends:MWF.CMS$Module,_loadUserInterface:function(){this.elements=[];this.containers=[];this.tab=new MWF.widget.Tab(this.node,{style:"formMobile"});this._setTabWidgetStyles();this.tab.tabNodeContainer=this.node.getFirst("div");this.tab.contentNodeContainer=this.node.getLast("div");this.tab.load();var t=this.tab.tabNodeContainer.getChildren("div");var s=this.tab.contentNodeContainer.getChildren("div");t.each(function(t,e){this.tab.rebuildTab(s[e],s[e].getFirst(),t)}.bind(this));this.tab.pages[0]._showTab();this.loadSubModule()},loadSubModule:function(){this.tab.pages.each(function(t){var s=t.tabNode;var e=this.form._getDomjson(s);var i=this;var o=this.form._loadModule(e,s,function(){this.tab=i});this.elements.push(o);this.form.modules.push(o);s=t.contentNode;e=this.form._getDomjson(s);i=this;o=this.form._loadModule(e,s,function(){this.tab=i});this.containers.push(o);this.form.modules.push(o)}.bind(this))},_setTabWidgetStyles:function(){this.tab.css.tabNode=this.json.tabStyles;this.tab.css.tabTextNode=this.json.tabTextStyles;this.tab.css.tabNodeCurrent=this.json.tabCurrentStyles;this.tab.css.tabTextNodeCurrent=this.json.tabTextCurrentStyles}});