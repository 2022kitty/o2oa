MWF.xDesktop.requireApp("cms.Xform","$Module",null,false);MWF.xApplication.cms.Xform.Table=MWF.CMSTable=new Class({Extends:MWF.CMS$Module,_afterLoaded:function(){if(!this.table)this.table=this.node.getElement("table");var t=this.node.getElements("td");t.each(function(t){var e=this.form._getDomjson(t);var s=this;var o=this.form._loadModule(e,t,function(){this.table=s});this.form.modules.push(o)}.bind(this))},_loadBorderStyle:function(){if(this.json.styles.border){if(!this.table)this.table=this.node.getElement("table");this.table.set("cellspacing","0");this.table.setStyles({"border-top":this.json.styles.border,"border-left":this.json.styles.border});var t=this.table.getElements("th");t.setStyles({"border-bottom":this.json.styles.border,"border-right":this.json.styles.border});var e=this.table.getElements("td");e.setStyles({"border-bottom":this.json.styles.border,"border-right":this.json.styles.border,background:"transparent"})}},_loadStyles:function(){Object.each(this.json.styles,function(t,e){var s=/^border\w*/gi;if(!e.test(s)){this.node.setStyle(e,t)}}.bind(this));this._loadBorderStyle()}});MWF.xApplication.cms.Xform.Table$Td=MWF.CMSTable$Td=new Class({Extends:MWF.CMS$Module,_queryLoaded:function(){},_afterLoaded:function(){},_loadStyles:function(){var t={};if(this.json.cellType=="title"){t=this.table.json.titleTdStyles}if(this.json.cellType=="content"){t=this.table.json.contentTdStyles}if(this.json.cellType=="layout"){t=this.table.json.layoutTdStyles}this.node.setStyles(t);this.node.setStyles(this.json.styles);if(this.json.cellType=="content"){this.form.addEvent("postLoad",function(){var t=this.node.getElements("input");t.each(function(t){var e=t.get("type").toLowerCase();if(e!="radio"&&e!="checkbox"&&e!="submit"&&e!="buttom"&&e!="image"){t.setStyle("width","80%")}}.bind(this))}.bind(this))}}});