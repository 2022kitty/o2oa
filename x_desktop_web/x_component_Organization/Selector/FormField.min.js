MWF.xApplication.Organization.Selector=MWF.xApplication.Organization.Selector||{};MWF.xDesktop.requireApp("Organization","Actions.RestActions",null,false);MWF.xDesktop.requireApp("Organization","Selector.Department",null,false);MWF.xApplication.Organization.Selector.FormField=new Class({Extends:MWF.xApplication.Organization.Selector.Department,options:{style:"default",count:0,title:"Select Field",fieldType:"",values:[],names:[],application:"",expand:false},loadSelectItems:function(t){debugger;if(this.options.application){this.action.listFormField(this.options.application,function(t){this.fieldData=t.data;if(this.options.fieldType){if(t.data[this.options.fieldType]){t.data[this.options.fieldType].each(function(t){t.id=t.name;var e=this._newItem(t,this,this.itemAreaNode)}.bind(this))}}else{Object.each(t.data,function(t,e){var i=this._newItemCategory({name:e,data:t},this,this.itemAreaNode)}.bind(this))}}.bind(this))}},_scrollEvent:function(t){return true},_getChildrenItemIds:function(){return null},_newItemCategory:function(t,e,i,n){return new MWF.xApplication.Organization.Selector.FormField.ItemCategory(t,e,i,n)},_listItemByKey:function(t,e,i){var n=[];if(this.options.fieldType){n=this.fieldData[this.options.fieldType]}else{Object.each(this.fieldData,function(t,e){n=n.length?n.concat(t):t}.bind(this))}var o=[];n.each(function(t){if(t.name.toLowerCase().indexOf(i.toLowerCase())!=-1)o.push(t)}.bind(this));if(t)t.apply(this,[{data:o}])},_getItem:function(t,e,i,n){if(t)t({data:{name:i,id:i}})},_newItemSelected:function(t,e,i){return new MWF.xApplication.Organization.Selector.FormField.ItemSelected(t,e,i)},_listItemByPinyin:function(t,e,i){this._listItemByKey(t,e,i)},_newItem:function(t,e,i,n){return new MWF.xApplication.Organization.Selector.FormField.Item(t,e,i,n)}});MWF.xApplication.Organization.Selector.FormField.Item=new Class({Extends:MWF.xApplication.Organization.Selector.Person.Item,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Organization/Selector/$Selector/default/icon/processicon.png)")},loadSubItem:function(){return false}});MWF.xApplication.Organization.Selector.FormField.ItemSelected=new Class({Extends:MWF.xApplication.Organization.Selector.Person.ItemSelected,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Organization/Selector/$Selector/default/icon/processicon.png)")}});MWF.xApplication.Organization.Selector.FormField.ItemCategory=new Class({Extends:MWF.xApplication.Organization.Selector.Identity.ItemCompanyCategory,_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Organization/Selector/$Selector/default/icon/applicationicon.png)")},loadSub:function(t){if(!this.loaded){var e=this.selector.fieldData[this.data.name];e.each(function(t){var e=this.selector._newItem(t,this.selector,this.children,this.level+1)}.bind(this));this.loaded=true;if(t)t()}else{if(t)t()}},_hasChild:function(){var t=this.selector.fieldData[this.data.name];return t&&t.length}});