MWF.xApplication.Organization.Selector=MWF.xApplication.Organization.Selector||{};MWF.xDesktop.requireApp("Organization","Actions.RestActions",null,false);MWF.xDesktop.requireApp("Organization","Selector.Identity",null,false);MWF.xApplication.Organization.Selector.Duty=new Class({Extends:MWF.xApplication.Organization.Selector.Identity,options:{style:"default",count:0,title:"Select Duty",companys:[],departments:[],values:[],names:[],expand:false},initialize:function(t,e){this.setOptions(e);this.options.groups=[];this.options.roles=[];this.path="/x_component_Organization/Selector/$Selector/";this.cssPath="/x_component_Organization/Selector/$Selector/"+this.options.style+"/css.wcss";this._loadCss();this.container=$(t);this.action=new MWF.xApplication.Organization.Actions.RestActions;this.lastPeople="";this.pageCount="13";this.selectedItems=[];this.items=[]},loadSelectItems:function(t){this.comapnyCategory=this._newItemCategory("Category",{name:"公司职务",id:"company"},this,this.itemAreaNode);this.comapnyCategory=this._newItemCategory("Category",{name:"部门职务",id:"department"},this,this.itemAreaNode)},_scrollEvent:function(t){return true},_getChildrenItemIds:function(){return null},_newItemCategory:function(t,e,n,i,o){return new MWF.xApplication.Organization.Selector.Duty[t](e,n,i,o)},_listItemByKey:function(t,e,n){this.action.listDepartmentByKey(function(e){if(t)t.apply(this,[e])}.bind(this),e,n)},_getItem:function(t,e,n,i){this.action.getDepartment(function(e){if(t)t.apply(this,[e])}.bind(this),e,n,i)},_newItemSelected:function(t,e,n){return new MWF.xApplication.Organization.Selector.Duty.ItemSelected(t,e,n)},_listItemByPinyin:function(t,e,n){this.action.listDepartmentByKey(function(e){if(t)t.apply(this,[e])}.bind(this),e,n)},_newItem:function(t,e,n,i){return new MWF.xApplication.Organization.Selector.Duty.Item(t,e,n,i)}});MWF.xApplication.Organization.Selector.Duty.Item=new Class({Extends:MWF.xApplication.Organization.Selector.Person.Item,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Organization/Selector/$Selector/default/icon/duty.png)")}});MWF.xApplication.Organization.Selector.Duty.ItemSelected=new Class({Extends:MWF.xApplication.Organization.Selector.Person.ItemSelected,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Organization/Selector/$Selector/default/icon/duty.png)")}});MWF.xApplication.Organization.Selector.Duty.Category=new Class({Extends:MWF.xApplication.Organization.Selector.Identity.ItemCompanyCategory,_getShowName:function(){return this.data.name},_setIcon:function(){this.iconNode.setStyle("background-image","url("+"/x_component_Organization/Selector/$Selector/default/icon/dutyCategory.png)")},loadSub:function(t){if(!this.loaded){if(this.data.id=="company"){this.selector.action.listCompanyDutyName(function(t){t.data.valueList.each(function(t){this.selector._newItem({name:t},this.selector,this.children,this.level+1)}.bind(this))}.bind(this))}if(this.data.id=="department"){this.selector.action.listDepartmentDutyName(function(t){t.data.valueList.each(function(t){this.selector._newItem({name:t},this.selector,this.children,this.level+1)}.bind(this))}.bind(this))}this.loaded=true;if(t)t()}else{if(t)t()}},_hasChild:function(){return true}});